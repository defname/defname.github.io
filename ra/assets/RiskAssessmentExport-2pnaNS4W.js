import{d as D,x as v,o as t,c as L,w as c,b as h,j as a,f as l,k as b,H as C,J as w,K as z,a as n,t as r,g as s,l as p,R as _,F as o,G}from"./index-R5HXRjtq.js";import{u as x,b as I}from"./riskassessment-80Fg-rO-.js";import{G as B}from"./GenericEditModal-HiT8C_1Z.js";import{S as f}from"./helpers-iQs7hfjM.js";import{T as R}from"./TemplateRiskAssessmentPage-6vROPoR8.js";import{S}from"./SignatureInput-KD3LJoBS.js";import"./livequery-QysOfrd6.js";import"./liveriskstree-sHZL10sm.js";import"./index-uxwhvdQ4.js";const $={id:"print"},N=n("h1",null,"Einsatzplanung",-1),V=n("p",null," Es wird grundsätzlich nach den geltenden Regeln und Vorschriften der DGUV, dem Arbeitsschutzgesetz, der BetrSichV, den TRBS und der FISAT FSR-SZP gearbeitet. ",-1),F=n("strong",null,"Ausführende Firma:",-1),P=n("strong",null,"Einsatzdatum:",-1),j=n("strong",null,"Einsatzort:",-1),U=n("strong",null,"Durchzuführende Arbeiten:",-1),Z=n("br",null,null,-1),W={key:0},q=n("strong",null,"Aufsichtsführende Höhenarbeiter:",-1),J=n("p",null,[n("strong",null,"Höhenarbeiter:")],-1),K=n("thead",null,[n("tr",null,[n("th",null,"Name"),n("th",null,"FISAT-Nr"),n("th",null,"Level")])],-1),O=n("strong",null,"Ausrüstung:",-1),Q=n("h2",null,"Zugangsverfahren",-1),X={key:0},Y=n("strong",null,"Einstieg:",-1),nn=["innerHTML"],en={key:1},tn=n("strong",null,"Ausstieg:",-1),sn=["innerHTML"],ln={key:2},rn=n("strong",null,"Anschlagpunkte:",-1),un=["innerHTML"],on=["innerHTML"],an=n("h2",null,"Notfall- und Rettungsplan",-1),dn=["innerHTML"],cn=n("h1",null,"Gefährdungsermittlung",-1),hn={key:0},_n={key:1},pn={key:2},mn=n("thead",null,[n("tr",null,[n("th",null,"Gefährdung"),n("th",null,"Maßnahme")])],-1),gn={colspan:"2"},fn={class:"factor"},kn={key:0},bn=["src"],yn={key:2},vn=n("strong",null,"Ohne Unterschrift",-1),Tn=[vn],An=n("h1",null,"Empfangsbestätigung",-1),En=n("p",null," Es wird bestätigt, über Gefahren und Maßnahmen aufgeklärt worden zu sein. ",-1),Hn=["src"],Rn=D({__name:"RiskAssessmentExport",setup(Mn){const y=x(),u=I(),T=v(void 0),k=v(!1);function A(g){const i=window.open("","print","");if(!i)return;i.open(),i.document.write('<html>\n    <head>\n        <link rel="stylesheet" href="/ra/print.css" />\n    </head>\n    <body>'.concat(g.outerHTML,"\n    </body>\n    </html>")),i.document.close();const e=i.document.createElement("script");e.setAttribute("src","/ra/print.js"),i.document.head.appendChild(e)}async function E(){A(document.getElementById("print"))}function H(g){y.signature=g}return(g,i)=>(t(),L(R,null,{default:c(()=>[h(l(b),{"router-link":"/riskassessment/"+l(y).id+"/sign"},{default:c(()=>[a("Unterzeichnen (Technicker)")]),_:1},8,["router-link"]),h(l(b),{onClick:i[0]||(i[0]=e=>k.value=!0)},{default:c(()=>[a("Unterzeichnen")]),_:1}),h(l(b),{onClick:i[1]||(i[1]=e=>E())},{default:c(()=>[a("Drucken")]),_:1}),h(B,{"is-open":k.value,"hide-save":"",onWillDismiss:i[2]||(i[2]=e=>k.value=!1),onDidPresent:i[3]||(i[3]=e=>g.$refs.signatureinput.updateDimensions())},{default:c(()=>[h(S,{onSignature:H,ref_key:"signatureinput",ref:T},null,512)]),_:1},8,["is-open"]),h(l(G),null,{default:c(()=>[h(l(C),null,{default:c(()=>[h(l(w),null,{default:c(()=>[a("Druckvorschau")]),_:1})]),_:1}),h(l(z),null,{default:c(()=>[n("div",$,[N,V,n("p",null,[F,a(" "+r(l(u).company),1)]),n("p",null,[P,a(" "+r(l(u).startDate)+" "+r(l(u).endDate?l(u).endDate:""),1)]),n("p",null,[j,a(" "+r(l(u).address),1)]),n("p",null,[U,Z,a(" "+r(l(u).jobDescr),1)]),l(u).supervisors?(t(),s("p",W,[q,a(" "+r(l(u).supervisors.map(e=>e.name).join(", ")),1)])):p("",!0),J,n("table",null,[K,(t(!0),s(o,null,_(l(u).technicians,e=>{var m,d;return t(),s("tr",null,[n("td",null,r(e.name),1),n("td",null,r((m=e.fisat)==null?void 0:m.id),1),n("td",null,r((d=e.fisat)==null?void 0:d.level),1)])}),256))]),n("p",null,[O,n("ul",null,[(t(!0),s(o,null,_(l(u).equipment,e=>(t(),s("li",null,r(e.descr),1))),256))])]),Q,(t(!0),s(o,null,_(l(u).access,e=>(t(),s(o,null,[n("p",null,[n("strong",null,r(e.title),1)]),e.access?(t(),s("p",X,[Y,a(),n("span",{innerHTML:e.access},null,8,nn)])):p("",!0),e.exit?(t(),s("p",en,[tn,a(),n("span",{innerHTML:e.exit},null,8,sn)])):p("",!0),e.anchorPoints?(t(),s("p",ln,[rn,a(),n("span",{innerHTML:e.anchorPoints},null,8,un)])):p("",!0),e.comment?(t(),s("p",{key:3,innerHTML:e.comment},null,8,on)):p("",!0)],64))),256)),an,(t(!0),s(o,null,_(l(u).access,e=>(t(),s(o,null,[n("p",null,[n("strong",null,r(e.title),1)]),n("p",{innerHTML:e.rescue},null,8,dn)],64))),256)),cn,(t(!0),s(o,null,_([l(f).Access,l(f).Environment,l(f).Work],e=>(t(),s(o,null,[e===l(f).Access?(t(),s("h3",hn,"Gefahren durch die ausgewählten Zugangstechniken")):e===l(f).Environment?(t(),s("h3",_n,"Gefahren durch die Arbeitsumgebung")):(t(),s("h3",pn,"Gefahren durch die Arbeit")),n("table",null,[mn,n("tbody",null,[(t(!0),s(o,null,_(l(u).categories,m=>(t(),s(o,null,[m.risks.filter(d=>d.risk.sector===e).length?(t(),s(o,{key:0},[n("tr",null,[n("th",gn,r(m.descr),1)]),(t(!0),s(o,null,_(m.risks.filter(d=>d.risk.sector===e),d=>(t(),s("tr",null,[n("td",null,[n("span",fn,r(d.risk.factor.descr),1),a(" "+r(d.risk.descr),1)]),n("td",null,[d.measures.length>1?(t(),s("ul",kn,[(t(!0),s(o,null,_(d.measures,M=>(t(),s("li",null,r(M.descr),1))),256))])):d.measures.length===1?(t(),s(o,{key:1},[a(r(d.measures[0].descr),1)],64)):p("",!0)])]))),256))],64)):p("",!0)],64))),256))])])],64))),256)),l(u).signature?(t(),s("img",{key:1,src:l(u).signature.signature},null,8,bn)):(t(),s("p",yn,Tn)),An,En,(t(!0),s(o,null,_(l(u).signatures,e=>(t(),s("div",null,[n("img",{src:e.signature},null,8,Hn)]))),256))])]),_:1})]),_:1})]),_:1}))}});export{Rn as default};
