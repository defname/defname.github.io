import{as as Yt,d as qt,x as zt,o as wt,c as Ht,w as he,b as be,f as le,H as Pt,J as It,j as Be,K as Ct,g as jt,r as et,t as st,F as Bt,aC as St,G as kt,k as Rt}from"./index-6YVP06UH.js";import{_ as Wt}from"./TemplateMainPage.vue_vue_type_script_setup_true_lang-rCc9cXlL.js";import{X as ke,d as dt}from"./database-GtjOZku2.js";import{C as Lt,r as xt,W as Xt}from"./index-0jqLegA0.js";import{F as Ot,a as Qt,D as Zt}from"./index-uUPD7BJt.js";import{p as ct}from"./helpers-iJWbSvob.js";import{b as Ft}from"./index-vKAypPwJ.js";import"./index-9UN-Ox_G.js";function en(h){const f=new FileReader;return f.readAsDataURL(h),new Promise(u=>{f.onloadend=()=>{u(f.result)}})}function tn(h){const f=new Date(Date.now()),u=f.getHours()*60*60+f.getMinutes()*60+f.getSeconds(),d=(f.getMonth()+1).toString().padStart(2,"0")+f.getDate().toString().padStart(2,"0")+u,v=h.split(".");if(v.length===1)return h+d;const l=v.splice(-1);return v.join(".")+d+"."+l}async function nn(h,f,u=!1,d=Zt.Documents){const v=tn(f);if(!Lt.isNativePlatform()){const a=Ft({dataType:"Blob",types:[{description:"JSON Datei",accept:{"application/json":[".json"]}}]});if(!a.isSupported.value){const A=URL.createObjectURL(h),N=document.createElement("a");N.href=A,u||(N.download=v),document.body.appendChild(N),N.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),document.body.removeChild(N);return}a.data.value=h;try{await a.saveAs({suggestedName:f}),ct("Datei gespeichert: "+a.fileName.value,"success")}catch(A){}return a.fileName.value}if(!await Ot.checkPermissions().then(a=>{if(a.publicStorage==="granted")return!0;throw Error}).catch(()=>Ot.requestPermissions().then(a=>a.publicStorage==="granted"))){ct("Keine Erlaubnis zum Speichern von Dateien erteilt.",void 0,"middle");return}return Ot.writeFile({path:"RopeRisk/"+v,directory:d,data:await en(h),recursive:!0}).then(a=>(ct("Datei gespeichert: "+a.uri,"success"),u&&Qt.open(a.uri,"application/pdf"),a.uri)).catch(()=>{throw ct("Beim Speichern ist ein Fehler aufgetreten.","danger"),Error()})}var Ut={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function at(h,f,u,d){function v(l){return l instanceof u?l:new u(function(a){a(l)})}return new(u||(u=Promise))(function(l,a){function A(P){try{s(d.next(P))}catch(V){a(V)}}function N(P){try{s(d.throw(P))}catch(V){a(V)}}function s(P){P.done?l(P.value):v(P.value).then(A,N)}s((d=d.apply(h,f||[])).next())})}function Ze(h,f){var u={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},d,v,l,a;return a={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function A(s){return function(P){return N([s,P])}}function N(s){if(d)throw new TypeError("Generator is already executing.");for(;u;)try{if(d=1,v&&(l=s[0]&2?v.return:s[0]?v.throw||((l=v.return)&&l.call(v),0):v.next)&&!(l=l.call(v,s[1])).done)return l;switch(v=0,l&&(s=[s[0]&2,l.value]),s[0]){case 0:case 1:l=s;break;case 4:return u.label++,{value:s[1],done:!1};case 5:u.label++,v=s[1],s=[0];continue;case 7:s=u.ops.pop(),u.trys.pop();continue;default:if(l=u.trys,!(l=l.length>0&&l[l.length-1])&&(s[0]===6||s[0]===2)){u=0;continue}if(s[0]===3&&(!l||s[1]>l[0]&&s[1]<l[3])){u.label=s[1];break}if(s[0]===6&&u.label<l[1]){u.label=l[1],l=s;break}if(l&&u.label<l[2]){u.label=l[2],u.ops.push(s);break}l[2]&&u.ops.pop(),u.trys.pop();continue}s=f.call(h,u)}catch(P){s=[6,P],v=0}finally{d=l=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function rn(h){var f=[h.schema.primKey].concat(h.schema.indexes);return f.map(function(u){return u.src}).join(",")}function an(h){for(var f={},u=0,d=h.tables;u<d.length;u++){var v=d[u];f[v.name]=v.schema}return f}function Dt(h,f){return new Promise(function(u,d){var v=new FileReader;v.onabort=function(l){return d(new Error("file read aborted"))},v.onerror=function(l){return d(l.target.error)},v.onload=function(l){return u(l.target.result)},f==="binary"?v.readAsArrayBuffer(h):v.readAsText(h)})}function Kt(h,f){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var u=new FileReaderSync,d=f==="binary"?u.readAsArrayBuffer(h):u.readAsText(h);return d}var _t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Et(h,f){return f={exports:{}},h(f,f.exports),f.exports}var bt=Et(function(h,f){(function(u,d){h.exports=d()})(_t,function(){function u(p){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u=function(b){return typeof b}:u=function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},u(p)}function d(p,b,m,w,E,H,Z){try{var q=p[H](Z),k=q.value}catch(Ne){m(Ne);return}q.done?b(k):Promise.resolve(k).then(w,E)}function v(p){return function(){var b=this,m=arguments;return new Promise(function(w,E){var H=p.apply(b,m);function Z(k){d(H,w,E,Z,q,"next",k)}function q(k){d(H,w,E,Z,q,"throw",k)}Z(void 0)})}}function l(p,b){if(!(p instanceof b))throw new TypeError("Cannot call a class as a function")}function a(p,b){for(var m=0;m<b.length;m++){var w=b[m];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(p,w.key,w)}}function A(p,b,m){return b&&a(p.prototype,b),m&&a(p,m),p}function N(p,b,m){return b in p?Object.defineProperty(p,b,{value:m,enumerable:!0,configurable:!0,writable:!0}):p[b]=m,p}function s(p,b){var m=Object.keys(p);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(p);b&&(w=w.filter(function(E){return Object.getOwnPropertyDescriptor(p,E).enumerable})),m.push.apply(m,w)}return m}function P(p){for(var b=1;b<arguments.length;b++){var m=arguments[b]!=null?arguments[b]:{};b%2?s(Object(m),!0).forEach(function(w){N(p,w,m[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(m)):s(Object(m)).forEach(function(w){Object.defineProperty(p,w,Object.getOwnPropertyDescriptor(m,w))})}return p}function V(p,b){return F(p)||X(p,b)||me()}function Te(p){return pe(p)||Y(p)||xe()}function pe(p){if(Array.isArray(p)){for(var b=0,m=new Array(p.length);b<p.length;b++)m[b]=p[b];return m}}function F(p){if(Array.isArray(p))return p}function Y(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}function X(p,b){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]"){var m=[],w=!0,E=!1,H=void 0;try{for(var Z=p[Symbol.iterator](),q;!(w=(q=Z.next()).done)&&(m.push(q.value),!(b&&m.length===b));w=!0);}catch(k){E=!0,H=k}finally{try{!w&&Z.return!=null&&Z.return()}finally{if(E)throw H}}return m}}function xe(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function me(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var T=function p(b){l(this,p),this.p=new Promise(b)};T.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(T.prototype[Symbol.toStringTag]="TypesonPromise"),T.prototype.then=function(p,b){var m=this;return new T(function(w,E){m.p.then(function(H){w(p?p(H):H)}).catch(function(H){return b?b(H):Promise.reject(H)}).then(w,E)})},T.prototype.catch=function(p){return this.then(null,p)},T.resolve=function(p){return new T(function(b){b(p)})},T.reject=function(p){return new T(function(b,m){m(p)})},["all","race"].forEach(function(p){T[p]=function(b){return new T(function(m,w){Promise[p](b.map(function(E){return E&&E.constructor&&E.constructor.__typeson__type__==="TypesonPromise"?E.p:E})).then(m,w)})}});var ue={},$=ue.toString,_e={}.hasOwnProperty,Ae=Object.getPrototypeOf,Ie=_e.toString;function c(p,b){return z(p)&&typeof p.then=="function"&&(!b||typeof p.catch=="function")}function r(p){return $.call(p).slice(8,-1)}function g(p,b){if(!p||u(p)!=="object")return!1;var m=Ae(p);if(!m)return b===null;var w=_e.call(m,"constructor")&&m.constructor;return typeof w!="function"?b===null:b===w||b!==null&&Ie.call(w)===Ie.call(b)||typeof b=="function"&&typeof w.__typeson__type__=="string"&&w.__typeson__type__===b.__typeson__type__}function y(p){if(!p||r(p)!=="Object")return!1;var b=Ae(p);return b?g(p,Object):!0}function ee(p){if(!p||r(p)!=="Object")return!1;var b=Ae(p);return b?g(p,Object)||ee(b):!0}function z(p){return p&&u(p)==="object"}function ye(p){return p.replace(/~/g,"~0").replace(/\./g,"~1")}function ve(p){return p.replace(/~1/g,".").replace(/~0/g,"~")}function ge(p,b){if(b==="")return p;var m=b.indexOf(".");if(m>-1){var w=p[ve(b.slice(0,m))];return w===void 0?void 0:ge(w,b.slice(m+1))}return p[ve(b)]}function ne(p,b,m){if(b==="")return m;var w=b.indexOf(".");if(w>-1){var E=p[ve(b.slice(0,w))];return ne(E,b.slice(w+1),m)}return p[ve(b)]=m,p}function Fe(p){return p===null?"null":Array.isArray(p)?"array":u(p)}var De=Object.keys,Re=Array.isArray,Me={}.hasOwnProperty,rt=["type","replaced","iterateIn","iterateUnsetNumeric"];function U(p,b){if(p.keypath==="")return-1;var m=p.keypath.match(/\./g)||0,w=b.keypath.match(/\./g)||0;return m&&(m=m.length),w&&(w=w.length),m>w?-1:m<w?1:p.keypath<b.keypath?-1:p.keypath>b.keypath}var ie=function(){function p(b){l(this,p),this.options=b,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return A(p,[{key:"stringify",value:function(m,w,E,H){H=P({},this.options,{},H,{stringification:!0});var Z=this.encapsulate(m,null,H);return Re(Z)?JSON.stringify(Z[0],w,E):Z.then(function(q){return JSON.stringify(q,w,E)})}},{key:"stringifySync",value:function(m,w,E,H){return this.stringify(m,w,E,P({throwOnBadSyncType:!0},H,{sync:!0}))}},{key:"stringifyAsync",value:function(m,w,E,H){return this.stringify(m,w,E,P({throwOnBadSyncType:!0},H,{sync:!1}))}},{key:"parse",value:function(m,w,E){return E=P({},this.options,{},E,{parse:!0}),this.revive(JSON.parse(m,w),E)}},{key:"parseSync",value:function(m,w,E){return this.parse(m,w,P({throwOnBadSyncType:!0},E,{sync:!0}))}},{key:"parseAsync",value:function(m,w,E){return this.parse(m,w,P({throwOnBadSyncType:!0},E,{sync:!1}))}},{key:"specialTypeNames",value:function(m,w){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return E.returnTypeNames=!0,this.encapsulate(m,w,E)}},{key:"rootTypeName",value:function(m,w){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return E.iterateNone=!0,this.encapsulate(m,w,E)}},{key:"encapsulate",value:function(m,w,E){E=P({sync:!0},this.options,{},E);var H=E,Z=H.sync,q=this,k={},Ne=[],Ue=[],Ke=[],ze="cyclic"in E?E.cyclic:!0,He=E,tt=He.encapsulateObserver,Ve=oe("",m,ze,w||{},Ke);function We(j){var n=Object.values(k);if(E.iterateNone)return n.length?n[0]:p.getJSONType(j);if(n.length){if(E.returnTypeNames)return Te(new Set(n));!j||!y(j)||Me.call(j,"$types")?j={$:j,$types:{$:k}}:j.$types=k}else z(j)&&Me.call(j,"$types")&&(j={$:j,$types:!0});return E.returnTypeNames?!1:j}function we(j,n){return ae.apply(this,arguments)}function ae(){return ae=v(regeneratorRuntime.mark(function j(n,e){var t;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Promise.all(e.map(function(S){return S[1].p}));case 2:return t=o.sent,o.next=5,Promise.all(t.map(function(){var S=v(regeneratorRuntime.mark(function _(B){var I,x,J,M,re,Q,W,ce,fe,K,Pe,C,O,L;return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(I=[],x=e.splice(0,1),J=V(x,1),M=J[0],re=V(M,7),Q=re[0],W=re[2],ce=re[3],fe=re[4],K=re[5],Pe=re[6],C=oe(Q,B,W,ce,I,!0,Pe),O=g(C,T),!(Q&&O)){D.next=11;break}return D.next=8,C.p;case 8:return L=D.sent,fe[K]=L,D.abrupt("return",we(n,I));case 11:return Q?fe[K]=C:O?n=C.p:n=C,D.abrupt("return",we(n,I));case 13:case"end":return D.stop()}},_)}));return function(_){return S.apply(this,arguments)}}()));case 5:return o.abrupt("return",n);case 6:case"end":return o.stop()}},j)})),ae.apply(this,arguments)}function te(j,n,e){Object.assign(j,n);var t=rt.map(function(i){var o=j[i];return delete j[i],o});e(),rt.forEach(function(i,o){j[i]=t[o]})}function oe(j,n,e,t,i,o,S){var _,B={},I=u(n),x=tt?function(O){var L=S||t.type||p.getJSONType(n);tt(Object.assign(O||B,{keypath:j,value:n,cyclic:e,stateObj:t,promisesData:i,resolvingTypesonPromise:o,awaitingTypesonPromise:g(n,T)},{type:L}))}:null;if(["string","boolean","number","undefined"].includes(I))return n===void 0||I==="number"&&(isNaN(n)||n===-1/0||n===1/0)?(t.replaced?_=n:_=Se(j,n,t,i,!1,o,x),_!==n&&(B={replaced:_})):_=n,x&&x(),_;if(n===null)return x&&x(),n;if(e&&!t.iterateIn&&!t.iterateUnsetNumeric&&n&&u(n)==="object"){var J=Ne.indexOf(n);if(J<0)e===!0&&(Ne.push(n),Ue.push(j));else return k[j]="#",x&&x({cyclicKeypath:Ue[J]}),"#"+Ue[J]}var M=y(n),re=Re(n),Q=(M||re)&&(!q.plainObjectReplacers.length||t.replaced)||t.iterateIn?n:Se(j,n,t,i,M||re,null,x),W;if(Q!==n?(_=Q,B={replaced:Q}):j===""&&g(n,T)?(i.push([j,n,e,t,void 0,void 0,t.type]),_=n):re&&t.iterateIn!=="object"||t.iterateIn==="array"?(W=new Array(n.length),B={clone:W}):!["function","symbol"].includes(u(n))&&!("toJSON"in n)&&!g(n,T)&&!g(n,Promise)&&!g(n,ArrayBuffer)||M||t.iterateIn==="object"?(W={},t.addLength&&(W.length=n.length),B={clone:W}):_=n,x&&x(),E.iterateNone)return W||_;if(!W)return _;if(t.iterateIn){var ce=function(L){var R={ownKeys:Me.call(n,L)};te(t,R,function(){var D=j+(j?".":"")+ye(L),G=oe(D,n[L],!!e,t,i,o);g(G,T)?i.push([D,G,!!e,t,W,L,t.type]):G!==void 0&&(W[L]=G)})};for(var fe in n)ce(fe);x&&x({endIterateIn:!0,end:!0})}else De(n).forEach(function(O){var L=j+(j?".":"")+ye(O),R={ownKeys:!0};te(t,R,function(){var D=oe(L,n[O],!!e,t,i,o);g(D,T)?i.push([L,D,!!e,t,W,O,t.type]):D!==void 0&&(W[O]=D)})}),x&&x({endIterateOwn:!0,end:!0});if(t.iterateUnsetNumeric){for(var K=n.length,Pe=function(L){if(!(L in n)){var R=j+(j?".":"")+L,D={ownKeys:!1};te(t,D,function(){var G=oe(R,void 0,!!e,t,i,o);g(G,T)?i.push([R,G,!!e,t,W,L,t.type]):G!==void 0&&(W[L]=G)})}},C=0;C<K;C++)Pe(C);x&&x({endIterateUnsetNumeric:!0,end:!0})}return W}function Se(j,n,e,t,i,o,S){for(var _=i?q.plainObjectReplacers:q.nonplainObjectReplacers,B=_.length;B--;){var I=_[B];if(I.test(n,e)){var x=I.type;if(q.revivers[x]){var J=k[j];k[j]=J?[x].concat(J):x}if(Object.assign(e,{type:x,replaced:!0}),(Z||!I.replaceAsync)&&!I.replace)return S&&S({typeDetected:!0}),oe(j,n,ze&&"readonly",e,t,o,x);S&&S({replacing:!0});var M=Z||!I.replaceAsync?"replace":"replaceAsync";return oe(j,I[M](n,e),ze&&"readonly",e,t,o,x)}}return n}return Ke.length?Z&&E.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(we(Ve,Ke)).then(We):!Z&&E.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():E.stringification&&Z?[We(Ve)]:Z?We(Ve):Promise.resolve(We(Ve))}},{key:"encapsulateSync",value:function(m,w,E){return this.encapsulate(m,w,P({throwOnBadSyncType:!0},E,{sync:!0}))}},{key:"encapsulateAsync",value:function(m,w,E){return this.encapsulate(m,w,P({throwOnBadSyncType:!0},E,{sync:!1}))}},{key:"revive",value:function(m,w){var E=m&&m.$types;if(!E)return m;if(E===!0)return m.$;w=P({sync:!0},this.options,{},w);var H=w,Z=H.sync,q=[],k={},Ne=!0;E.$&&y(E.$)&&(m=m.$,E=E.$,Ne=!1);var Ue=this;function Ke(ae,te){var oe=Ue.revivers[ae]||[],Se=V(oe,1),j=Se[0];if(!j)throw new Error("Unregistered type: "+ae);return Z&&!("revive"in j)?te:j[Z&&j.revive?"revive":!Z&&j.reviveAsync?"reviveAsync":"revive"](te,k)}function ze(){var ae=[];if(Object.entries(E).forEach(function(te){var oe=V(te,2),Se=oe[0],j=oe[1];j!=="#"&&[].concat(j).forEach(function(n){var e=Ue.revivers[n]||[null,{}],t=V(e,2),i=t[1].plain;i&&(ae.push({keypath:Se,type:n}),delete E[Se])})}),!!ae.length)return ae.sort(U).reduce(function te(oe,Se){var j=Se.keypath,n=Se.type;if(c(oe))return oe.then(function(i){return te(i,{keypath:j,type:n})});var e=ge(m,j);if(e=Ke(n,e),g(e,T))return e.then(function(i){var o=ne(m,j,i);o===i&&(m=o)});var t=ne(m,j,e);t===e&&(m=t)},void 0)}var He=[];function tt(ae,te,oe,Se,j){if(!(Ne&&ae==="$types")){var n=E[ae],e=Re(te);if(e||y(te)){var t=e?new Array(te.length):{};for(De(te).forEach(function(J){var M=tt(ae+(ae?".":"")+ye(J),te[J],oe||t,t,J),re=function(W){return g(W,Ee)?t[J]=void 0:W!==void 0&&(t[J]=W),W};g(M,T)?He.push(M.then(function(Q){return re(Q)})):re(M)}),te=t;q.length;){var i=V(q[0],4),o=i[0],S=i[1],_=i[2],B=i[3],I=ge(o,S);if(I!==void 0)_[B]=I;else break;q.splice(0,1)}}if(!n)return te;if(n==="#"){var x=ge(oe,te.slice(1));return x===void 0&&q.push([oe,te.slice(1),Se,j]),x}return[].concat(n).reduce(function J(M,re){return g(M,T)?M.then(function(Q){return J(Q,re)}):Ke(re,M)},te)}}function Ve(ae){return g(ae,Ee)?void 0:ae}var We=ze(),we;return g(We,T)?we=We.then(function(){return m}):(we=tt("",m,null),He.length&&(we=T.resolve(we).then(function(ae){return T.all([ae].concat(He))}).then(function(ae){var te=V(ae,1),oe=te[0];return oe}))),c(we)?Z&&w.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():g(we,T)?we.p.then(Ve):we:!Z&&w.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():Z?Ve(we):Promise.resolve(Ve(we))}},{key:"reviveSync",value:function(m,w){return this.revive(m,P({throwOnBadSyncType:!0},w,{sync:!0}))}},{key:"reviveAsync",value:function(m,w){return this.revive(m,P({throwOnBadSyncType:!0},w,{sync:!1}))}},{key:"register",value:function(m,w){return w=w||{},[].concat(m).forEach(function E(H){var Z=this;if(Re(H))return H.map(function(q){return E.call(Z,q)});H&&De(H).forEach(function(q){if(q==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(p.JSON_TYPES.includes(q))throw new TypeError("Plain JSON object types are reserved as type names");var k=H[q],Ne=k&&k.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,Ue=Ne.filter(function(oe){return oe.type===q});if(Ue.length&&(Ne.splice(Ne.indexOf(Ue[0]),1),delete this.revivers[q],delete this.types[q]),typeof k=="function"){var Ke=k;k={test:function(Se){return Se&&Se.constructor===Ke},replace:function(Se){return P({},Se)},revive:function(Se){return Object.assign(Object.create(Ke.prototype),Se)}}}else if(Re(k)){var ze=k,He=V(ze,3),tt=He[0],Ve=He[1],We=He[2];k={test:tt,replace:Ve,revive:We}}if(!(!k||!k.test)){var we={type:q,test:k.test.bind(k)};k.replace&&(we.replace=k.replace.bind(k)),k.replaceAsync&&(we.replaceAsync=k.replaceAsync.bind(k));var ae=typeof w.fallback=="number"?w.fallback:w.fallback?0:1/0;if(k.testPlainObjects?this.plainObjectReplacers.splice(ae,0,we):this.nonplainObjectReplacers.splice(ae,0,we),k.revive||k.reviveAsync){var te={};k.revive&&(te.revive=k.revive.bind(k)),k.reviveAsync&&(te.reviveAsync=k.reviveAsync.bind(k)),this.revivers[q]=[te,{plain:k.testPlainObjects}]}this.types[q]=k}},this)},this),this}}]),p}(),Ee=function p(){l(this,p)};return Ee.__typeson__type__="TypesonUndefined",ie.Undefined=Ee,ie.Promise=T,ie.isThenable=c,ie.toStringTag=r,ie.hasConstructorOf=g,ie.isObject=z,ie.isPlainObject=y,ie.isUserObject=ee,ie.escapeKeyPathComponent=ye,ie.unescapeKeyPathComponent=ve,ie.getByKeyPath=ge,ie.getJSONType=Fe,ie.JSON_TYPES=["null","boolean","number","string","array","object"],ie})}),on=Et(function(h,f){(function(u,d){h.exports=d()})(_t,function(){function u(n){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function d(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function v(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function l(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function a(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,i)}return t}function A(n){return function(t){if(Array.isArray(t))return N(t)}(n)||function(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}(n)||function(t,i){if(t){if(typeof t=="string")return N(t,i);var o=Object.prototype.toString.call(t).slice(8,-1);if(o==="Object"&&t.constructor&&(o=t.constructor.name),o==="Map"||o==="Set")return Array.from(t);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return N(t,i)}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function s(n){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function P(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function V(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Te(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function pe(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,i)}return t}function F(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?pe(Object(t),!0).forEach(function(i){Te(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):pe(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Y(n,e){return function(i){if(Array.isArray(i))return i}(n)||function(i,o){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(i)))){var S=[],_=!0,B=!1,I=void 0;try{for(var x,J=i[Symbol.iterator]();!(_=(x=J.next()).done)&&(S.push(x.value),!o||S.length!==o);_=!0);}catch(M){B=!0,I=M}finally{try{_||J.return==null||J.return()}finally{if(B)throw I}}return S}}(n,e)||xe(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(n){return function(t){if(Array.isArray(t))return me(t)}(n)||function(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}(n)||xe(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(n,e){if(n){if(typeof n=="string")return me(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?me(n,e):void 0}}function me(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}var T=function n(e){P(this,n),this.p=new Promise(e)};T.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(T.prototype[Symbol.toStringTag]="TypesonPromise"),T.prototype.then=function(n,e){var t=this;return new T(function(i,o){t.p.then(function(S){i(n?n(S):S)}).catch(function(S){return e?e(S):Promise.reject(S)}).then(i,o)})},T.prototype.catch=function(n){return this.then(null,n)},T.resolve=function(n){return new T(function(e){e(n)})},T.reject=function(n){return new T(function(e,t){t(n)})},["all","race"].forEach(function(n){T[n]=function(e){return new T(function(t,i){Promise[n](e.map(function(o){return o&&o.constructor&&o.constructor.__typeson__type__==="TypesonPromise"?o.p:o})).then(t,i)})}});var ue={}.toString,$={}.hasOwnProperty,_e=Object.getPrototypeOf,Ae=$.toString;function Ie(n,e){return y(n)&&typeof n.then=="function"&&(!e||typeof n.catch=="function")}function c(n){return ue.call(n).slice(8,-1)}function r(n,e){if(!n||s(n)!=="object")return!1;var t=_e(n);if(!t)return e===null;var i=$.call(t,"constructor")&&t.constructor;return typeof i!="function"?e===null:e===i||e!==null&&Ae.call(i)===Ae.call(e)||typeof e=="function"&&typeof i.__typeson__type__=="string"&&i.__typeson__type__===e.__typeson__type__}function g(n){return!(!n||c(n)!=="Object")&&(!_e(n)||r(n,Object))}function y(n){return n&&s(n)==="object"}function ee(n){return n.replace(/~/g,"~0").replace(/\./g,"~1")}function z(n){return n.replace(/~1/g,".").replace(/~0/g,"~")}function ye(n,e){if(e==="")return n;var t=e.indexOf(".");if(t>-1){var i=n[z(e.slice(0,t))];return i===void 0?void 0:ye(i,e.slice(t+1))}return n[z(e)]}function ve(n,e,t){if(e==="")return t;var i=e.indexOf(".");return i>-1?ve(n[z(e.slice(0,i))],e.slice(i+1),t):(n[z(e)]=t,n)}function ge(n,e,t){return t?e?e(n):n:(n&&n.then||(n=Promise.resolve(n)),e?n.then(e):n)}var ne=Object.keys,Fe=Array.isArray,De={}.hasOwnProperty,Re=["type","replaced","iterateIn","iterateUnsetNumeric"];function Me(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(n.apply(this,e))}catch(i){return Promise.reject(i)}}}function rt(n,e){if(n.keypath==="")return-1;var t=n.keypath.match(/\./g)||0,i=e.keypath.match(/\./g)||0;return t&&(t=t.length),i&&(i=i.length),t>i?-1:t<i?1:n.keypath<e.keypath?-1:n.keypath>e.keypath}var U=function(){function n(e){P(this,n),this.options=e,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function(t,i,o){return i&&V(t.prototype,i),o&&V(t,o),t}(n,[{key:"stringify",value:function(t,i,o,S){S=F(F(F({},this.options),S),{},{stringification:!0});var _=this.encapsulate(t,null,S);return Fe(_)?JSON.stringify(_[0],i,o):_.then(function(B){return JSON.stringify(B,i,o)})}},{key:"stringifySync",value:function(t,i,o,S){return this.stringify(t,i,o,F(F({throwOnBadSyncType:!0},S),{},{sync:!0}))}},{key:"stringifyAsync",value:function(t,i,o,S){return this.stringify(t,i,o,F(F({throwOnBadSyncType:!0},S),{},{sync:!1}))}},{key:"parse",value:function(t,i,o){return o=F(F(F({},this.options),o),{},{parse:!0}),this.revive(JSON.parse(t,i),o)}},{key:"parseSync",value:function(t,i,o){return this.parse(t,i,F(F({throwOnBadSyncType:!0},o),{},{sync:!0}))}},{key:"parseAsync",value:function(t,i,o){return this.parse(t,i,F(F({throwOnBadSyncType:!0},o),{},{sync:!1}))}},{key:"specialTypeNames",value:function(t,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return o.returnTypeNames=!0,this.encapsulate(t,i,o)}},{key:"rootTypeName",value:function(t,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return o.iterateNone=!0,this.encapsulate(t,i,o)}},{key:"encapsulate",value:function(t,i,o){var S=Me(function(C,O){return ge(Promise.all(O.map(function(L){return L[1].p})),function(L){return ge(Promise.all(L.map(Me(function(R){var D=!1,G=[],$e=Y(O.splice(0,1),1),Oe=Y($e[0],7),Le=Oe[0],Ge=Oe[2],se=Oe[3],Ye=Oe[4],de=Oe[5],Je=Oe[6],Ce=K(Le,R,Ge,se,G,!0,Je),Xe=r(Ce,T);return function(mt,pt){var ut=mt();return ut&&ut.then?ut.then(pt):pt(ut)}(function(){if(Le&&Xe)return ge(Ce.p,function(Qe){return Ye[de]=Qe,D=!0,S(C,G)})},function(Qe){return D?Qe:(Le?Ye[de]=Ce:C=Xe?Ce.p:Ce,S(C,G))})}))),function(){return C})})}),_=(o=F(F({sync:!0},this.options),o)).sync,B=this,I={},x=[],J=[],M=[],re=!("cyclic"in o)||o.cyclic,Q=o.encapsulateObserver,W=K("",t,re,i||{},M);function ce(C){var O=Object.values(I);if(o.iterateNone)return O.length?O[0]:n.getJSONType(C);if(O.length){if(o.returnTypeNames)return X(new Set(O));C&&g(C)&&!De.call(C,"$types")?C.$types=I:C={$:C,$types:{$:I}}}else y(C)&&De.call(C,"$types")&&(C={$:C,$types:!0});return!o.returnTypeNames&&C}function fe(C,O,L){Object.assign(C,O);var R=Re.map(function(D){var G=C[D];return delete C[D],G});L(),Re.forEach(function(D,G){C[D]=R[G]})}function K(C,O,L,R,D,G,$e){var Oe,Le={},Ge=s(O),se=Q?function(it){var je=$e||R.type||n.getJSONType(O);Q(Object.assign(it||Le,{keypath:C,value:O,cyclic:L,stateObj:R,promisesData:D,resolvingTypesonPromise:G,awaitingTypesonPromise:r(O,T)},{type:je}))}:null;if(["string","boolean","number","undefined"].includes(Ge))return O===void 0||Number.isNaN(O)||O===Number.NEGATIVE_INFINITY||O===Number.POSITIVE_INFINITY?(Oe=R.replaced?O:Pe(C,O,R,D,!1,G,se))!==O&&(Le={replaced:Oe}):Oe=O,se&&se(),Oe;if(O===null)return se&&se(),O;if(L&&!R.iterateIn&&!R.iterateUnsetNumeric&&O&&s(O)==="object"){var Ye=x.indexOf(O);if(!(Ye<0))return I[C]="#",se&&se({cyclicKeypath:J[Ye]}),"#"+J[Ye];L===!0&&(x.push(O),J.push(C))}var de,Je=g(O),Ce=Fe(O),Xe=(Je||Ce)&&(!B.plainObjectReplacers.length||R.replaced)||R.iterateIn?O:Pe(C,O,R,D,Je||Ce,null,se);if(Xe!==O?(Oe=Xe,Le={replaced:Xe}):C===""&&r(O,T)?(D.push([C,O,L,R,void 0,void 0,R.type]),Oe=O):Ce&&R.iterateIn!=="object"||R.iterateIn==="array"?(de=new Array(O.length),Le={clone:de}):(["function","symbol"].includes(s(O))||"toJSON"in O||r(O,T)||r(O,Promise)||r(O,ArrayBuffer))&&!Je&&R.iterateIn!=="object"?Oe=O:(de={},R.addLength&&(de.length=O.length),Le={clone:de}),se&&se(),o.iterateNone)return de||Oe;if(!de)return Oe;if(R.iterateIn){var Qe=function(je){var nt={ownKeys:De.call(O,je)};fe(R,nt,function(){var ot=C+(C?".":"")+ee(je),yt=K(ot,O[je],!!L,R,D,G);r(yt,T)?D.push([ot,yt,!!L,R,de,je,R.type]):yt!==void 0&&(de[je]=yt)})};for(var mt in O)Qe(mt);se&&se({endIterateIn:!0,end:!0})}else ne(O).forEach(function(it){var je=C+(C?".":"")+ee(it);fe(R,{ownKeys:!0},function(){var nt=K(je,O[it],!!L,R,D,G);r(nt,T)?D.push([je,nt,!!L,R,de,it,R.type]):nt!==void 0&&(de[it]=nt)})}),se&&se({endIterateOwn:!0,end:!0});if(R.iterateUnsetNumeric){for(var pt=O.length,ut=function(je){if(!(je in O)){var nt=C+(C?".":"")+je;fe(R,{ownKeys:!1},function(){var ot=K(nt,void 0,!!L,R,D,G);r(ot,T)?D.push([nt,ot,!!L,R,de,je,R.type]):ot!==void 0&&(de[je]=ot)})}},gt=0;gt<pt;gt++)ut(gt);se&&se({endIterateUnsetNumeric:!0,end:!0})}return de}function Pe(C,O,L,R,D,G,$e){for(var Oe=D?B.plainObjectReplacers:B.nonplainObjectReplacers,Le=Oe.length;Le--;){var Ge=Oe[Le];if(Ge.test(O,L)){var se=Ge.type;if(B.revivers[se]){var Ye=I[C];I[C]=Ye?[se].concat(Ye):se}return Object.assign(L,{type:se,replaced:!0}),!_&&Ge.replaceAsync||Ge.replace?($e&&$e({replacing:!0}),K(C,Ge[_||!Ge.replaceAsync?"replace":"replaceAsync"](O,L),re&&"readonly",L,R,G,se)):($e&&$e({typeDetected:!0}),K(C,O,re&&"readonly",L,R,G,se))}}return O}return M.length?_&&o.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(S(W,M)).then(ce):!_&&o.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():o.stringification&&_?[ce(W)]:_?ce(W):Promise.resolve(ce(W))}},{key:"encapsulateSync",value:function(t,i,o){return this.encapsulate(t,i,F(F({throwOnBadSyncType:!0},o),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(t,i,o){return this.encapsulate(t,i,F(F({throwOnBadSyncType:!0},o),{},{sync:!1}))}},{key:"revive",value:function(t,i){var o=t&&t.$types;if(!o)return t;if(o===!0)return t.$;var S=(i=F(F({sync:!0},this.options),i)).sync,_=[],B={},I=!0;o.$&&g(o.$)&&(t=t.$,o=o.$,I=!1);var x=this;function J(ce,fe){var K=Y(x.revivers[ce]||[],1)[0];if(!K)throw new Error("Unregistered type: "+ce);return S&&!("revive"in K)?fe:K[S&&K.revive?"revive":!S&&K.reviveAsync?"reviveAsync":"revive"](fe,B)}var M=[];function re(ce){return r(ce,ie)?void 0:ce}var Q,W=function(){var fe=[];if(Object.entries(o).forEach(function(K){var Pe=Y(K,2),C=Pe[0],O=Pe[1];O!=="#"&&[].concat(O).forEach(function(L){Y(x.revivers[L]||[null,{}],2)[1].plain&&(fe.push({keypath:C,type:L}),delete o[C])})}),fe.length)return fe.sort(rt).reduce(function K(Pe,C){var O=C.keypath,L=C.type;if(Ie(Pe))return Pe.then(function(G){return K(G,{keypath:O,type:L})});var R=ye(t,O);if(r(R=J(L,R),T))return R.then(function(G){var $e=ve(t,O,G);$e===G&&(t=$e)});var D=ve(t,O,R);D===R&&(t=D)},void 0)}();return r(W,T)?Q=W.then(function(){return t}):(Q=function ce(fe,K,Pe,C,O){if(!I||fe!=="$types"){var L=o[fe],R=Fe(K);if(R||g(K)){var D=R?new Array(K.length):{};for(ne(K).forEach(function(de){var Je=ce(fe+(fe?".":"")+ee(de),K[de],Pe||D,D,de),Ce=function(Qe){return r(Qe,ie)?D[de]=void 0:Qe!==void 0&&(D[de]=Qe),Qe};r(Je,T)?M.push(Je.then(function(Xe){return Ce(Xe)})):Ce(Je)}),K=D;_.length;){var G=Y(_[0],4),$e=G[0],Oe=G[1],Le=G[2],Ge=G[3],se=ye($e,Oe);if(se===void 0)break;Le[Ge]=se,_.splice(0,1)}}if(!L)return K;if(L==="#"){var Ye=ye(Pe,K.slice(1));return Ye===void 0&&_.push([Pe,K.slice(1),C,O]),Ye}return[].concat(L).reduce(function de(Je,Ce){return r(Je,T)?Je.then(function(Xe){return de(Xe,Ce)}):J(Ce,Je)},K)}}("",t,null),M.length&&(Q=T.resolve(Q).then(function(ce){return T.all([ce].concat(M))}).then(function(ce){return Y(ce,1)[0]}))),Ie(Q)?S&&i.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():r(Q,T)?Q.p.then(re):Q:!S&&i.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():S?re(Q):Promise.resolve(re(Q))}},{key:"reviveSync",value:function(t,i){return this.revive(t,F(F({throwOnBadSyncType:!0},i),{},{sync:!0}))}},{key:"reviveAsync",value:function(t,i){return this.revive(t,F(F({throwOnBadSyncType:!0},i),{},{sync:!1}))}},{key:"register",value:function(t,i){return i=i||{},[].concat(t).forEach(function o(S){var _=this;if(Fe(S))return S.map(function(B){return o.call(_,B)});S&&ne(S).forEach(function(B){if(B==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(n.JSON_TYPES.includes(B))throw new TypeError("Plain JSON object types are reserved as type names");var I=S[B],x=I&&I.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,J=x.filter(function(fe){return fe.type===B});if(J.length&&(x.splice(x.indexOf(J[0]),1),delete this.revivers[B],delete this.types[B]),typeof I=="function"){var M=I;I={test:function(K){return K&&K.constructor===M},replace:function(K){return F({},K)},revive:function(K){return Object.assign(Object.create(M.prototype),K)}}}else if(Fe(I)){var re=Y(I,3);I={test:re[0],replace:re[1],revive:re[2]}}if(I&&I.test){var Q={type:B,test:I.test.bind(I)};I.replace&&(Q.replace=I.replace.bind(I)),I.replaceAsync&&(Q.replaceAsync=I.replaceAsync.bind(I));var W=typeof i.fallback=="number"?i.fallback:i.fallback?0:Number.POSITIVE_INFINITY;if(I.testPlainObjects?this.plainObjectReplacers.splice(W,0,Q):this.nonplainObjectReplacers.splice(W,0,Q),I.revive||I.reviveAsync){var ce={};I.revive&&(ce.revive=I.revive.bind(I)),I.reviveAsync&&(ce.reviveAsync=I.reviveAsync.bind(I)),this.revivers[B]=[ce,{plain:I.testPlainObjects}]}this.types[B]=I}},this)},this),this}}]),n}(),ie=function n(){P(this,n)};ie.__typeson__type__="TypesonUndefined",U.Undefined=ie,U.Promise=T,U.isThenable=Ie,U.toStringTag=c,U.hasConstructorOf=r,U.isObject=y,U.isPlainObject=g,U.isUserObject=function n(e){if(!e||c(e)!=="Object")return!1;var t=_e(e);return!t||r(e,Object)||n(t)},U.escapeKeyPathComponent=ee,U.unescapeKeyPathComponent=z,U.getByKeyPath=ye,U.getJSONType=function(e){return e===null?"null":Array.isArray(e)?"array":s(e)},U.JSON_TYPES=["null","boolean","number","string","array","object"];for(var Ee={userObject:{test:function(e,t){return U.isUserObject(e)},replace:function(e){return function(i){for(var o=1;o<arguments.length;o++){var S=arguments[o]!=null?arguments[o]:{};o%2?a(Object(S),!0).forEach(function(_){l(i,_,S[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(S)):a(Object(S)).forEach(function(_){Object.defineProperty(i,_,Object.getOwnPropertyDescriptor(S,_))})}return i}({},e)},revive:function(e){return e}}},p=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(e,t){return!!Array.isArray(e)&&(Object.keys(e).some(function(i){return String(Number.parseInt(i))!==i})&&(t.iterateIn="object",t.addLength=!0),!0)},replace:function(e,t){return t.iterateUnsetNumeric=!0,e},revive:function(e){if(Array.isArray(e))return e;var t=[];return Object.keys(e).forEach(function(i){var o=e[i];t[i]=o}),t}}},{sparseUndefined:{test:function(e,t){return e===void 0&&t.ownKeys===!1},replace:function(e){return 0},revive:function(e){}}}],b={undef:{test:function(e,t){return e===void 0&&(t.ownKeys||!("ownKeys"in t))},replace:function(e){return 0},revive:function(e){return new U.Undefined}}},m={StringObject:{test:function(e){return U.toStringTag(e)==="String"&&u(e)==="object"},replace:function(e){return String(e)},revive:function(e){return new String(e)}},BooleanObject:{test:function(e){return U.toStringTag(e)==="Boolean"&&u(e)==="object"},replace:function(e){return!!e},revive:function(e){return new Boolean(e)}},NumberObject:{test:function(e){return U.toStringTag(e)==="Number"&&u(e)==="object"},replace:function(e){return Number(e)},revive:function(e){return new Number(e)}}},w=[{nan:{test:function(e){return Number.isNaN(e)},replace:function(e){return"NaN"},revive:function(e){return Number.NaN}}},{infinity:{test:function(e){return e===Number.POSITIVE_INFINITY},replace:function(e){return"Infinity"},revive:function(e){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(e){return e===Number.NEGATIVE_INFINITY},replace:function(e){return"-Infinity"},revive:function(e){return Number.NEGATIVE_INFINITY}}}],E={date:{test:function(e){return U.toStringTag(e)==="Date"},replace:function(e){var t=e.getTime();return Number.isNaN(t)?"NaN":t},revive:function(e){return e==="NaN"?new Date(Number.NaN):new Date(e)}}},H={regexp:{test:function(e){return U.toStringTag(e)==="RegExp"},replace:function(e){return{source:e.source,flags:(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":"")}},revive:function(e){var t=e.source,i=e.flags;return new RegExp(t,i)}}},Z={map:{test:function(e){return U.toStringTag(e)==="Map"},replace:function(e){return A(e.entries())},revive:function(e){return new Map(e)}}},q={set:{test:function(e){return U.toStringTag(e)==="Set"},replace:function(e){return A(e.values())},revive:function(e){return new Set(e)}}},k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ne=new Uint8Array(256),Ue=0;Ue<k.length;Ue++)Ne[k.charCodeAt(Ue)]=Ue;var Ke=function(e,t,i){i==null&&(i=e.byteLength);for(var o=new Uint8Array(e,t||0,i),S=o.length,_="",B=0;B<S;B+=3)_+=k[o[B]>>2],_+=k[(3&o[B])<<4|o[B+1]>>4],_+=k[(15&o[B+1])<<2|o[B+2]>>6],_+=k[63&o[B+2]];return S%3==2?_=_.slice(0,-1)+"=":S%3==1&&(_=_.slice(0,-2)+"=="),_},ze=function(e){var t,i,o,S,_=e.length,B=.75*e.length,I=0;e[e.length-1]==="="&&(B--,e[e.length-2]==="="&&B--);for(var x=new ArrayBuffer(B),J=new Uint8Array(x),M=0;M<_;M+=4)t=Ne[e.charCodeAt(M)],i=Ne[e.charCodeAt(M+1)],o=Ne[e.charCodeAt(M+2)],S=Ne[e.charCodeAt(M+3)],J[I++]=t<<2|i>>4,J[I++]=(15&i)<<4|o>>2,J[I++]=(3&o)<<6|63&S;return x},He={arraybuffer:{test:function(e){return U.toStringTag(e)==="ArrayBuffer"},replace:function(e,t){t.buffers||(t.buffers=[]);var i=t.buffers.indexOf(e);return i>-1?{index:i}:(t.buffers.push(e),Ke(e))},revive:function(e,t){if(t.buffers||(t.buffers=[]),u(e)==="object")return t.buffers[e.index];var i=ze(e);return t.buffers.push(i),i}}},tt=typeof self>"u"?_t:self,Ve={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(n){var e=n,t=tt[e];t&&(Ve[n.toLowerCase()]={test:function(o){return U.toStringTag(o)===e},replace:function(o,S){var _=o.buffer,B=o.byteOffset,I=o.length;S.buffers||(S.buffers=[]);var x=S.buffers.indexOf(_);return x>-1?{index:x,byteOffset:B,length:I}:(S.buffers.push(_),{encoded:Ke(_),byteOffset:B,length:I})},revive:function(o,S){S.buffers||(S.buffers=[]);var _,B=o.byteOffset,I=o.length,x=o.encoded,J=o.index;return"index"in o?_=S.buffers[J]:(_=ze(x),S.buffers.push(_)),new t(_,B,I)}})});var We={dataview:{test:function(e){return U.toStringTag(e)==="DataView"},replace:function(e,t){var i=e.buffer,o=e.byteOffset,S=e.byteLength;t.buffers||(t.buffers=[]);var _=t.buffers.indexOf(i);return _>-1?{index:_,byteOffset:o,byteLength:S}:(t.buffers.push(i),{encoded:Ke(i),byteOffset:o,byteLength:S})},revive:function(e,t){t.buffers||(t.buffers=[]);var i,o=e.byteOffset,S=e.byteLength,_=e.encoded,B=e.index;return"index"in e?i=t.buffers[B]:(i=ze(_),t.buffers.push(i)),new DataView(i,o,S)}}},we={IntlCollator:{test:function(e){return U.hasConstructorOf(e,Intl.Collator)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.Collator(e.locale,e)}},IntlDateTimeFormat:{test:function(e){return U.hasConstructorOf(e,Intl.DateTimeFormat)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.DateTimeFormat(e.locale,e)}},IntlNumberFormat:{test:function(e){return U.hasConstructorOf(e,Intl.NumberFormat)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.NumberFormat(e.locale,e)}}};function ae(n){for(var e=new Uint8Array(n.length),t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e.buffer}var te={file:{test:function(e){return U.toStringTag(e)==="File"},replace:function(e){var t=new XMLHttpRequest;if(t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("GET",URL.createObjectURL(e),!1),t.send(),t.status!==200&&t.status!==0)throw new Error("Bad File access: "+t.status);return{type:e.type,stringContents:t.responseText,name:e.name,lastModified:e.lastModified}},revive:function(e){var t=e.name,i=e.type,o=e.stringContents,S=e.lastModified;return new File([ae(o)],t,{type:i,lastModified:S})},replaceAsync:function(e){return new U.Promise(function(t,i){var o=new FileReader;o.addEventListener("load",function(){t({type:e.type,stringContents:o.result,name:e.name,lastModified:e.lastModified})}),o.addEventListener("error",function(){i(o.error)}),o.readAsBinaryString(e)})}}},oe={bigint:{test:function(e){return typeof e=="bigint"},replace:function(e){return String(e)},revive:function(e){return BigInt(e)}}},Se={bigintObject:{test:function(e){return u(e)==="object"&&U.hasConstructorOf(e,BigInt)},replace:function(e){return String(e)},revive:function(e){return new Object(BigInt(e))}}},j={cryptokey:{test:function(e){return U.toStringTag(e)==="CryptoKey"&&e.extractable},replaceAsync:function(e){return new U.Promise(function(t,i){crypto.subtle.exportKey("jwk",e).catch(function(o){i(o)}).then(function(o){t({jwk:o,algorithm:e.algorithm,usages:e.usages})})})},revive:function(e){var t=e.jwk,i=e.algorithm,o=e.usages;return crypto.subtle.importKey("jwk",t,i,!0,o)}}};return[Ee,b,p,m,w,E,H,{imagedata:{test:function(e){return U.toStringTag(e)==="ImageData"},replace:function(e){return{array:A(e.data),width:e.width,height:e.height}},revive:function(e){return new ImageData(new Uint8ClampedArray(e.array),e.width,e.height)}}},{imagebitmap:{test:function(e){return U.toStringTag(e)==="ImageBitmap"||e&&e.dataset&&e.dataset.toStringTag==="ImageBitmap"},replace:function(e){var t=document.createElement("canvas");return t.getContext("2d").drawImage(e,0,0),t.toDataURL()},revive:function(e){var t=document.createElement("canvas"),i=t.getContext("2d"),o=document.createElement("img");return o.addEventListener("load",function(){i.drawImage(o,0,0)}),o.src=e,t},reviveAsync:function(e){var t=document.createElement("canvas"),i=t.getContext("2d"),o=document.createElement("img");return o.addEventListener("load",function(){i.drawImage(o,0,0)}),o.src=e,createImageBitmap(t)}}},te,{file:te.file,filelist:{test:function(e){return U.toStringTag(e)==="FileList"},replace:function(e){for(var t=[],i=0;i<e.length;i++)t[i]=e.item(i);return t},revive:function(e){return new(function(){function t(){d(this,t),this._files=arguments[0],this.length=this._files.length}return function(o,S,_){return S&&v(o.prototype,S),_&&v(o,_),o}(t,[{key:"item",value:function(o){return this._files[o]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}]),t}())(e)}}},{blob:{test:function(e){return U.toStringTag(e)==="Blob"},replace:function(e){var t=new XMLHttpRequest;if(t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("GET",URL.createObjectURL(e),!1),t.send(),t.status!==200&&t.status!==0)throw new Error("Bad Blob access: "+t.status);return{type:e.type,stringContents:t.responseText}},revive:function(e){var t=e.type,i=e.stringContents;return new Blob([ae(i)],{type:t})},replaceAsync:function(e){return new U.Promise(function(t,i){var o=new FileReader;o.addEventListener("load",function(){t({type:e.type,stringContents:o.result})}),o.addEventListener("error",function(){i(o.error)}),o.readAsBinaryString(e)})}}}].concat(typeof Map=="function"?Z:[],typeof Set=="function"?q:[],typeof ArrayBuffer=="function"?He:[],typeof Uint8Array=="function"?Ve:[],typeof DataView=="function"?We:[],typeof Intl<"u"?we:[],typeof crypto<"u"?j:[],typeof BigInt<"u"?[oe,Se]:[])})}),ft="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lt=new Uint8Array(256);for(var vt=0;vt<ft.length;vt++)lt[ft.codePointAt(vt)]=vt;var Tt=function(f,u,d){d==null&&(d=f.byteLength);for(var v=new Uint8Array(f,u||0,d),l=v.length,a="",A=0;A<l;A+=3)a+=ft[v[A]>>2],a+=ft[(v[A]&3)<<4|v[A+1]>>4],a+=ft[(v[A+1]&15)<<2|v[A+2]>>6],a+=ft[v[A+2]&63];return l%3===2?a=a.slice(0,-1)+"=":l%3===1&&(a=a.slice(0,-2)+"=="),a},Vt=function(f){var u=f.length,d=f.length*.75,v=0,l,a,A,N;f[f.length-1]==="="&&(d--,f[f.length-2]==="="&&d--);for(var s=new ArrayBuffer(d),P=new Uint8Array(s),V=0;V<u;V+=4)l=lt[f.codePointAt(V)],a=lt[f.codePointAt(V+1)],A=lt[f.codePointAt(V+2)],N=lt[f.codePointAt(V+3)],P[v++]=l<<2|a>>4,P[v++]=(a&15)<<4|A>>2,P[v++]=(A&3)<<6|N&63;return s},sn=typeof self>"u"?global:self,$t={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(h){var f=h,u=sn[f];u&&($t[h.toLowerCase()+"2"]={test:function(d){return bt.toStringTag(d)===f},replace:function(d){var v=d.buffer,l=d.byteOffset,a=d.length;return{buffer:v,byteOffset:l,length:a}},revive:function(d){var v=d.buffer,l=d.byteOffset,a=d.length;return new u(v,l,a)}})});var un={arraybuffer:{test:function(h){return bt.toStringTag(h)==="ArrayBuffer"},replace:function(h){return Tt(h,0,h.byteLength)},revive:function(h){var f=Vt(h);return f}}},qe=new bt().register(on),cn="FileReaderSync"in self,ht=[],At=0;qe.register([un,$t,{blob2:{test:function(h){return bt.toStringTag(h)==="Blob"},replace:function(h){if(h.isClosed)throw new Error("The Blob is closed");if(cn){var f=Kt(h,"binary"),u=Tt(f,0,f.byteLength);return{type:h.type,data:u}}else{ht.push(h);var d={type:h.type,data:{start:At,end:At+h.size}};return At+=h.size,d}},finalize:function(h,f){h.data=Tt(f,0,f.byteLength)},revive:function(h){var f=h.type,u=h.data;return new Blob([Vt(u)],{type:f})}}}]);qe.mustFinalize=function(){return ht.length>0};qe.finalize=function(h){return at(void 0,void 0,void 0,function(){var f,u,d,v,l,a,A,N,s,P;return Ze(this,function(V){switch(V.label){case 0:return[4,Dt(new Blob(ht),"binary")];case 1:if(f=V.sent(),h){for(u=0,d=h;u<d.length;u++)if(v=d[u],v.$types){l=v.$types,a=l.$,a&&(l=l.$);for(A in l)N=l[A],s=qe.types[N],s&&s.finalize&&(P=ke.getByKeyPath(v,a?"$."+A:A),s.finalize(P,f.slice(P.start,P.end)))}}return ht=[],[2]}})})};var fn=2e3;function Jt(h,f){return at(this,void 0,void 0,function(){function u(){return at(this,void 0,void 0,function(){var s,P,V,Te,pe,F,Y,X,xe;return Ze(this,function(me){switch(me.label){case 0:return[4,Promise.all(h.tables.map(function(T){return T.count()}))];case 1:s=me.sent(),s.forEach(function(T,ue){return v[ue].rowCount=T}),N.totalRows=s.reduce(function(T,ue){return T+ue}),P=JSON.stringify(a,void 0,l?2:void 0),V=P.lastIndexOf("]"),Te=P.substring(0,V),d.push(Te),pe=f.filter,F=function(T){var ue,$,_e,Ae,Ie,c,r,g,y,ee,z,ye;return Ze(this,function(ve){switch(ve.label){case 0:ue=h.table(T),$=ue.schema.primKey,_e=!!$.keyPath,Ae=f.numRowsPerChunk||fn,Ie=_e?{tableName:ue.name,inbound:!0,rows:[]}:{tableName:ue.name,inbound:!1,rows:[]},c=JSON.stringify(Ie,void 0,l?2:void 0),l&&(c=c.split("\n").join("\n    ")),r=c.lastIndexOf("]"),d.push(c.substring(0,r)),g=null,y=0,ee=!0,z=function(){var ge,ne,Fe,De,U,Re,Me,rt,U;return Ze(this,function(ie){switch(ie.label){case 0:return A&&ke.ignoreTransaction(function(){return A(N)}),ge=g==null?ue.limit(Ae):ue.where(":id").above(g).limit(Ae),[4,ge.toArray()];case 1:return ne=ie.sent(),ne.length===0?[2,"break"]:(g!=null&&y>0&&(d.push(","),l&&d.push("\n      ")),ee=ne.length===Ae,_e?(Fe=pe?ne.filter(function(Ee){return pe(T,Ee)}):ne,De=Fe.map(function(Ee){return qe.encapsulate(Ee)}),qe.mustFinalize()?[4,ke.waitFor(qe.finalize(De))]:[3,3]):[3,4]);case 2:ie.sent(),ie.label=3;case 3:return U=JSON.stringify(De,void 0,l?2:void 0),l&&(U=U.split("\n").join("\n      ")),d.push(new Blob([U.substring(1,U.length-1)])),y=Fe.length,g=ne.length>0?ke.getByKeyPath(ne[ne.length-1],$.keyPath):null,[3,8];case 4:return[4,ge.primaryKeys()];case 5:return Re=ie.sent(),Me=Re.map(function(Ee,p){return[Ee,ne[p]]}),pe&&(Me=Me.filter(function(Ee){var p=Ee[0],b=Ee[1];return pe(T,b,p)})),rt=Me.map(function(Ee){return qe.encapsulate(Ee)}),qe.mustFinalize()?[4,ke.waitFor(qe.finalize(rt))]:[3,7];case 6:ie.sent(),ie.label=7;case 7:U=JSON.stringify(rt,void 0,l?2:void 0),l&&(U=U.split("\n").join("\n      ")),d.push(new Blob([U.substring(1,U.length-1)])),y=Me.length,g=Re.length>0?Re[Re.length-1]:null,ie.label=8;case 8:return N.completedRows+=ne.length,[2]}})},ve.label=1;case 1:return ee?[5,z()]:[3,3];case 2:return ye=ve.sent(),ye==="break"?[3,3]:[3,1];case 3:return d.push(c.substr(r)),N.completedTables+=1,N.completedTables<N.totalTables&&d.push(","),[2]}})},Y=0,X=v,me.label=2;case 2:return Y<X.length?(xe=X[Y].name,[5,F(xe)]):[3,5];case 3:me.sent(),me.label=4;case 4:return Y++,[3,2];case 5:return d.push(P.substr(V)),N.done=!0,A&&ke.ignoreTransaction(function(){return A(N)}),[2]}})})}var d,v,l,a,A,N;return Ze(this,function(s){switch(s.label){case 0:f=f||{},d=[],v=h.tables.map(function(P){return{name:P.name,schema:rn(P),rowCount:0}}),l=f.prettyJson,a={formatName:"dexie",formatVersion:1,data:{databaseName:h.name,databaseVersion:h.verno,tables:v,data:[]}},A=f.progressCallback,N={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:h.tables.length},s.label=1;case 1:return s.trys.push([1,,6,7]),f.noTransaction?[4,u()]:[3,3];case 2:return s.sent(),[3,5];case 3:return[4,h.transaction("r",h.tables,u)];case 4:s.sent(),s.label=5;case 5:return[3,7];case 6:return qe.finalize(),[7];case 7:return[2,new Blob(d,{type:"text/json"})]}})})}var ln=1,pn={Stream:function(){}},yn=Et(function(h,f){(function(u){var d=typeof process=="object"&&Ut?Ut:self;u.parser=function(c){return new pe(c)},u.CParser=pe,u.CStream=Y,u.createStream=F,u.MAX_BUFFER_LENGTH=10*1024*1024,u.DEBUG=d.CDEBUG==="debug",u.INFO=d.CDEBUG==="debug"||d.CDEBUG==="info",u.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var v={textNode:void 0,numberNode:""},l=u.EVENTS.filter(function(c){return c!=="error"&&c!=="end"}),a=0,A;u.STATE={BEGIN:a++,VALUE:a++,OPEN_OBJECT:a++,CLOSE_OBJECT:a++,OPEN_ARRAY:a++,CLOSE_ARRAY:a++,TEXT_ESCAPE:a++,STRING:a++,BACKSLASH:a++,END:a++,OPEN_KEY:a++,CLOSE_KEY:a++,TRUE:a++,TRUE2:a++,TRUE3:a++,FALSE:a++,FALSE2:a++,FALSE3:a++,FALSE4:a++,NULL:a++,NULL2:a++,NULL3:a++,NUMBER_DECIMAL_POINT:a++,NUMBER_DIGIT:a++};for(var N in u.STATE)u.STATE[u.STATE[N]]=N;a=u.STATE;const s={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(c){function r(){this.__proto__=c}return r.prototype=c,new r}),Object.getPrototypeOf||(Object.getPrototypeOf=function(c){return c.__proto__}),Object.keys||(Object.keys=function(c){var r=[];for(var g in c)c.hasOwnProperty(g)&&r.push(g);return r});function P(c){var r=Math.max(u.MAX_BUFFER_LENGTH,10),g=0;for(var y in v){var ee=c[y]===void 0?0:c[y].length;if(ee>r)switch(y){case"text":closeText(c);break;default:$(c,"Max buffer length exceeded: "+y)}g=Math.max(g,ee)}c.bufferCheckPosition=u.MAX_BUFFER_LENGTH-g+c.position}function V(c){for(var r in v)c[r]=v[r]}var Te=/[\\"\n]/g;function pe(c){if(!(this instanceof pe))return new pe(c);var r=this;V(r),r.bufferCheckPosition=u.MAX_BUFFER_LENGTH,r.q=r.c=r.p="",r.opt=c||{},r.closed=r.closedRoot=r.sawRoot=!1,r.tag=r.error=null,r.state=a.BEGIN,r.stack=new Array,r.position=r.column=0,r.line=1,r.slashed=!1,r.unicodeI=0,r.unicodeS=null,r.depth=0,X(r,"onready")}pe.prototype={end:function(){_e(this)},write:Ie,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{A=pn.Stream}catch(c){A=function(){}}function F(c){return new Y(c)}function Y(c){if(!(this instanceof Y))return new Y(c);this._parser=new pe(c),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var r=this;A.apply(r),this._parser.onend=function(){r.emit("end")},this._parser.onerror=function(g){r.emit("error",g),r._parser.error=null},l.forEach(function(g){Object.defineProperty(r,"on"+g,{get:function(){return r._parser["on"+g]},set:function(y){if(!y)return r.removeAllListeners(g),r._parser["on"+g]=y,y;r.on(g,y)},enumerable:!0,configurable:!1})})}Y.prototype=Object.create(A.prototype,{constructor:{value:Y}}),Y.prototype.write=function(c){c=new Buffer(c);for(var r=0;r<c.length;r++){var g=c[r];if(this.bytes_remaining>0){for(var y=0;y<this.bytes_remaining;y++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+y]=c[y];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,r=r+y-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&g>=128)if(g>=194&&g<=223&&(this.bytes_in_sequence=2),g>=224&&g<=239&&(this.bytes_in_sequence=3),g>=240&&g<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+r>c.length){for(var ee=0;ee<=c.length-1-r;ee++)this.temp_buffs[this.bytes_in_sequence][ee]=c[r+ee];return this.bytes_remaining=r+this.bytes_in_sequence-c.length,!0}else{this.string=c.slice(r,r+this.bytes_in_sequence).toString(),r=r+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var z=r;z<c.length&&!(c[z]>=128);z++);this.string=c.slice(r,z).toString(),this._parser.write(this.string),this.emit("data",this.string),r=z-1}},Y.prototype.end=function(c){return c&&c.length&&this._parser.write(c.toString()),this._parser.end(),!0},Y.prototype.on=function(c,r){var g=this;return!g._parser["on"+c]&&l.indexOf(c)!==-1&&(g._parser["on"+c]=function(){var y=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);y.splice(0,0,c),g.emit.apply(g,y)}),A.prototype.on.call(g,c,r)},Y.prototype.destroy=function(){V(this._parser),this.emit("close")};function X(c,r,g){u.INFO&&console.log("-- emit",r,g),c[r]&&c[r](g)}function xe(c,r,g){me(c),X(c,r,g)}function me(c,r){c.textNode=ue(c.opt,c.textNode),c.textNode!==void 0&&X(c,r||"onvalue",c.textNode),c.textNode=void 0}function T(c){c.numberNode&&X(c,"onvalue",parseFloat(c.numberNode)),c.numberNode=""}function ue(c,r){return r===void 0||(c.trim&&(r=r.trim()),c.normalize&&(r=r.replace(/\s+/g," "))),r}function $(c,r){return me(c),r+="\nLine: "+c.line+"\nColumn: "+c.column+"\nChar: "+c.c,r=new Error(r),c.error=r,X(c,"onerror",r),c}function _e(c){return(c.state!==a.VALUE||c.depth!==0)&&$(c,"Unexpected end"),me(c),c.c="",c.closed=!0,X(c,"onend"),pe.call(c,c.opt),c}function Ae(c){return c===s.carriageReturn||c===s.lineFeed||c===s.space||c===s.tab}function Ie(c){var r=this;if(this.error)throw this.error;if(r.closed)return $(r,"Cannot write after close. Assign an onready handler.");if(c===null)return _e(r);var g=0,y=c.charCodeAt(0),ee=r.p;for(u.DEBUG&&console.log("write -> ["+c+"]");y&&(ee=y,r.c=y=c.charCodeAt(g++),ee!==y?r.p=ee:ee=r.p,!!y);)switch(u.DEBUG&&console.log(g,y,u.STATE[r.state]),r.position++,y===s.lineFeed?(r.line++,r.column=0):r.column++,r.state){case a.BEGIN:y===s.openBrace?r.state=a.OPEN_OBJECT:y===s.openBracket?r.state=a.OPEN_ARRAY:Ae(y)||$(r,"Non-whitespace before {[.");continue;case a.OPEN_KEY:case a.OPEN_OBJECT:if(Ae(y))continue;if(r.state===a.OPEN_KEY)r.stack.push(a.CLOSE_KEY);else if(y===s.closeBrace){X(r,"onopenobject"),this.depth++,X(r,"oncloseobject"),this.depth--,r.state=r.stack.pop()||a.VALUE;continue}else r.stack.push(a.CLOSE_OBJECT);y===s.doubleQuote?r.state=a.STRING:$(r,'Malformed object key should start with "');continue;case a.CLOSE_KEY:case a.CLOSE_OBJECT:if(Ae(y))continue;r.state,a.CLOSE_KEY,y===s.colon?(r.state===a.CLOSE_OBJECT?(r.stack.push(a.CLOSE_OBJECT),me(r,"onopenobject"),this.depth++):me(r,"onkey"),r.state=a.VALUE):y===s.closeBrace?(xe(r,"oncloseobject"),this.depth--,r.state=r.stack.pop()||a.VALUE):y===s.comma?(r.state===a.CLOSE_OBJECT&&r.stack.push(a.CLOSE_OBJECT),me(r),r.state=a.OPEN_KEY):$(r,"Bad object");continue;case a.OPEN_ARRAY:case a.VALUE:if(Ae(y))continue;if(r.state===a.OPEN_ARRAY)if(X(r,"onopenarray"),this.depth++,r.state=a.VALUE,y===s.closeBracket){X(r,"onclosearray"),this.depth--,r.state=r.stack.pop()||a.VALUE;continue}else r.stack.push(a.CLOSE_ARRAY);y===s.doubleQuote?r.state=a.STRING:y===s.openBrace?r.state=a.OPEN_OBJECT:y===s.openBracket?r.state=a.OPEN_ARRAY:y===s.t?r.state=a.TRUE:y===s.f?r.state=a.FALSE:y===s.n?r.state=a.NULL:y===s.minus?r.numberNode+="-":s._0<=y&&y<=s._9?(r.numberNode+=String.fromCharCode(y),r.state=a.NUMBER_DIGIT):$(r,"Bad value");continue;case a.CLOSE_ARRAY:if(y===s.comma)r.stack.push(a.CLOSE_ARRAY),me(r,"onvalue"),r.state=a.VALUE;else if(y===s.closeBracket)xe(r,"onclosearray"),this.depth--,r.state=r.stack.pop()||a.VALUE;else{if(Ae(y))continue;$(r,"Bad array")}continue;case a.STRING:r.textNode===void 0&&(r.textNode="");var z=g-1,ye=r.slashed,ve=r.unicodeI;e:for(;;){for(u.DEBUG&&console.log(g,y,u.STATE[r.state],ye);ve>0;)if(r.unicodeS+=String.fromCharCode(y),y=c.charCodeAt(g++),r.position++,ve===4?(r.textNode+=String.fromCharCode(parseInt(r.unicodeS,16)),ve=0,z=g-1):ve++,!y)break e;if(y===s.doubleQuote&&!ye){r.state=r.stack.pop()||a.VALUE,r.textNode+=c.substring(z,g-1),r.position+=g-1-z;break}if(y===s.backslash&&!ye&&(ye=!0,r.textNode+=c.substring(z,g-1),r.position+=g-1-z,y=c.charCodeAt(g++),r.position++,!y))break;if(ye){if(ye=!1,y===s.n?r.textNode+="\n":y===s.r?r.textNode+="\r":y===s.t?r.textNode+="	":y===s.f?r.textNode+="\f":y===s.b?r.textNode+="\b":y===s.u?(ve=1,r.unicodeS=""):r.textNode+=String.fromCharCode(y),y=c.charCodeAt(g++),r.position++,z=g-1,y)continue;break}Te.lastIndex=g;var ge=Te.exec(c);if(ge===null){g=c.length+1,r.textNode+=c.substring(z,g-1),r.position+=g-1-z;break}if(g=ge.index+1,y=c.charCodeAt(ge.index),!y){r.textNode+=c.substring(z,g-1),r.position+=g-1-z;break}}r.slashed=ye,r.unicodeI=ve;continue;case a.TRUE:y===s.r?r.state=a.TRUE2:$(r,"Invalid true started with t"+y);continue;case a.TRUE2:y===s.u?r.state=a.TRUE3:$(r,"Invalid true started with tr"+y);continue;case a.TRUE3:y===s.e?(X(r,"onvalue",!0),r.state=r.stack.pop()||a.VALUE):$(r,"Invalid true started with tru"+y);continue;case a.FALSE:y===s.a?r.state=a.FALSE2:$(r,"Invalid false started with f"+y);continue;case a.FALSE2:y===s.l?r.state=a.FALSE3:$(r,"Invalid false started with fa"+y);continue;case a.FALSE3:y===s.s?r.state=a.FALSE4:$(r,"Invalid false started with fal"+y);continue;case a.FALSE4:y===s.e?(X(r,"onvalue",!1),r.state=r.stack.pop()||a.VALUE):$(r,"Invalid false started with fals"+y);continue;case a.NULL:y===s.u?r.state=a.NULL2:$(r,"Invalid null started with n"+y);continue;case a.NULL2:y===s.l?r.state=a.NULL3:$(r,"Invalid null started with nu"+y);continue;case a.NULL3:y===s.l?(X(r,"onvalue",null),r.state=r.stack.pop()||a.VALUE):$(r,"Invalid null started with nul"+y);continue;case a.NUMBER_DECIMAL_POINT:y===s.period?(r.numberNode+=".",r.state=a.NUMBER_DIGIT):$(r,"Leading zero not followed by .");continue;case a.NUMBER_DIGIT:s._0<=y&&y<=s._9?r.numberNode+=String.fromCharCode(y):y===s.period?(r.numberNode.indexOf(".")!==-1&&$(r,"Invalid number has two dots"),r.numberNode+="."):y===s.e||y===s.E?((r.numberNode.indexOf("e")!==-1||r.numberNode.indexOf("E")!==-1)&&$(r,"Invalid number has two exponential"),r.numberNode+="e"):y===s.plus||y===s.minus?(ee===s.e||ee===s.E||$(r,"Invalid symbol in number"),r.numberNode+=String.fromCharCode(y)):(T(r),g--,r.state=r.stack.pop()||a.VALUE);continue;default:$(r,"Unknown state: "+r.state)}return r.position>=r.bufferCheckPosition&&P(r),r}})(f)});function dn(h){var f=0,u=vn(!0),d={pullAsync:function(v){return at(this,void 0,void 0,function(){var l,a,A;return Ze(this,function(N){switch(N.label){case 0:return l=h.slice(f,f+v),f+=v,[4,Dt(l,"text")];case 1:return a=N.sent(),A=u.write(a),d.result=A||{},[2,A]}})})},pullSync:function(v){var l=h.slice(f,f+v);f+=v;var a=Kt(l,"text"),A=u.write(a);return d.result=A||{},A},done:function(){return u.done()},eof:function(){return f>=h.size},result:{}};return d}function vn(h){var f=yn.parser(),u=0,d,v=[],l,a,A=!1,N=!1;return f.onopenobject=function(s){var P={};P.incomplete=!0,d||(d=P),l&&(v.push([a,l,N]),h&&(N?l.push(P):l[a]=P)),l=P,a=s,N=!1,++u},f.onkey=function(s){return a=s},f.onvalue=function(s){return N?l.push(s):l[a]=s},f.oncloseobject=function(){var s;if(delete l.incomplete,a=null,--u===0)A=!0;else{var P=l;s=v.pop(),a=s[0],l=s[1],N=s[2],h||(N?l.push(P):l[a]=P)}},f.onopenarray=function(){var s=[];s.incomplete=!0,d||(d=s),l&&(v.push([a,l,N]),h&&(N?l.push(s):l[a]=s)),l=s,N=!0,a=null,++u},f.onclosearray=function(){var s;if(delete l.incomplete,a=null,--u===0)A=!0;else{var P=l;s=v.pop(),a=s[0],l=s[1],N=s[2],h||(N?l.push(P):l[a]=P)}},{write:function(s){return f.write(s),d},done:function(){return A}}}var Mt=1024;function hn(h,f){return at(this,void 0,void 0,function(){var u,d,v,l;return Ze(this,function(a){switch(a.label){case 0:return f=f||{},u=f.chunkSizeBytes||Mt*1024,[4,Gt(h,u)];case 1:return d=a.sent(),v=d.result.data,l=new ke(v.databaseName),l.version(v.databaseVersion).stores(an(v)),[4,Nt(l,d,f)];case 2:return a.sent(),[2,l]}})})}function Nt(h,f,u){return at(this,void 0,void 0,function(){function d(){return at(this,void 0,void 0,function(){var F,Y,X,xe,me;return Ze(this,function(T){switch(T.label){case 0:F=function(ue){var $,_e,Ae,Ie,c,r,g,y,ee,z,ye,ve;return Ze(this,function(ge){switch(ge.label){case 0:if(!ue.rows)return[2,"break"];if(!ue.rows.incomplete&&ue.rows.length===0)return[2,"continue"];if(s&&ke.ignoreTransaction(function(){return s(P)}),$=ue.tableName,_e=h.table($),Ae=N.tables.filter(function(ne){return ne.name===$})[0].schema,!_e){if(u.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(ue.tableName," is missing in installed database"))}if(!u.acceptChangedPrimaryKey&&Ae.split(",")[0]!=_e.schema.primKey.src)throw new Error("Primary key differs for table ".concat(ue.tableName,". "));for(Ie=ue.rows,c=[],r=0;r<Ie.length&&(g=Ie[r],!g.incomplete);r++)c.push(qe.revive(g));return y=u.filter,ee=y?ue.inbound?c.filter(function(ne){return y($,ne)}):c.filter(function(ne){var Fe=ne[0],De=ne[1];return y($,De,Fe)}):c,z=ue.inbound?[void 0,ee]:[ee.map(function(ne){return ne[0]}),c.map(function(ne){return ne[1]})],ye=z[0],ve=z[1],u.overwriteValues?[4,_e.bulkPut(ve,ye)]:[3,2];case 1:return ge.sent(),[3,4];case 2:return[4,_e.bulkAdd(ve,ye)];case 3:ge.sent(),ge.label=4;case 4:return P.completedRows+=c.length,c.incomplete||(P.completedTables+=1),Ie.splice(0,c.length),[2]}})},Y=0,X=N.data,T.label=1;case 1:return Y<X.length?(xe=X[Y],[5,F(xe)]):[3,4];case 2:if(me=T.sent(),me==="break")return[3,4];T.label=3;case 3:return Y++,[3,1];case 4:for(;N.data.length>0&&N.data[0].rows&&!N.data[0].rows.incomplete;)N.data.splice(0,1);return!l.done()&&!l.eof()?A?(l.pullSync(v),[3,7]):[3,5]:[3,8];case 5:return[4,ke.waitFor(l.pullAsync(v))];case 6:T.sent(),T.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var v,l,a,A,N,s,P,V,Te,pe;return Ze(this,function(F){switch(F.label){case 0:return u=u||{},v=u.chunkSizeBytes||Mt*1024,[4,Gt(f,v)];case 1:if(l=F.sent(),a=l.result,A="FileReaderSync"in self,N=a.data,!u.acceptNameDiff&&h.name!==N.databaseName)throw new Error("Name differs. Current database name is ".concat(h.name," but export is ").concat(N.databaseName));if(!u.acceptVersionDiff&&h.verno!==N.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(h.verno," but export is ").concat(N.databaseVersion));if(s=u.progressCallback,P={done:!1,completedRows:0,completedTables:0,totalRows:N.tables.reduce(function(Y,X){return Y+X.rowCount},0),totalTables:N.tables.length},s&&ke.ignoreTransaction(function(){return s(P)}),!u.clearTablesBeforeImport)return[3,5];V=0,Te=h.tables,F.label=2;case 2:return V<Te.length?(pe=Te[V],[4,pe.clear()]):[3,5];case 3:F.sent(),F.label=4;case 4:return V++,[3,2];case 5:return u.noTransaction?[4,d()]:[3,7];case 6:return F.sent(),[3,9];case 7:return[4,h.transaction("rw",h.tables,d)];case 8:F.sent(),F.label=9;case 9:return P.done=!0,s&&ke.ignoreTransaction(function(){return s(P)}),[2]}})})}function Gt(h,f){return at(this,void 0,void 0,function(){var u,d;return Ze(this,function(v){switch(v.label){case 0:u="slice"in h?dn(h):h,v.label=1;case 1:return u.eof()?[3,3]:[4,u.pullAsync(f)];case 2:return v.sent(),u.result.data&&u.result.data.data?[3,3]:[3,1];case 3:if(d=u.result,!d||d.formatName!="dexie")throw new Error("Given file is not a dexie export");if(d.formatVersion>ln)throw new Error("Format version ".concat(d.formatVersion," not supported"));if(!d.data)throw new Error("No data in export file");if(!d.data.databaseName)throw new Error("Missing databaseName in export file");if(!d.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!d.data.tables)throw new Error("Missing tables in export file");return[2,u]}})})}ke.prototype.export=function(h){return Jt(this,h)};ke.prototype.import=function(h,f){return Nt(this,h,f)};ke.import=function(h,f){return hn(h,f)};const bn=xt("App",{web:()=>Yt(()=>import("./web-zdk9kCdN.js"),__vite__mapDeps([0,1])).then(h=>new h.AppWeb)});class mn extends Xt{constructor(){super(...arguments),this.ERROR_PICK_FILE_CANCELED="pickFiles canceled."}async convertHeicToJpeg(f){throw this.unimplemented("Not implemented on web.")}async pickFiles(f){const u=await this.openFilePicker(f);if(!u)throw new Error(this.ERROR_PICK_FILE_CANCELED);const d={files:[]};for(const v of u){const l={blob:v,modifiedAt:v.lastModified,mimeType:this.getMimeTypeFromUrl(v),name:this.getNameFromUrl(v),path:void 0,size:this.getSizeFromUrl(v)};f!=null&&f.readData&&(l.data=await this.getDataFromFile(v)),d.files.push(l)}return d}async pickImages(f){return this.pickFiles(Object.assign({types:["image/*"]},f))}async pickMedia(f){return this.pickFiles(Object.assign({types:["image/*","video/*"]},f))}async pickVideos(f){return this.pickFiles(Object.assign({types:["video/*"]},f))}async openFilePicker(f){var u;const d=((u=f==null?void 0:f.types)===null||u===void 0?void 0:u.join(","))||"",v=!!(f!=null&&f.multiple);return new Promise(l=>{let a=!1;const A=document.createElement("input");A.type="file",A.accept=d,A.multiple=v,A.addEventListener("change",()=>{a=!0;const N=Array.from(A.files||[]);l(N)},{once:!0}),window.addEventListener("focus",async()=>{await this.wait(1e3),!a&&l(void 0)},{once:!0}),A.click()})}async getDataFromFile(f){return new Promise((u,d)=>{const v=new FileReader;v.readAsDataURL(f),v.onload=()=>{const A=(typeof v.result=="string"?v.result:"").split("base64,")[1]||"";u(A)},v.onerror=l=>{d(l)}})}getNameFromUrl(f){return f.name}getMimeTypeFromUrl(f){return f.type}getSizeFromUrl(f){return f.size}async wait(f){return new Promise(u=>setTimeout(u,f))}}const gn=xt("FilePicker",{web:()=>new mn}),Pn=qt({__name:"SettingsPage",setup(h){const f=zt({name:"RopeRisk",version:"PWA"});bn.getInfo().then(a=>{f.value=a}).catch(()=>{}),Ft({dataType:"Blob",types:[{description:"JSON Datei",accept:{"application/json":[".json"]}}]}),Lt.isNativePlatform();async function u(){Jt(dt,{prettyJson:!0}).then(a=>{nn(a,"database_dump.json").then(A=>{console.log(A)})})}const d=(a,A="",N=512)=>{const s=atob(a),P=[];for(let Te=0;Te<s.length;Te+=N){const pe=s.slice(Te,Te+N),F=new Array(pe.length);for(let X=0;X<pe.length;X++)F[X]=pe.charCodeAt(X);const Y=new Uint8Array(F);P.push(Y)}return new Blob(P,{type:A})};function v(a){Nt(dt,a,{acceptMissingTables:!0,acceptVersionDiff:!0,acceptNameDiff:!0,acceptChangedPrimaryKey:!0,overwriteValues:!0,clearTablesBeforeImport:!0}).then(()=>{ct("Import erfolgreich","success")}).catch(A=>{ct("Import gescheitert","danger"),console.warn(A)})}async function l(){gn.pickFiles({types:["application/json"],readData:!0}).then(a=>{const A=a.files;if(A.length===0)return;const N=A[0];v(d(N.data,N.mimeType))})}return(a,A)=>(wt(),Ht(Wt,null,{default:he(()=>[be(le(kt),null,{default:he(()=>[be(le(Pt),null,{default:he(()=>[be(le(It),null,{default:he(()=>[Be("App")]),_:1})]),_:1}),be(le(Ct),null,{default:he(()=>[f.value.version!=="PWA"?(wt(),jt(Bt,{key:0},[be(le(et),{lines:"none"},{default:he(()=>[Be(" Name: "+st(f.value.name),1)]),_:1}),be(le(et),{lines:"none"},{default:he(()=>[Be(" Version: "+st(f.value.version),1)]),_:1}),be(le(et),{lines:"none"},{default:he(()=>[Be(" Build: "+st(f.value.build),1)]),_:1}),be(le(et),{lines:"none"},{default:he(()=>[Be(" ID: "+st(f.value.id),1)]),_:1})],64)):(wt(),jt(Bt,{key:1},[be(le(et),{lines:"none"},{default:he(()=>[Be(" Keine Informationen verfügbar. ")]),_:1}),be(le(St),null,{default:he(()=>[Be("Vermutlich läuft die App als PWA (Webapp).")]),_:1})],64))]),_:1})]),_:1}),be(le(kt),null,{default:he(()=>[be(le(Pt),null,{default:he(()=>[be(le(It),null,{default:he(()=>[Be(" Datenbank ")]),_:1})]),_:1}),be(le(Ct),null,{default:he(()=>[be(le(et),{lines:"none"},{default:he(()=>[Be(" Name: "+st(le(dt).name),1)]),_:1}),be(le(et),{lines:"none"},{default:he(()=>[Be(" Version: "+st(le(dt).verno),1)]),_:1}),be(le(et),{lines:"none"},{default:he(()=>[Be(" Dexie-Version: "+st(le(ke).version),1)]),_:1}),be(le(et),{lines:"none"},{default:he(()=>[be(le(Rt),{onClick:u},{default:he(()=>[Be("Exportieren")]),_:1})]),_:1}),be(le(St),null,{default:he(()=>[Be("Exportiert die gesamte Datenbank im JSON-Format.")]),_:1}),be(le(et),{lines:"none"},{default:he(()=>[be(le(Rt),{onClick:l},{default:he(()=>[Be("Importieren")]),_:1})]),_:1}),be(le(St),null,{default:he(()=>[Be("Importiert die gesamte Datenbank im JSON-Format.")]),_:1})]),_:1})]),_:1})]),_:1}))}});export{Pn as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/web-zdk9kCdN.js","assets/index-0jqLegA0.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
