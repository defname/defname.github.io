import{d as M,u as x,e as k,x as A,o,c as i,w as a,f as e,g as w,q as E,b as t,n as F,p as N,m as S,l as g,H as I,T as $,i as _,j as m,t as v,J as y,an as U,K as b,E as j,G as V,aj as q,ai as R,F as H}from"./index-iuBXx226.js";import{u as K}from"./riskassessment-kDVt_zTq.js";import{l as L}from"./liveriskstree-cN6XJtJY.js";import{l as p}from"./livequery-ETYlEgeO.js";import{_ as C}from"./MeasureCatalog.vue_vue_type_script_setup_true_lang-PufTy5UR.js";import{_ as z}from"./AddedByList.vue_vue_type_script_setup_true_lang-31-xzKzo.js";import{T as D}from"./TemplateRiskAssessmentPage-F224yhkf.js";import"./helpers-dC0WslIB.js";import"./GenericList.vue_vue_type_script_setup_true_lang-qKy4aSx-.js";const ee=M({__name:"RAEditRiskEntry",setup(G){const l=K(),c=p.table("measures"),s=parseInt(x().params.riskId),u=L.getAsRef(s),B=k(()=>{if(!c.isReady().value)return[];l.getMeasures(s).map(d=>c.get(d))});p.table("measures").updated();const T=k(()=>u.value===void 0||!p.table("measures").isReady()?[]:p.table("measures").entries().filter(d=>d.solveRisks.includes(u.value.id))),f=A("selected");return(d,n)=>(o(),i(D,null,{default:a(()=>[e(u)&&e(l).isReady&&e(c).isReady()?(o(),w(H,{key:0},[f.value!=="selected"?(o(),i(e(E),{key:0,slot:"fixed",vertical:"bottom",horizontal:"end"},{default:a(()=>[t(e(S),{"router-link":"/measures/new?for=".concat(e(u).id)},{default:a(()=>[t(e(F),{icon:e(N)},null,8,["icon"])]),_:1},8,["router-link"])]),_:1})):g("",!0),t(e(V),null,{default:a(()=>[t(e(I),null,{default:a(()=>[t(e($),null,{default:a(()=>[t(e(_),{position:"stacked"},{default:a(()=>[m(v(e(u).factor.category.descr)+" ➤ "+v(e(u).factor.descr),1)]),_:1})]),_:1}),t(e(y),null,{default:a(()=>[m(v(e(u).descr),1)]),_:1}),e(l).getMeta(e(s)).addedBy.length>0?(o(),i(e(U),{key:0},{default:a(()=>[t(z,{"trigger-list":e(l).getMeta(e(s)).addedBy},null,8,["trigger-list"])]),_:1})):g("",!0)]),_:1}),t(e(b),null,{default:a(()=>[t(e(j),{label:"Kommentar","auto-grow":"","label-placement":"floating",modelValue:e(l).getMeta(e(s)).comment,"onUpdate:modelValue":n[0]||(n[0]=r=>e(l).getMeta(e(s)).comment=r)},null,8,["modelValue"])]),_:1})]),_:1}),t(e(V),null,{default:a(()=>[t(e(I),null,{default:a(()=>[t(e(y),null,{default:a(()=>[m("Maßnahmen")]),_:1})]),_:1}),t(e(b),null,{default:a(()=>[t(e(q),{value:f.value,onIonChange:n[1]||(n[1]=r=>{f.value=r.detail.value,d.$router.replace({query:{segment:r.detail.value}})})},{default:a(()=>[t(e(R),{value:"selected"},{default:a(()=>[t(e(_),null,{default:a(()=>[m("Ausgewählt")]),_:1})]),_:1}),t(e(R),{value:"available"},{default:a(()=>[t(e(_),null,{default:a(()=>[m("Verfügbar")]),_:1})]),_:1})]),_:1},8,["value"]),f.value==="selected"?(o(),i(C,{key:0,modelValue:e(l).measures[e(s)],"onUpdate:modelValue":n[2]||(n[2]=r=>e(l).measures[e(s)]=r),entries:B.value,inverted:""},null,8,["modelValue","entries"])):(o(),i(C,{key:1,modelValue:e(l).measures[e(s)],"onUpdate:modelValue":n[3]||(n[3]=r=>e(l).measures[e(s)]=r),entries:T.value},null,8,["modelValue","entries"]))]),_:1})]),_:1})],64)):g("",!0)]),_:1}))}});export{ee as default};
