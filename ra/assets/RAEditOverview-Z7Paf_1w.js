import{d as V,o as s,c as o,f as e,X as T,n as u,_ as D,e as I,Z as q,$ as C,w as l,b as n,h as L,j as a,r as k,a0 as P,l as r,D as w,a1 as j,N as B,a2 as F,a3 as N,a4 as G,i as y,g as i,F as c,V as R,a5 as M,a6 as O,t as _,a7 as U,a8 as $,I as H}from"./index-aPl9jvQn.js";import{u as Q,a as X}from"./riskassessment-UErCLwMe.js";import{l as A}from"./livequery-F5oUnc-M.js";import{T as Z}from"./TemplateRiskAssessmentPage-vZlOcAeI.js";import"./helpers-1szQ4hrZ.js";import"./liveriskstree-XvMKZMrI.js";const J=V({__name:"Checkmark",setup(z){return(b,v)=>(s(),o(e(u),{class:"checkmark",slot:"end",color:"success",icon:e(T)},null,8,["icon"]))}}),m=D(J,[["__scopeId","data-v-b74799a7"]]),K={key:1,class:"nested-list",lines:"none"},W={class:"ion-no-padding ion-no-margin nested-list-item",lines:"none"},Y={key:1,class:"nested-list ion-no-padding",lines:"none"},ee={class:"ion-no-padding ion-no-margin nested-list-item",lines:"none",size:"small"},te=V({__name:"RAEditOverview",setup(z){const b=A.table("technicians"),v=A.table("equipment"),t=Q(),E=I(()=>b.isReady().value?t.technicians.map(p=>b.get(p)):[]),x=I(()=>v.isReady().value?t.equipment.map(p=>v.get(p)):[]),f="/riskassessment/"+t.id,S=X(),h=q({direct:-1,all:-1,solved:-1});return C(S,async()=>{await t.ready,h.direct=t.risks.length;const p=await t.calcAllRisks();h.all=p.length,h.solved=p.filter(g=>t.measures[g]!==void 0&&t.measures[g].length>0).length}),(p,g)=>(s(),o(Z,null,{default:l(()=>[n(e(H),{lines:"full"},{default:l(()=>[n(e(L),null,{default:l(()=>[a(" Allgemeines ")]),_:1}),n(e(k),null,{default:l(()=>[n(e(u),{slot:"start",icon:e(P)},null,8,["icon"]),e(t).company?(s(),o(m,{key:0})):r("",!0),n(e(w),{label:"Ausführende Firma","label-placement":"floating",modelValue:e(t).company,"onUpdate:modelValue":g[0]||(g[0]=d=>e(t).company=d)},null,8,["modelValue"])]),_:1}),n(e(k),null,{default:l(()=>[n(e(u),{slot:"start",icon:e(j)},null,8,["icon"]),e(t).jobDescr?(s(),o(m,{key:0})):r("",!0),n(e(B),{label:"Beschreibung der Tätigkeit","label-placement":"floating","auto-grow":"",modelValue:e(t).jobDescr,"onUpdate:modelValue":g[1]||(g[1]=d=>e(t).jobDescr=d)},null,8,["modelValue"])]),_:1}),n(e(k),null,{default:l(()=>[n(e(u),{slot:"start",icon:e(F)},null,8,["icon"]),e(t).address?(s(),o(m,{key:0})):r("",!0),n(e(w),{"router-link":f+"/location",label:"Addresse","label-placement":"floating",readonly:"",value:e(t).address},null,8,["router-link","value"])]),_:1}),n(e(k),null,{default:l(()=>[n(e(u),{slot:"start",icon:e(N)},null,8,["icon"]),e(t).startDate?(s(),o(m,{key:0})):r("",!0),n(e(w),{"router-link":f+"/date",label:"Datum","label-placement":"floating",readonly:"",value:e(t).startDate+(e(t).endDate?" - "+e(t).endDate:"")},null,8,["router-link","value"])]),_:1}),n(e(k),{"router-link":f+"/equipment",detail:!1},{default:l(()=>[n(e(u),{slot:"start",icon:e(G)},null,8,["icon"]),e(t).equipment?(s(),o(m,{key:0})):r("",!0),n(e(y),{position:"stacked",style:{"z-index":"10"},class:"label"},{default:l(()=>[a("Ausrüstung")]),_:1}),x.value.length>0?(s(),i("ul",K,[(s(!0),i(c,null,R(x.value,d=>(s(),i("li",W,_(d.descr),1))),256))])):r("",!0)]),_:1},8,["router-link"]),n(e(k),{"router-link":f+"/technicians",detail:!1},{default:l(()=>[n(e(u),{slot:"start",icon:e(M)},null,8,["icon"]),e(t).technicians.length>0?(s(),o(m,{key:0})):r("",!0),n(e(y),{position:"stacked",style:{"z-index":"10"},class:"label"},{default:l(()=>[a("Personal")]),_:1}),e(t).technicians.length>0?(s(),i("ul",Y,[(s(!0),i(c,null,R(E.value,d=>(s(),i("li",ee,_(d.name),1))),256))])):(s(),i(c,{key:2},[a(" Es wurde noch kein Personal ausgewählt ")],64))]),_:1},8,["router-link"]),n(e(k),{"router-link":f+"/access",detail:!1},{default:l(()=>[n(e(u),{slot:"start",icon:e(O)},null,8,["icon"]),e(t).access.length>0?(s(),o(m,{key:0})):r("",!0),n(e(y),{position:"stacked",style:{"z-index":"10"},class:"label"},{default:l(()=>[a("Sektoren")]),_:1}),e(t).access.length===0?(s(),i(c,{key:1},[a("Es wurden noch keine Sektoren definiert")],64)):e(t).access.length===1?(s(),i(c,{key:2},[a("Es wurde ein Sektor definiert")],64)):(s(),i(c,{key:3},[a("Es wurden bisher "+_(e(t).access.length)+" Sektoren definiert",1)],64))]),_:1},8,["router-link"]),n(e(k),{"router-link":f+"/rescue",detail:!1},{default:l(()=>[n(e(u),{slot:"start",icon:e(U)},null,8,["icon"]),e(t).access.length>0?(s(),o(m,{key:0})):r("",!0),n(e(y),{position:"stacked",style:{"z-index":"10"},class:"label"},{default:l(()=>[a("Rettungskonzept")]),_:1}),e(t).access.length===0?(s(),i(c,{key:1},[a("Es wurden noch keine Sektoren definiert")],64)):(s(),i(c,{key:2},[a("Für "+_(e(t).access.filter(d=>d.rescue).length)+" Sektoren existiert ein Rettungskonzept",1)],64))]),_:1},8,["router-link"]),n(e(k),{"router-link":f+"/risks",detail:!1},{default:l(()=>[n(e(u),{slot:"start",icon:e($)},null,8,["icon"]),e(t).access.length>0?(s(),o(m,{key:0})):r("",!0),n(e(y),{position:"stacked",style:{"z-index":"10"},class:"label"},{default:l(()=>[a("Gefährdungen")]),_:1}),h.all===0?(s(),i(c,{key:1},[a("Es wurden noch keine Gefährdungen hinzugefügt")],64)):(s(),i(c,{key:2},[a(" Von insgesamt "+_(h.all)+" Gefährdungen sind für "+_(h.solved)+" Maßnahmen angegeben. ",1)],64))]),_:1},8,["router-link"])]),_:1})]),_:1}))}}),re=D(te,[["__scopeId","data-v-ecfe1c33"]]);export{re as default};
