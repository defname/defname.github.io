import{d as M,u as x,e as k,x as A,o,c as i,w as a,f as e,g as w,q as E,b as t,n as F,p as N,m as S,l as g,H as I,T as $,i as v,j as m,t as _,J as y,av as q,K as b,E as U,G as V,aq as H,ap as R,F as K}from"./index-xm7OlJwR.js";import{u as L}from"./riskassessment-2SeHuEkN.js";import{l as j}from"./liveriskstree-OUGTu9yV.js";import{l as p}from"./livequery-oK8gD4FI.js";import{_ as C}from"./MeasureCatalog.vue_vue_type_script_setup_true_lang-vnx2Dfi5.js";import{_ as z}from"./AddedByList.vue_vue_type_script_setup_true_lang-yhgwet_O.js";import{T as D}from"./TemplateRiskAssessmentPage-1uQVKWNO.js";import"./database-y4SrtzQs.js";import"./GenericList.vue_vue_type_script_setup_true_lang-iSo5lPJ3.js";import"./helpers-IDuM_-et.js";const ae=M({__name:"RAEditRiskEntry",setup(G){const l=L(),c=p.table("measures"),s=parseInt(x().params.riskId),u=j.getAsRef(s),B=k(()=>{if(!c.isReady().value)return[];l.getMeasures(s).map(d=>c.get(d))});p.table("measures").updated();const T=k(()=>u.value===void 0||!p.table("measures").isReady()?[]:p.table("measures").entries().filter(d=>d.solveRisks.includes(u.value.id))),f=A("selected");return(d,r)=>(o(),i(D,null,{default:a(()=>[e(u)&&e(l).isReady&&e(c).isReady()?(o(),w(K,{key:0},[f.value!=="selected"?(o(),i(e(E),{key:0,slot:"fixed",vertical:"bottom",horizontal:"end"},{default:a(()=>[t(e(S),{"router-link":"/measures/new?for=".concat(e(u).id)},{default:a(()=>[t(e(F),{icon:e(N)},null,8,["icon"])]),_:1},8,["router-link"])]),_:1})):g("",!0),t(e(V),null,{default:a(()=>[t(e(I),null,{default:a(()=>[t(e($),null,{default:a(()=>[t(e(v),{position:"stacked"},{default:a(()=>[m(_(e(u).factor.category.descr)+" ➤ "+_(e(u).factor.descr),1)]),_:1})]),_:1}),t(e(y),null,{default:a(()=>[m(_(e(u).descr),1)]),_:1}),e(l).getMeta(e(s)).addedBy.length>0?(o(),i(e(q),{key:0},{default:a(()=>[t(z,{"trigger-list":e(l).getMeta(e(s)).addedBy},null,8,["trigger-list"])]),_:1})):g("",!0)]),_:1}),t(e(b),null,{default:a(()=>[t(e(U),{label:"Kommentar","auto-grow":"","label-placement":"floating",modelValue:e(l).getMeta(e(s)).comment,"onUpdate:modelValue":r[0]||(r[0]=n=>e(l).getMeta(e(s)).comment=n)},null,8,["modelValue"])]),_:1})]),_:1}),t(e(V),null,{default:a(()=>[t(e(I),null,{default:a(()=>[t(e(y),null,{default:a(()=>[m("Maßnahmen")]),_:1})]),_:1}),t(e(b),null,{default:a(()=>[t(e(H),{value:f.value,onIonChange:r[1]||(r[1]=n=>{f.value=n.detail.value,d.$router.replace({query:{segment:n.detail.value}})})},{default:a(()=>[t(e(R),{value:"selected"},{default:a(()=>[t(e(v),null,{default:a(()=>[m("Ausgewählt")]),_:1})]),_:1}),t(e(R),{value:"available"},{default:a(()=>[t(e(v),null,{default:a(()=>[m("Verfügbar")]),_:1})]),_:1})]),_:1},8,["value"]),f.value==="selected"?(o(),i(C,{key:0,modelValue:e(l).measures[e(s)],"onUpdate:modelValue":r[2]||(r[2]=n=>e(l).measures[e(s)]=n),entries:B.value,inverted:""},null,8,["modelValue","entries"])):(o(),i(C,{key:1,modelValue:e(l).measures[e(s)],"onUpdate:modelValue":r[3]||(r[3]=n=>e(l).measures[e(s)]=n),entries:T.value},null,8,["modelValue","entries"]))]),_:1})]),_:1})],64)):g("",!0)]),_:1}))}});export{ae as default};
