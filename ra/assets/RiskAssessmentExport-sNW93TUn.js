import{d as L,x as T,aj as w,o as t,c as C,w as c,b as h,j as a,f as l,k as b,H as x,J as z,K as G,a as n,t as r,g as s,l as p,R as _,F as i,G as I}from"./index-UMG9ijW_.js";import{u as B,b as R}from"./riskassessment-nLZ3VFZc.js";import{G as S}from"./GenericEditModal-f3PXcmiA.js";import{S as f}from"./helpers-bZslMZiG.js";import{T as V}from"./TemplateRiskAssessmentPage-CRa0VqWt.js";import{S as $}from"./SignatureInput-DwP7nyCi.js";import"./livequery-oLcIvdFu.js";import"./liveriskstree-y4DI8csw.js";import"./index-vmRt8s44.js";const N={id:"print"},F=n("h1",null,"Einsatzplanung",-1),j=n("p",null," Es wird grundsätzlich nach den geltenden Regeln und Vorschriften der DGUV, dem Arbeitsschutzgesetz, der BetrSichV, den TRBS und der FISAT FSR-SZP gearbeitet. ",-1),P=n("strong",null,"Ausführende Firma:",-1),U=n("strong",null,"Einsatzdatum:",-1),W=n("strong",null,"Einsatzort:",-1),Z=n("strong",null,"Durchzuführende Arbeiten:",-1),q=n("br",null,null,-1),J={key:0},K=n("strong",null,"Aufsichtsführende Höhenarbeiter:",-1),O=n("p",null,[n("strong",null,"Höhenarbeiter:")],-1),Q=n("thead",null,[n("tr",null,[n("th",null,"Name"),n("th",null,"FISAT-Nr"),n("th",null,"Level")])],-1),X=n("strong",null,"Ausrüstung:",-1),Y=n("h2",null,"Zugangsverfahren",-1),nn={key:0},en=n("strong",null,"Einstieg:",-1),tn=["innerHTML"],sn={key:1},ln=n("strong",null,"Ausstieg:",-1),rn=["innerHTML"],un={key:2},on=n("strong",null,"Anschlagpunkte:",-1),an=["innerHTML"],dn=["innerHTML"],cn=n("h2",null,"Notfall- und Rettungsplan",-1),hn=["innerHTML"],_n=n("h1",null,"Gefährdungsermittlung",-1),pn={key:0},mn={key:1},gn={key:2},fn=n("thead",null,[n("tr",null,[n("th",null,"Gefährdung"),n("th",null,"Maßnahme")])],-1),kn={colspan:"2"},bn={class:"factor"},yn={key:0},vn=["src"],Tn={key:2},An=n("strong",null,"Ohne Unterschrift",-1),En=[An],Hn=n("h1",null,"Empfangsbestätigung",-1),Dn=n("p",null," Es wird bestätigt, über Gefahren und Maßnahmen aufgeklärt worden zu sein. ",-1),Mn=["src"],Vn=L({__name:"RiskAssessmentExport",setup(Ln){const y=B(),{exportData:u,updateExportData:v}=R(),A=T(void 0),k=T(!1);function E(g){const o=window.open("","print","");if(!o)return;o.open(),o.document.write('<html>\n    <head>\n        <link rel="stylesheet" href="/ra/print.css" />\n    </head>\n    <body>'.concat(g.outerHTML,"\n    </body>\n    </html>")),o.document.close();const e=o.document.createElement("script");e.setAttribute("src","/ra/print.js"),o.document.head.appendChild(e)}async function H(){E(document.getElementById("print"))}function D(g){y.signature=g,v()}return w(()=>{v()}),(g,o)=>(t(),C(V,null,{default:c(()=>[h(l(b),{"router-link":"/riskassessment/"+l(y).id+"/sign"},{default:c(()=>[a("Unterzeichnen (Technicker)")]),_:1},8,["router-link"]),h(l(b),{onClick:o[0]||(o[0]=e=>k.value=!0)},{default:c(()=>[a("Unterzeichnen")]),_:1}),h(l(b),{onClick:o[1]||(o[1]=e=>H())},{default:c(()=>[a("Drucken")]),_:1}),h(S,{"is-open":k.value,"hide-save":"",onWillDismiss:o[2]||(o[2]=e=>k.value=!1),onDidPresent:o[3]||(o[3]=e=>g.$refs.signatureinput.updateDimensions())},{default:c(()=>[h($,{onSignature:D,ref_key:"signatureinput",ref:A},null,512)]),_:1},8,["is-open"]),h(l(I),null,{default:c(()=>[h(l(x),null,{default:c(()=>[h(l(z),null,{default:c(()=>[a("Druckvorschau")]),_:1})]),_:1}),h(l(G),null,{default:c(()=>[n("div",N,[F,j,n("p",null,[P,a(" "+r(l(u).company),1)]),n("p",null,[U,a(" "+r(l(u).startDate)+" "+r(l(u).endDate?l(u).endDate:""),1)]),n("p",null,[W,a(" "+r(l(u).address),1)]),n("p",null,[Z,q,a(" "+r(l(u).jobDescr),1)]),l(u).supervisors?(t(),s("p",J,[K,a(" "+r(l(u).supervisors.map(e=>e.name).join(", ")),1)])):p("",!0),O,n("table",null,[Q,(t(!0),s(i,null,_(l(u).technicians,e=>{var m,d;return t(),s("tr",null,[n("td",null,r(e.name),1),n("td",null,r((m=e.fisat)==null?void 0:m.id),1),n("td",null,r((d=e.fisat)==null?void 0:d.level),1)])}),256))]),n("p",null,[X,n("ul",null,[(t(!0),s(i,null,_(l(u).equipment,e=>(t(),s("li",null,r(e.descr),1))),256))])]),Y,(t(!0),s(i,null,_(l(u).access,e=>(t(),s(i,null,[n("p",null,[n("strong",null,r(e.title),1)]),e.access?(t(),s("p",nn,[en,a(),n("span",{innerHTML:e.access},null,8,tn)])):p("",!0),e.exit?(t(),s("p",sn,[ln,a(),n("span",{innerHTML:e.exit},null,8,rn)])):p("",!0),e.anchorPoints?(t(),s("p",un,[on,a(),n("span",{innerHTML:e.anchorPoints},null,8,an)])):p("",!0),e.comment?(t(),s("p",{key:3,innerHTML:e.comment},null,8,dn)):p("",!0)],64))),256)),cn,(t(!0),s(i,null,_(l(u).access,e=>(t(),s(i,null,[n("p",null,[n("strong",null,r(e.title),1)]),n("p",{innerHTML:e.rescue},null,8,hn)],64))),256)),_n,(t(!0),s(i,null,_([l(f).Access,l(f).Environment,l(f).Work],e=>(t(),s(i,null,[e===l(f).Access?(t(),s("h3",pn,"Gefahren durch die ausgewählten Zugangstechniken")):e===l(f).Environment?(t(),s("h3",mn,"Gefahren durch die Arbeitsumgebung")):(t(),s("h3",gn,"Gefahren durch die Arbeit")),n("table",null,[fn,n("tbody",null,[(t(!0),s(i,null,_(l(u).categories,m=>(t(),s(i,null,[m.risks.filter(d=>d.risk.sector===e).length?(t(),s(i,{key:0},[n("tr",null,[n("th",kn,r(m.descr),1)]),(t(!0),s(i,null,_(m.risks.filter(d=>d.risk.sector===e),d=>(t(),s("tr",null,[n("td",null,[n("span",bn,r(d.risk.factor.descr),1),a(" "+r(d.risk.descr),1)]),n("td",null,[d.measures.length>1?(t(),s("ul",yn,[(t(!0),s(i,null,_(d.measures,M=>(t(),s("li",null,r(M.descr),1))),256))])):d.measures.length===1?(t(),s(i,{key:1},[a(r(d.measures[0].descr),1)],64)):p("",!0)])]))),256))],64)):p("",!0)],64))),256))])])],64))),256)),l(u).signature?(t(),s("img",{key:1,src:l(u).signature.signature},null,8,vn)):(t(),s("p",Tn,En)),Hn,Dn,(t(!0),s(i,null,_(l(u).signatures,e=>(t(),s("div",null,[n("img",{src:e.signature},null,8,Mn)]))),256))])]),_:1})]),_:1})]),_:1}))}});export{Vn as default};
