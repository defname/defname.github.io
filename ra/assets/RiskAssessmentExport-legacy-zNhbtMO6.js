System.register(["./index-legacy-suzKFNhr.js","./riskassessment-legacy-jvJ_B6mS.js","./GenericEditModal-legacy-Ph43W25q.js","./helpers-legacy-TjiidOhA.js","./TemplateRiskAssessmentPage-legacy-mpcA1MAH.js","./SignatureInput-legacy-PofesUr6.js","./livequery-legacy-g03XN_vm.js","./liveriskstree-legacy-mE2tivwi.js","./index-legacy-_VeikKTl.js"],(function(n,e){"use strict";var l,t,u,r,s,i,a,o,c,d,h,g,p,f,m,k,y,b,v,L,T,A,D,E,H,M;return{setters:[n=>{l=n.d,t=n.x,u=n.aj,r=n.o,s=n.c,i=n.w,a=n.b,o=n.j,c=n.f,d=n.k,h=n.H,g=n.J,p=n.K,f=n.a,m=n.t,k=n.g,y=n.l,b=n.R,v=n.F,L=n.G},n=>{T=n.b,A=n.u},n=>{D=n.G},n=>{E=n.S},n=>{H=n.T},n=>{M=n.S},null,null,null],execute:function(){const e={id:"print"},j=f("h1",null,"Einsatzplanung",-1),_=f("p",null," Es wird grundsätzlich nach den geltenden Regeln und Vorschriften der DGUV, dem Arbeitsschutzgesetz, der BetrSichV, den TRBS und der FISAT FSR-SZP gearbeitet. ",-1),x=f("strong",null,"Ausführende Firma:",-1),w=f("strong",null,"Einsatzdatum:",-1),z=f("strong",null,"Einsatzort:",-1),S=f("strong",null,"Durchzuführende Arbeiten:",-1),G=f("br",null,null,-1),R={key:0},F=f("strong",null,"Aufsichtsführende Höhenarbeiter:",-1),C=f("p",null,[f("strong",null,"Höhenarbeiter:")],-1),P=f("thead",null,[f("tr",null,[f("th",null,"Name"),f("th",null,"FISAT-Nr"),f("th",null,"Level")])],-1),W=f("strong",null,"Ausrüstung:",-1),I=f("h2",null,"Zugangsverfahren",-1),N={key:0},O=f("strong",null,"Einstieg:",-1),U=["innerHTML"],B={key:1},V=f("strong",null,"Ausstieg:",-1),Z=["innerHTML"],q={key:2},K=f("strong",null,"Anschlagpunkte:",-1),$=["innerHTML"],J=["innerHTML"],Q=f("h2",null,"Notfall- und Rettungsplan",-1),X=["innerHTML"],Y=f("h1",null,"Gefährdungsermittlung",-1),nn={key:0},en={key:1},ln={key:2},tn=f("thead",null,[f("tr",null,[f("th",null,"Gefährdung"),f("th",null,"Maßnahme")])],-1),un={colspan:"2"},rn={class:"factor"},sn={key:0},an=["src"],on={key:2},cn=[f("strong",null,"Ohne Unterschrift",-1)],dn=f("h1",null,"Empfangsbestätigung",-1),hn=f("p",null," Es wird bestätigt, über Gefahren und Maßnahmen aufgeklärt worden zu sein. ",-1),gn=["src"];n("default",l({__name:"RiskAssessmentExport",setup(n){const l=A(),{exportData:pn,updateExportData:fn}=T(),{open:mn}=function(n){const{exportData:e,updateExportData:l}=T(n);return pdfMake.tableLayouts={customLayout:{hLineWidth:function(n,e){return 0===n||n===e.table.body.length?0:n===e.table.headerRows?.5:0},vLineWidth:function(n){return 0},hLineColor:function(n){return"#aaa"},paddingLeft:function(n){return 0===n?0:8},paddingRight:function(n,e){return n===e.table.widths.length-1?0:8}},riskTable:{hLineWidth:()=>.5,vLineWidth:()=>.5,hLineColor:()=>"#aaa",vLineColor:()=>"#aaa"}},{open:async()=>{await l(),console.log("FOOO")}}}(),kn=t(void 0),yn=t(!1);async function bn(){!function(n){const e=window.open("","print","");if(!e)return;e.open(),e.document.write(`<html>\n    <head>\n        <link rel="stylesheet" href="/ra/print.css" />\n    </head>\n    <body>${n.outerHTML}\n    </body>\n    </html>`),e.document.close();const l=e.document.createElement("script");l.setAttribute("src","/ra/print.js"),e.document.head.appendChild(l)}(document.getElementById("print"))}function vn(n){l.signature=n,fn()}return u((()=>{fn()})),(n,t)=>(r(),s(H,null,{default:i((()=>[a(c(d),{"router-link":"/riskassessment/"+c(l).id+"/sign"},{default:i((()=>[o("Unterzeichnen (Technicker)")])),_:1},8,["router-link"]),a(c(d),{onClick:t[0]||(t[0]=n=>yn.value=!0)},{default:i((()=>[o("Unterzeichnen")])),_:1}),a(c(d),{onClick:t[1]||(t[1]=n=>bn())},{default:i((()=>[o("Drucken")])),_:1}),a(c(d),{onClick:t[2]||(t[2]=n=>c(mn)())},{default:i((()=>[o("PDF")])),_:1}),a(D,{"is-open":yn.value,"hide-save":"",onWillDismiss:t[3]||(t[3]=n=>yn.value=!1),onDidPresent:t[4]||(t[4]=e=>n.$refs.signatureinput.updateDimensions())},{default:i((()=>[a(M,{onSignature:vn,ref_key:"signatureinput",ref:kn},null,512)])),_:1},8,["is-open"]),a(c(L),null,{default:i((()=>[a(c(h),null,{default:i((()=>[a(c(g),null,{default:i((()=>[o("Druckvorschau")])),_:1})])),_:1}),a(c(p),null,{default:i((()=>[f("div",e,[j,_,f("p",null,[x,o(" "+m(c(pn).company),1)]),f("p",null,[w,o(" "+m(c(pn).startDate)+" "+m(c(pn).endDate?c(pn).endDate:""),1)]),f("p",null,[z,o(" "+m(c(pn).address),1)]),f("p",null,[S,G,o(" "+m(c(pn).jobDescr),1)]),c(pn).supervisors?(r(),k("p",R,[F,o(" "+m(c(pn).supervisors.map((n=>n.name)).join(", ")),1)])):y("",!0),C,f("table",null,[P,(r(!0),k(v,null,b(c(pn).technicians,(n=>{var e,l;return r(),k("tr",null,[f("td",null,m(n.name),1),f("td",null,m(null===(e=n.fisat)||void 0===e?void 0:e.id),1),f("td",null,m(null===(l=n.fisat)||void 0===l?void 0:l.level),1)])})),256))]),f("p",null,[W,f("ul",null,[(r(!0),k(v,null,b(c(pn).equipment,(n=>(r(),k("li",null,m(n.descr),1)))),256))])]),I,(r(!0),k(v,null,b(c(pn).access,(n=>(r(),k(v,null,[f("p",null,[f("strong",null,m(n.title),1)]),n.access?(r(),k("p",N,[O,o(),f("span",{innerHTML:n.access},null,8,U)])):y("",!0),n.exit?(r(),k("p",B,[V,o(),f("span",{innerHTML:n.exit},null,8,Z)])):y("",!0),n.anchorPoints?(r(),k("p",q,[K,o(),f("span",{innerHTML:n.anchorPoints},null,8,$)])):y("",!0),n.comment?(r(),k("p",{key:3,innerHTML:n.comment},null,8,J)):y("",!0)],64)))),256)),Q,(r(!0),k(v,null,b(c(pn).access,(n=>(r(),k(v,null,[f("p",null,[f("strong",null,m(n.title),1)]),f("p",{innerHTML:n.rescue},null,8,X)],64)))),256)),Y,(r(!0),k(v,null,b([c(E).Access,c(E).Environment,c(E).Work],(n=>(r(),k(v,null,[n===c(E).Access?(r(),k("h3",nn,"Gefahren durch die ausgewählten Zugangstechniken")):n===c(E).Environment?(r(),k("h3",en,"Gefahren durch die Arbeitsumgebung")):(r(),k("h3",ln,"Gefahren durch die Arbeit")),f("table",null,[tn,f("tbody",null,[(r(!0),k(v,null,b(c(pn).categories,(e=>(r(),k(v,null,[e.risks.filter((e=>e.risk.sector===n)).length?(r(),k(v,{key:0},[f("tr",null,[f("th",un,m(e.descr),1)]),(r(!0),k(v,null,b(e.risks.filter((e=>e.risk.sector===n)),(n=>(r(),k("tr",null,[f("td",null,[f("span",rn,m(n.risk.factor.descr),1),o(" "+m(n.risk.descr),1)]),f("td",null,[n.measures.length>1?(r(),k("ul",sn,[(r(!0),k(v,null,b(n.measures,(n=>(r(),k("li",null,m(n.descr),1)))),256))])):1===n.measures.length?(r(),k(v,{key:1},[o(m(n.measures[0].descr),1)],64)):y("",!0)])])))),256))],64)):y("",!0)],64)))),256))])])],64)))),256)),c(pn).signature?(r(),k("img",{key:1,src:c(pn).signature.signature},null,8,an)):(r(),k("p",on,cn)),dn,hn,(r(!0),k(v,null,b(c(pn).signatures,(n=>(r(),k("div",null,[f("img",{src:n.signature},null,8,gn)])))),256))])])),_:1})])),_:1})])),_:1}))}}))}}}));
