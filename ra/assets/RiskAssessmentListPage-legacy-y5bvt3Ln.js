System.register(["./index-legacy-La_jvRt6.js","./database-legacy-8-jSFMl0.js","./riskassessment-legacy-deVed6iG.js","./TemplateMainPage.vue_vue_type_script_setup_true_lang-legacy-eeiXSrLX.js","./helpers-legacy-wNo1H66i.js","./livequery-legacy-E6C-7scz.js","./liveriskstree-legacy-Mt7epSA0.js"],(function(e,l){"use strict";var n,t,a,i,s,u,r,o,d,c,f,g,_,k,v,p,h,y,m,b,C,A,D,j,w,x,z,R,T,B,q,I,S,$,E,F,L,M,V,K,P,Z,G,H,J,N,O,Q,U,W,X,Y,ee,le,ne;return{setters:[e=>{n=e.d,t=e.Q,a=e.x,i=e.o,s=e.c,u=e.w,r=e.b,o=e.f,d=e.M,c=e.R,f=e.T,g=e.n,_=e.U,k=e.i,v=e.j,p=e.V,h=e.W,y=e.X,m=e.q,b=e.p,C=e.m,A=e.l,D=e.g,j=e.Y,w=e.F,x=e.G,z=e.H,R=e.J,T=e.t,B=e.Z,q=e.K,I=e.r,S=e.$,$=e.a0,E=e.a1,F=e.a2,L=e.k,M=e.a3,V=e.a4,K=e.O,P=e.I,Z=e.a5,G=e.a6,H=e.a7,J=e.a8,N=e.a9,O=e.aa,Q=e.ab,U=e.ac},e=>{W=e.d},e=>{X=e.u,Y=e.a},e=>{ee=e._},e=>{le=e.a},e=>{ne=e.u},null],execute:function(){e("default",n({__name:"RiskAssessmentListPage",setup(e){t();const l=a("default"),n=ne(W.riskassessmentsmeta,((e,l)=>e.where("type").equals(l.value).toArray()),!0,[],[l]),te=X(),{addNewRiskAssessment:ae,duplicateRiskAssessment:ie,changeRiskAssessmentMetaDescr:se,changeRiskAssessmentType:ue,deleteRiskAssessment:re}=Y();return(e,t)=>(i(),s(ee,null,{footer:u((()=>[r(o(y),null,{default:u((()=>[r(o(d),null,{default:u((()=>[r(o(c),{value:l.value,onIonChange:t[1]||(t[1]=n=>{l.value=n.detail.value,e.$router.replace({query:{segment:n.detail.value}})})},{default:u((()=>[r(o(f),{value:"default"},{default:u((()=>[r(o(g),{icon:o(_)},null,8,["icon"]),r(o(k),null,{default:u((()=>[v("Aktuell")])),_:1})])),_:1}),r(o(f),{value:"preset"},{default:u((()=>[r(o(g),{icon:o(p)},null,8,["icon"]),r(o(k),null,{default:u((()=>[v("Vorlagen")])),_:1})])),_:1}),r(o(f),{value:"archieved"},{default:u((()=>[r(o(g),{icon:o(h)},null,8,["icon"]),r(o(k),null,{default:u((()=>[v("Archiv")])),_:1})])),_:1})])),_:1},8,["value"])])),_:1})])),_:1})])),default:u((()=>["archieved"!==l.value?(i(),s(o(m),{key:0,slot:"fixed",vertical:"bottom",horizontal:"end"},{default:u((()=>[r(o(C),{onClick:t[0]||(t[0]=e=>"preset"===l.value?o(ae)("preset"):o(ae)())},{default:u((()=>[r(o(g),{icon:o(b)},null,8,["icon"])])),_:1})])),_:1})):A("",!0),(i(!0),D(w,null,j(o(n),(e=>(i(),s(o(x),{key:e.id},{default:u((()=>[r(o(z),{onClick:l=>{return n=e.id,te.id,void(void 0!==te.id&&n!==te.id&&te.modified()?le("In der geöffneten Einsatzplanung gibt es noch ungespeicherte Änderungen. Diese gehen verloren wenn eine andere geöffnet wird. Soll die Einsatzplanung trotzdem geöffnet werden?",{text:"Öffnen",role:"submit",icon:U,handler:()=>{te.loadFromDb(n)}}):te.loadFromDb(n));var n}},{default:u((()=>[r(o(R),null,{default:u((()=>[v(T(e.descr),1)])),_:2},1024),r(o(B),null,{default:u((()=>[v("Zuletzt geändert: "+T(new Date(1e3*e.lastChange).toLocaleString("de")),1)])),_:2},1024)])),_:2},1032,["onClick"]),e.id===o(te).id?(i(),s(o(q),{key:0,class:"ion-no-padding"},{default:u((()=>[o(te).company?(i(),s(o(I),{key:0,lines:"none"},{default:u((()=>[r(o(g),{slot:"start",icon:o(S)},null,8,["icon"]),v(" "+T(o(te).company),1)])),_:1})):A("",!0),o(te).jobDescr?(i(),s(o(I),{key:1,lines:"none"},{default:u((()=>[r(o(g),{slot:"start",icon:o($)},null,8,["icon"]),v(" "+T(o(te).jobDescr),1)])),_:1})):A("",!0),o(te).address?(i(),s(o(I),{key:2,lines:"none"},{default:u((()=>[r(o(g),{slot:"start",icon:o(E)},null,8,["icon"]),v(" "+T(o(te).address),1)])),_:1})):A("",!0),o(te).startDate?(i(),s(o(I),{key:3,lines:"none"},{default:u((()=>[r(o(g),{slot:"start",icon:o(F)},null,8,["icon"]),v(" "+T(o(te).startDate+(o(te).endDate?" - "+o(te).endDate:"")),1)])),_:1})):A("",!0),r(o(I),{lines:"none"},{default:u((()=>[r(o(L),{fill:"clear","router-link":`/riskassessment/${e.id}`},{default:u((()=>[v("Bearbeiten")])),_:2},1032,["router-link"]),r(o(L),{fill:"clear",slot:"end",id:"popoverTrigger"+e.id},{default:u((()=>[r(o(g),{icon:o(M)},null,8,["icon"])])),_:2},1032,["id"]),r(o(V),{trigger:"popoverTrigger"+e.id,"dismiss-on-select":""},{default:u((()=>[r(o(K),null,{default:u((()=>[r(o(P),{lines:"none"},{default:u((()=>[r(o(I),{id:"titleChangeTrigger"+e.id,button:""},{default:u((()=>[r(o(g),{icon:o(Z),slot:"start"},null,8,["icon"]),v(" Beschreibung ändern "),r(o(G),{trigger:"titleChangeTrigger"+e.id,header:"Beschreibung eingeben",buttons:["Abbrechen",{text:"Speichern",handler:l=>o(se)(e.id,l[0])}],inputs:[{placeholder:"Beschreibung",value:e.descr}]},null,8,["trigger","buttons","inputs"])])),_:2},1032,["id"]),"archieved"!==l.value?(i(),D(w,{key:0},["default"===l.value?(i(),s(o(I),{key:0,"router-link":`/riskassessment/${e.id}/export`,button:""},{default:u((()=>[r(o(g),{icon:o(H),slot:"start"},null,8,["icon"]),v(" Exportieren ")])),_:2},1032,["router-link"])):A("",!0),"preset"!==l.value?(i(),s(o(I),{key:1,button:"",onClick:l=>o(ue)(e.id,"preset")},{default:u((()=>[r(o(g),{icon:o(J),slot:"start"},null,8,["icon"]),v(" In Vorlage umwandeln ")])),_:2},1032,["onClick"])):A("",!0),r(o(I),{button:"",onClick:l=>o(ie)(e.id)},{default:u((()=>[r(o(g),{icon:o(N),slot:"start"},null,8,["icon"]),v(" Duplizieren ")])),_:2},1032,["onClick"]),"preset"!==l.value?(i(),s(o(I),{key:2,button:"",onClick:l=>o(ue)(e.id,"archieved")},{default:u((()=>[r(o(g),{icon:o(h),slot:"start"},null,8,["icon"]),v(" Archivieren ")])),_:2},1032,["onClick"])):A("",!0)],64)):(i(),s(o(I),{key:1,button:"",onClick:l=>o(ue)(e.id,"default")},{default:u((()=>[r(o(g),{icon:o(O),slot:"start"},null,8,["icon"]),v(" Aus dem Archiv holen ")])),_:2},1032,["onClick"])),r(o(I),{onClick:l=>o(re)(e.id),button:""},{default:u((()=>[r(o(g),{icon:o(Q),slot:"start",color:"danger"},null,8,["icon"]),r(o(k),{color:"danger"},{default:u((()=>[v("Löschen")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["trigger"])])),_:2},1024)])),_:2},1024)):A("",!0)])),_:2},1024)))),128))])),_:1}))}}))}}}));
