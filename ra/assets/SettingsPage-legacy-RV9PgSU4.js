System.register(["./index-legacy-La_jvRt6.js","./TemplateMainPage.vue_vue_type_script_setup_true_lang-legacy-eeiXSrLX.js","./database-legacy-8-jSFMl0.js","./index-legacy-X91ZUWSc.js","./index-legacy-iXU7yd1x.js","./helpers-legacy-wNo1H66i.js","./index-legacy-tPW4ol7Q.js","./index-legacy-aZ1iJlQL.js"],(function(e,t){"use strict";var n,r,i,o,a,s,c,u,l,f,p,y,d,h,v,b,m,g,w,O,S,E,_,A,N,T,j,k,P,I;return{setters:[e=>{n=e.as,r=e.d,i=e.x,o=e.o,a=e.c,s=e.w,c=e.b,u=e.f,l=e.H,f=e.J,p=e.j,y=e.K,d=e.g,h=e.r,v=e.t,b=e.F,m=e.aC,g=e.G,w=e.k},e=>{O=e._},e=>{S=e.X,E=e.d},e=>{_=e.C,A=e.r,N=e.W},e=>{T=e.F,j=e.a,k=e.D},e=>{P=e.p},e=>{I=e.b},null],execute:function(){function B(e){const t=new FileReader;return t.readAsDataURL(e),new Promise((e=>{t.onloadend=()=>{e(t.result)}}))}async function C(e,t,n=!1,r=k.Documents){const i=function(e){const t=new Date(Date.now()),n=60*t.getHours()*60+60*t.getMinutes()+t.getSeconds(),r=(t.getMonth()+1).toString().padStart(2,"0")+t.getDate().toString().padStart(2,"0")+n,i=e.split(".");if(1===i.length)return e+r;const o=i.splice(-1);return i.join(".")+r+"."+o}(t);if(!_.isNativePlatform()){const r=I({dataType:"Blob",types:[{description:"JSON Datei",accept:{"application/json":[".json"]}}]});if(!r.isSupported.value){const t=URL.createObjectURL(e),r=document.createElement("a");return r.href=t,n||(r.download=i),document.body.appendChild(r),r.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),void document.body.removeChild(r)}r.data.value=e;try{await r.saveAs({suggestedName:t}),P("Datei gespeichert: "+r.fileName.value,"success")}catch(o){}return r.fileName.value}if(await T.checkPermissions().then((e=>{if("granted"===e.publicStorage)return!0;throw Error})).catch((()=>T.requestPermissions().then((e=>"granted"===e.publicStorage)))))return T.writeFile({path:"RopeRisk/"+i,directory:r,data:await B(e),recursive:!0}).then((e=>(P("Datei gespeichert: "+e.uri,"success"),n&&j.open(e.uri,"application/pdf"),e.uri))).catch((()=>{throw P("Beim Speichern ist ein Fehler aufgetreten.","danger"),Error()}));P("Keine Erlaubnis zum Speichern von Dateien erteilt.",void 0,"middle")}var x={};
/*! *****************************************************************************
            Copyright (c) Microsoft Corporation.

            Permission to use, copy, modify, and/or distribute this software for any
            purpose with or without fee is hereby granted.

            THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
            REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
            AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
            INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
            LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
            OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
            PERFORMANCE OF THIS SOFTWARE.
            ***************************************************************************** */function L(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function R(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function U(e){return[e.schema.primKey].concat(e.schema.indexes).map((function(e){return e.src})).join(",")}function F(e,t){return new Promise((function(n,r){var i=new FileReader;i.onabort=function(e){return r(new Error("file read aborted"))},i.onerror=function(e){return r(e.target.error)},i.onload=function(e){return n(e.target.result)},"binary"===t?i.readAsArrayBuffer(e):i.readAsText(e)}))}function D(e,t){if("undefined"==typeof FileReaderSync)throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var n=new FileReaderSync;return"binary"===t?n.readAsArrayBuffer(e):n.readAsText(e)}var V="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function M(e,t){return e(t={exports:{}},t.exports),t.exports}for(var J=M((function(e,t){e.exports=function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function n(e){return function(){var n=this,r=arguments;return new Promise((function(i,o){var a=e.apply(n,r);function s(e){t(a,i,o,s,c,"next",e)}function c(e){t(a,i,o,s,c,"throw",e)}s(void 0)}))}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){return p(e)||d(e,t)||v()}function l(e){return f(e)||y(e)||h()}function f(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function p(e){if(Array.isArray(e))return e}function y(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function d(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var b=function e(t){r(this,e),this.p=new Promise(t)};b.__typeson__type__="TypesonPromise","undefined"!=typeof Symbol&&(b.prototype[Symbol.toStringTag]="TypesonPromise"),b.prototype.then=function(e,t){var n=this;return new b((function(r,i){n.p.then((function(t){r(e?e(t):t)})).catch((function(e){return t?t(e):Promise.reject(e)})).then(r,i)}))},b.prototype.catch=function(e){return this.then(null,e)},b.resolve=function(e){return new b((function(t){t(e)}))},b.reject=function(e){return new b((function(t,n){n(e)}))},["all","race"].forEach((function(e){b[e]=function(t){return new b((function(n,r){Promise[e](t.map((function(e){return e&&e.constructor&&"TypesonPromise"===e.constructor.__typeson__type__?e.p:e}))).then(n,r)}))}}));var m={}.toString,g={}.hasOwnProperty,w=Object.getPrototypeOf,O=g.toString;function S(e,t){return T(e)&&"function"==typeof e.then&&(!t||"function"==typeof e.catch)}function E(e){return m.call(e).slice(8,-1)}function _(t,n){if(!t||"object"!==e(t))return!1;var r=w(t);if(!r)return null===n;var i=g.call(r,"constructor")&&r.constructor;return"function"!=typeof i?null===n:n===i||null!==n&&O.call(i)===O.call(n)||"function"==typeof n&&"string"==typeof i.__typeson__type__&&i.__typeson__type__===n.__typeson__type__}function A(e){return!(!e||"Object"!==E(e))&&(!w(e)||_(e,Object))}function N(e){if(!e||"Object"!==E(e))return!1;var t=w(e);return!t||_(e,Object)||N(t)}function T(t){return t&&"object"===e(t)}function j(e){return e.replace(/~/g,"~0").replace(/\./g,"~1")}function k(e){return e.replace(/~1/g,".").replace(/~0/g,"~")}function P(e,t){if(""===t)return e;var n=t.indexOf(".");if(n>-1){var r=e[k(t.slice(0,n))];return void 0===r?void 0:P(r,t.slice(n+1))}return e[k(t)]}function I(e,t,n){if(""===t)return n;var r=t.indexOf(".");return r>-1?I(e[k(t.slice(0,r))],t.slice(r+1),n):(e[k(t)]=n,e)}function B(t){return null===t?"null":Array.isArray(t)?"array":e(t)}var C=Object.keys,x=Array.isArray,L={}.hasOwnProperty,R=["type","replaced","iterateIn","iterateUnsetNumeric"];function U(e,t){if(""===e.keypath)return-1;var n=e.keypath.match(/\./g)||0,r=t.keypath.match(/\./g)||0;return n&&(n=n.length),r&&(r=r.length),n>r?-1:n<r?1:e.keypath<t.keypath?-1:e.keypath>t.keypath}var F=function(){function t(e){r(this,t),this.options=e,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return o(t,[{key:"stringify",value:function(e,t,n,r){r=c({},this.options,{},r,{stringification:!0});var i=this.encapsulate(e,null,r);return x(i)?JSON.stringify(i[0],t,n):i.then((function(e){return JSON.stringify(e,t,n)}))}},{key:"stringifySync",value:function(e,t,n,r){return this.stringify(e,t,n,c({throwOnBadSyncType:!0},r,{sync:!0}))}},{key:"stringifyAsync",value:function(e,t,n,r){return this.stringify(e,t,n,c({throwOnBadSyncType:!0},r,{sync:!1}))}},{key:"parse",value:function(e,t,n){return n=c({},this.options,{},n,{parse:!0}),this.revive(JSON.parse(e,t),n)}},{key:"parseSync",value:function(e,t,n){return this.parse(e,t,c({throwOnBadSyncType:!0},n,{sync:!0}))}},{key:"parseAsync",value:function(e,t,n){return this.parse(e,t,c({throwOnBadSyncType:!0},n,{sync:!1}))}},{key:"specialTypeNames",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.returnTypeNames=!0,this.encapsulate(e,t,n)}},{key:"rootTypeName",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.iterateNone=!0,this.encapsulate(e,t,n)}},{key:"encapsulate",value:function(r,i,o){var a=(o=c({sync:!0},this.options,{},o)).sync,s=this,f={},p=[],y=[],d=[],h=!("cyclic"in o)||o.cyclic,v=o.encapsulateObserver,m=E("",r,h,i||{},d);function g(e){var n=Object.values(f);if(o.iterateNone)return n.length?n[0]:t.getJSONType(e);if(n.length){if(o.returnTypeNames)return l(new Set(n));e&&A(e)&&!L.call(e,"$types")?e.$types=f:e={$:e,$types:{$:f}}}else T(e)&&L.call(e,"$types")&&(e={$:e,$types:!0});return!o.returnTypeNames&&e}function w(e,t){return O.apply(this,arguments)}function O(){return O=n(regeneratorRuntime.mark((function e(t,r){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(r.map((function(e){return e[1].p})));case 2:return i=e.sent,e.next=5,Promise.all(i.map(function(){var e=n(regeneratorRuntime.mark((function e(n){var i,o,a,s,c,l,f,p,y,d,h,v,m,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],o=r.splice(0,1),a=u(o,1),s=a[0],c=u(s,7),l=c[0],f=c[2],p=c[3],y=c[4],d=c[5],h=c[6],v=E(l,n,f,p,i,!0,h),m=_(v,b),!l||!m){e.next=11;break}return e.next=8,v.p;case 8:return g=e.sent,y[d]=g,e.abrupt("return",w(t,i));case 11:return l?y[d]=v:t=m?v.p:v,e.abrupt("return",w(t,i));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function S(e,t,n){Object.assign(e,t);var r=R.map((function(t){var n=e[t];return delete e[t],n}));n(),R.forEach((function(t,n){e[t]=r[n]}))}function E(n,r,i,a,c,u,l){var d,h={},m=e(r),g=v?function(e){var o=l||a.type||t.getJSONType(r);v(Object.assign(e||h,{keypath:n,value:r,cyclic:i,stateObj:a,promisesData:c,resolvingTypesonPromise:u,awaitingTypesonPromise:_(r,b)},{type:o}))}:null;if(["string","boolean","number","undefined"].includes(m))return void 0===r||"number"===m&&(isNaN(r)||r===-1/0||r===1/0)?(d=a.replaced?r:N(n,r,a,c,!1,u,g))!==r&&(h={replaced:d}):d=r,g&&g(),d;if(null===r)return g&&g(),r;if(i&&!a.iterateIn&&!a.iterateUnsetNumeric&&r&&"object"===e(r)){var w=p.indexOf(r);if(!(w<0))return f[n]="#",g&&g({cyclicKeypath:y[w]}),"#"+y[w];!0===i&&(p.push(r),y.push(n))}var O,T=A(r),k=x(r),P=(T||k)&&(!s.plainObjectReplacers.length||a.replaced)||a.iterateIn?r:N(n,r,a,c,T||k,null,g);if(P!==r?(d=P,h={replaced:P}):""===n&&_(r,b)?(c.push([n,r,i,a,void 0,void 0,a.type]),d=r):k&&"object"!==a.iterateIn||"array"===a.iterateIn?(O=new Array(r.length),h={clone:O}):(["function","symbol"].includes(e(r))||"toJSON"in r||_(r,b)||_(r,Promise)||_(r,ArrayBuffer))&&!T&&"object"!==a.iterateIn?d=r:(O={},a.addLength&&(O.length=r.length),h={clone:O}),g&&g(),o.iterateNone)return O||d;if(!O)return d;if(a.iterateIn){var I=function(e){var t={ownKeys:L.call(r,e)};S(a,t,(function(){var t=n+(n?".":"")+j(e),o=E(t,r[e],Boolean(i),a,c,u);_(o,b)?c.push([t,o,Boolean(i),a,O,e,a.type]):void 0!==o&&(O[e]=o)}))};for(var B in r)I(B);g&&g({endIterateIn:!0,end:!0})}else C(r).forEach((function(e){var t=n+(n?".":"")+j(e);S(a,{ownKeys:!0},(function(){var n=E(t,r[e],Boolean(i),a,c,u);_(n,b)?c.push([t,n,Boolean(i),a,O,e,a.type]):void 0!==n&&(O[e]=n)}))})),g&&g({endIterateOwn:!0,end:!0});if(a.iterateUnsetNumeric){for(var R=r.length,U=function(e){if(!(e in r)){var t=n+(n?".":"")+e;S(a,{ownKeys:!1},(function(){var n=E(t,void 0,Boolean(i),a,c,u);_(n,b)?c.push([t,n,Boolean(i),a,O,e,a.type]):void 0!==n&&(O[e]=n)}))}},F=0;F<R;F++)U(F);g&&g({endIterateUnsetNumeric:!0,end:!0})}return O}function N(e,t,n,r,i,o,c){for(var u=i?s.plainObjectReplacers:s.nonplainObjectReplacers,l=u.length;l--;){var p=u[l];if(p.test(t,n)){var y=p.type;if(s.revivers[y]){var d=f[e];f[e]=d?[y].concat(d):y}return Object.assign(n,{type:y,replaced:!0}),!a&&p.replaceAsync||p.replace?(c&&c({replacing:!0}),E(e,p[a||!p.replaceAsync?"replace":"replaceAsync"](t,n),h&&"readonly",n,r,o,y)):(c&&c({typeDetected:!0}),E(e,t,h&&"readonly",n,r,o,y))}}return t}return d.length?a&&o.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(w(m,d)).then(g):!a&&o.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():o.stringification&&a?[g(m)]:a?g(m):Promise.resolve(g(m))}},{key:"encapsulateSync",value:function(e,t,n){return this.encapsulate(e,t,c({throwOnBadSyncType:!0},n,{sync:!0}))}},{key:"encapsulateAsync",value:function(e,t,n){return this.encapsulate(e,t,c({throwOnBadSyncType:!0},n,{sync:!1}))}},{key:"revive",value:function(e,t){var n=e&&e.$types;if(!n)return e;if(!0===n)return e.$;var r=(t=c({sync:!0},this.options,{},t)).sync,i=[],o={},a=!0;n.$&&A(n.$)&&(e=e.$,n=n.$,a=!1);var s=this;function l(e,t){var n=u(s.revivers[e]||[],1)[0];if(!n)throw new Error("Unregistered type: "+e);return r&&!("revive"in n)?t:n[r&&n.revive?"revive":!r&&n.reviveAsync?"reviveAsync":"revive"](t,o)}function f(){var t=[];if(Object.entries(n).forEach((function(e){var r=u(e,2),i=r[0],o=r[1];"#"!==o&&[].concat(o).forEach((function(e){u(s.revivers[e]||[null,{}],2)[1].plain&&(t.push({keypath:i,type:e}),delete n[i])}))})),t.length)return t.sort(U).reduce((function t(n,r){var i=r.keypath,o=r.type;if(S(n))return n.then((function(e){return t(e,{keypath:i,type:o})}));var a=P(e,i);if(_(a=l(o,a),b))return a.then((function(t){var n=I(e,i,t);n===t&&(e=n)}));var s=I(e,i,a);s===a&&(e=s)}),void 0)}var p=[];function y(e,t,r,o,s){if(!a||"$types"!==e){var c=n[e],f=x(t);if(f||A(t)){var d=f?new Array(t.length):{};for(C(t).forEach((function(n){var i=y(e+(e?".":"")+j(n),t[n],r||d,d,n),o=function(e){return _(e,D)?d[n]=void 0:void 0!==e&&(d[n]=e),e};_(i,b)?p.push(i.then((function(e){return o(e)}))):o(i)})),t=d;i.length;){var h=u(i[0],4),v=h[0],m=h[1],g=h[2],w=h[3],O=P(v,m);if(void 0===O)break;g[w]=O,i.splice(0,1)}}if(!c)return t;if("#"===c){var S=P(r,t.slice(1));return void 0===S&&i.push([r,t.slice(1),o,s]),S}return[].concat(c).reduce((function e(t,n){return _(t,b)?t.then((function(t){return e(t,n)})):l(n,t)}),t)}}function d(e){return _(e,D)?void 0:e}var h,v=f();return _(v,b)?h=v.then((function(){return e})):(h=y("",e,null),p.length&&(h=b.resolve(h).then((function(e){return b.all([e].concat(p))})).then((function(e){return u(e,1)[0]})))),S(h)?r&&t.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():_(h,b)?h.p.then(d):h:!r&&t.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():r?d(h):Promise.resolve(d(h))}},{key:"reviveSync",value:function(e,t){return this.revive(e,c({throwOnBadSyncType:!0},t,{sync:!0}))}},{key:"reviveAsync",value:function(e,t){return this.revive(e,c({throwOnBadSyncType:!0},t,{sync:!1}))}},{key:"register",value:function(e,n){return n=n||{},[].concat(e).forEach((function e(r){var i=this;if(x(r))return r.map((function(t){return e.call(i,t)}));r&&C(r).forEach((function(e){if("#"===e)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(t.JSON_TYPES.includes(e))throw new TypeError("Plain JSON object types are reserved as type names");var i=r[e],o=i&&i.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,a=o.filter((function(t){return t.type===e}));if(a.length&&(o.splice(o.indexOf(a[0]),1),delete this.revivers[e],delete this.types[e]),"function"==typeof i){var s=i;i={test:function(e){return e&&e.constructor===s},replace:function(e){return c({},e)},revive:function(e){return Object.assign(Object.create(s.prototype),e)}}}else if(x(i)){var l=u(i,3);i={test:l[0],replace:l[1],revive:l[2]}}if(i&&i.test){var f={type:e,test:i.test.bind(i)};i.replace&&(f.replace=i.replace.bind(i)),i.replaceAsync&&(f.replaceAsync=i.replaceAsync.bind(i));var p="number"==typeof n.fallback?n.fallback:n.fallback?0:1/0;if(i.testPlainObjects?this.plainObjectReplacers.splice(p,0,f):this.nonplainObjectReplacers.splice(p,0,f),i.revive||i.reviveAsync){var y={};i.revive&&(y.revive=i.revive.bind(i)),i.reviveAsync&&(y.reviveAsync=i.reviveAsync.bind(i)),this.revivers[e]=[y,{plain:i.testPlainObjects}]}this.types[e]=i}}),this)}),this),this}}]),t}(),D=function e(){r(this,e)};return D.__typeson__type__="TypesonUndefined",F.Undefined=D,F.Promise=b,F.isThenable=S,F.toStringTag=E,F.hasConstructorOf=_,F.isObject=T,F.isPlainObject=A,F.isUserObject=N,F.escapeKeyPathComponent=j,F.unescapeKeyPathComponent=k,F.getByKeyPath=P,F.getJSONType=B,F.JSON_TYPES=["null","boolean","number","string","array","object"],F}()})),K=M((function(e,t){e.exports=function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=function e(t){c(this,e),this.p=new Promise(t)};b.__typeson__type__="TypesonPromise","undefined"!=typeof Symbol&&(b.prototype[Symbol.toStringTag]="TypesonPromise"),b.prototype.then=function(e,t){var n=this;return new b((function(r,i){n.p.then((function(t){r(e?e(t):t)})).catch((function(e){return t?t(e):Promise.reject(e)})).then(r,i)}))},b.prototype.catch=function(e){return this.then(null,e)},b.resolve=function(e){return new b((function(t){t(e)}))},b.reject=function(e){return new b((function(t,n){n(e)}))},["all","race"].forEach((function(e){b[e]=function(t){return new b((function(n,r){Promise[e](t.map((function(e){return e&&e.constructor&&"TypesonPromise"===e.constructor.__typeson__type__?e.p:e}))).then(n,r)}))}}));var m={}.toString,g={}.hasOwnProperty,w=Object.getPrototypeOf,O=g.toString;function S(e,t){return N(e)&&"function"==typeof e.then&&(!t||"function"==typeof e.catch)}function E(e){return m.call(e).slice(8,-1)}function _(e,t){if(!e||"object"!==s(e))return!1;var n=w(e);if(!n)return null===t;var r=g.call(n,"constructor")&&n.constructor;return"function"!=typeof r?null===t:t===r||null!==t&&O.call(r)===O.call(t)||"function"==typeof t&&"string"==typeof r.__typeson__type__&&r.__typeson__type__===t.__typeson__type__}function A(e){return!(!e||"Object"!==E(e))&&(!w(e)||_(e,Object))}function N(e){return e&&"object"===s(e)}function T(e){return e.replace(/~/g,"~0").replace(/\./g,"~1")}function j(e){return e.replace(/~1/g,".").replace(/~0/g,"~")}function k(e,t){if(""===t)return e;var n=t.indexOf(".");if(n>-1){var r=e[j(t.slice(0,n))];return void 0===r?void 0:k(r,t.slice(n+1))}return e[j(t)]}function P(e,t,n){if(""===t)return n;var r=t.indexOf(".");return r>-1?P(e[j(t.slice(0,r))],t.slice(r+1),n):(e[j(t)]=n,e)}function I(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var B=Object.keys,C=Array.isArray,x={}.hasOwnProperty,L=["type","replaced","iterateIn","iterateUnsetNumeric"];function R(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(r){return Promise.reject(r)}}}function U(e,t){if(""===e.keypath)return-1;var n=e.keypath.match(/\./g)||0,r=t.keypath.match(/\./g)||0;return n&&(n=n.length),r&&(r=r.length),n>r?-1:n<r?1:e.keypath<t.keypath?-1:e.keypath>t.keypath}var F=function(){function e(t){c(this,e),this.options=t,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return t=e,n=[{key:"stringify",value:function(e,t,n,r){r=p(p(p({},this.options),r),{},{stringification:!0});var i=this.encapsulate(e,null,r);return C(i)?JSON.stringify(i[0],t,n):i.then((function(e){return JSON.stringify(e,t,n)}))}},{key:"stringifySync",value:function(e,t,n,r){return this.stringify(e,t,n,p(p({throwOnBadSyncType:!0},r),{},{sync:!0}))}},{key:"stringifyAsync",value:function(e,t,n,r){return this.stringify(e,t,n,p(p({throwOnBadSyncType:!0},r),{},{sync:!1}))}},{key:"parse",value:function(e,t,n){return n=p(p(p({},this.options),n),{},{parse:!0}),this.revive(JSON.parse(e,t),n)}},{key:"parseSync",value:function(e,t,n){return this.parse(e,t,p(p({throwOnBadSyncType:!0},n),{},{sync:!0}))}},{key:"parseAsync",value:function(e,t,n){return this.parse(e,t,p(p({throwOnBadSyncType:!0},n),{},{sync:!1}))}},{key:"specialTypeNames",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.returnTypeNames=!0,this.encapsulate(e,t,n)}},{key:"rootTypeName",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.iterateNone=!0,this.encapsulate(e,t,n)}},{key:"encapsulate",value:function(t,n,r){var i=R((function(e,t){return I(Promise.all(t.map((function(e){return e[1].p}))),(function(n){return I(Promise.all(n.map(R((function(n){var r,o,a=!1,s=[],c=y(t.splice(0,1),1),u=y(c[0],7),l=u[0],f=u[2],p=u[3],d=u[4],h=u[5],v=u[6],m=O(l,n,f,p,s,!0,v),g=_(m,b);return r=function(t){return a?t:(l?d[h]=m:e=g?m.p:m,i(e,s))},(o=function(){if(l&&g)return I(m.p,(function(t){return d[h]=t,a=!0,i(e,s)}))}())&&o.then?o.then(r):r(o)})))),(function(){return e}))}))})),o=(r=p(p({sync:!0},this.options),r)).sync,a=this,c={},u=[],l=[],f=[],h=!("cyclic"in r)||r.cyclic,v=r.encapsulateObserver,m=O("",t,h,n||{},f);function g(t){var n=Object.values(c);if(r.iterateNone)return n.length?n[0]:e.getJSONType(t);if(n.length){if(r.returnTypeNames)return d(new Set(n));t&&A(t)&&!x.call(t,"$types")?t.$types=c:t={$:t,$types:{$:c}}}else N(t)&&x.call(t,"$types")&&(t={$:t,$types:!0});return!r.returnTypeNames&&t}function w(e,t,n){Object.assign(e,t);var r=L.map((function(t){var n=e[t];return delete e[t],n}));n(),L.forEach((function(t,n){e[t]=r[n]}))}function O(t,n,i,o,f,p,y){var d,h={},m=s(n),g=v?function(r){var a=y||o.type||e.getJSONType(n);v(Object.assign(r||h,{keypath:t,value:n,cyclic:i,stateObj:o,promisesData:f,resolvingTypesonPromise:p,awaitingTypesonPromise:_(n,b)},{type:a}))}:null;if(["string","boolean","number","undefined"].includes(m))return void 0===n||Number.isNaN(n)||n===Number.NEGATIVE_INFINITY||n===Number.POSITIVE_INFINITY?(d=o.replaced?n:S(t,n,o,f,!1,p,g))!==n&&(h={replaced:d}):d=n,g&&g(),d;if(null===n)return g&&g(),n;if(i&&!o.iterateIn&&!o.iterateUnsetNumeric&&n&&"object"===s(n)){var E=u.indexOf(n);if(!(E<0))return c[t]="#",g&&g({cyclicKeypath:l[E]}),"#"+l[E];!0===i&&(u.push(n),l.push(t))}var N,j=A(n),k=C(n),P=(j||k)&&(!a.plainObjectReplacers.length||o.replaced)||o.iterateIn?n:S(t,n,o,f,j||k,null,g);if(P!==n?(d=P,h={replaced:P}):""===t&&_(n,b)?(f.push([t,n,i,o,void 0,void 0,o.type]),d=n):k&&"object"!==o.iterateIn||"array"===o.iterateIn?(N=new Array(n.length),h={clone:N}):(["function","symbol"].includes(s(n))||"toJSON"in n||_(n,b)||_(n,Promise)||_(n,ArrayBuffer))&&!j&&"object"!==o.iterateIn?d=n:(N={},o.addLength&&(N.length=n.length),h={clone:N}),g&&g(),r.iterateNone)return N||d;if(!N)return d;if(o.iterateIn){var I=function(e){var r={ownKeys:x.call(n,e)};w(o,r,(function(){var r=t+(t?".":"")+T(e),a=O(r,n[e],Boolean(i),o,f,p);_(a,b)?f.push([r,a,Boolean(i),o,N,e,o.type]):void 0!==a&&(N[e]=a)}))};for(var L in n)I(L);g&&g({endIterateIn:!0,end:!0})}else B(n).forEach((function(e){var r=t+(t?".":"")+T(e);w(o,{ownKeys:!0},(function(){var t=O(r,n[e],Boolean(i),o,f,p);_(t,b)?f.push([r,t,Boolean(i),o,N,e,o.type]):void 0!==t&&(N[e]=t)}))})),g&&g({endIterateOwn:!0,end:!0});if(o.iterateUnsetNumeric){for(var R=n.length,U=function(e){if(!(e in n)){var r=t+(t?".":"")+e;w(o,{ownKeys:!1},(function(){var t=O(r,void 0,Boolean(i),o,f,p);_(t,b)?f.push([r,t,Boolean(i),o,N,e,o.type]):void 0!==t&&(N[e]=t)}))}},F=0;F<R;F++)U(F);g&&g({endIterateUnsetNumeric:!0,end:!0})}return N}function S(e,t,n,r,i,s,u){for(var l=i?a.plainObjectReplacers:a.nonplainObjectReplacers,f=l.length;f--;){var p=l[f];if(p.test(t,n)){var y=p.type;if(a.revivers[y]){var d=c[e];c[e]=d?[y].concat(d):y}return Object.assign(n,{type:y,replaced:!0}),!o&&p.replaceAsync||p.replace?(u&&u({replacing:!0}),O(e,p[o||!p.replaceAsync?"replace":"replaceAsync"](t,n),h&&"readonly",n,r,s,y)):(u&&u({typeDetected:!0}),O(e,t,h&&"readonly",n,r,s,y))}}return t}return f.length?o&&r.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(i(m,f)).then(g):!o&&r.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():r.stringification&&o?[g(m)]:o?g(m):Promise.resolve(g(m))}},{key:"encapsulateSync",value:function(e,t,n){return this.encapsulate(e,t,p(p({throwOnBadSyncType:!0},n),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(e,t,n){return this.encapsulate(e,t,p(p({throwOnBadSyncType:!0},n),{},{sync:!1}))}},{key:"revive",value:function(e,t){var n=e&&e.$types;if(!n)return e;if(!0===n)return e.$;var r=(t=p(p({sync:!0},this.options),t)).sync,i=[],o={},a=!0;n.$&&A(n.$)&&(e=e.$,n=n.$,a=!1);var s=this;function c(e,t){var n=y(s.revivers[e]||[],1)[0];if(!n)throw new Error("Unregistered type: "+e);return r&&!("revive"in n)?t:n[r&&n.revive?"revive":!r&&n.reviveAsync?"reviveAsync":"revive"](t,o)}var u=[];function l(e){return _(e,D)?void 0:e}var f,d=function(){var t=[];if(Object.entries(n).forEach((function(e){var r=y(e,2),i=r[0],o=r[1];"#"!==o&&[].concat(o).forEach((function(e){y(s.revivers[e]||[null,{}],2)[1].plain&&(t.push({keypath:i,type:e}),delete n[i])}))})),t.length)return t.sort(U).reduce((function t(n,r){var i=r.keypath,o=r.type;if(S(n))return n.then((function(e){return t(e,{keypath:i,type:o})}));var a=k(e,i);if(_(a=c(o,a),b))return a.then((function(t){var n=P(e,i,t);n===t&&(e=n)}));var s=P(e,i,a);s===a&&(e=s)}),void 0)}();return _(d,b)?f=d.then((function(){return e})):(f=function e(t,r,o,s,l){if(!a||"$types"!==t){var f=n[t],p=C(r);if(p||A(r)){var d=p?new Array(r.length):{};for(B(r).forEach((function(n){var i=e(t+(t?".":"")+T(n),r[n],o||d,d,n),a=function(e){return _(e,D)?d[n]=void 0:void 0!==e&&(d[n]=e),e};_(i,b)?u.push(i.then((function(e){return a(e)}))):a(i)})),r=d;i.length;){var h=y(i[0],4),v=h[0],m=h[1],g=h[2],w=h[3],O=k(v,m);if(void 0===O)break;g[w]=O,i.splice(0,1)}}if(!f)return r;if("#"===f){var S=k(o,r.slice(1));return void 0===S&&i.push([o,r.slice(1),s,l]),S}return[].concat(f).reduce((function e(t,n){return _(t,b)?t.then((function(t){return e(t,n)})):c(n,t)}),r)}}("",e,null),u.length&&(f=b.resolve(f).then((function(e){return b.all([e].concat(u))})).then((function(e){return y(e,1)[0]})))),S(f)?r&&t.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():_(f,b)?f.p.then(l):f:!r&&t.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():r?l(f):Promise.resolve(l(f))}},{key:"reviveSync",value:function(e,t){return this.revive(e,p(p({throwOnBadSyncType:!0},t),{},{sync:!0}))}},{key:"reviveAsync",value:function(e,t){return this.revive(e,p(p({throwOnBadSyncType:!0},t),{},{sync:!1}))}},{key:"register",value:function(t,n){return n=n||{},[].concat(t).forEach((function t(r){var i=this;if(C(r))return r.map((function(e){return t.call(i,e)}));r&&B(r).forEach((function(t){if("#"===t)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(e.JSON_TYPES.includes(t))throw new TypeError("Plain JSON object types are reserved as type names");var i=r[t],o=i&&i.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,a=o.filter((function(e){return e.type===t}));if(a.length&&(o.splice(o.indexOf(a[0]),1),delete this.revivers[t],delete this.types[t]),"function"==typeof i){var s=i;i={test:function(e){return e&&e.constructor===s},replace:function(e){return p({},e)},revive:function(e){return Object.assign(Object.create(s.prototype),e)}}}else if(C(i)){var c=y(i,3);i={test:c[0],replace:c[1],revive:c[2]}}if(i&&i.test){var u={type:t,test:i.test.bind(i)};i.replace&&(u.replace=i.replace.bind(i)),i.replaceAsync&&(u.replaceAsync=i.replaceAsync.bind(i));var l="number"==typeof n.fallback?n.fallback:n.fallback?0:Number.POSITIVE_INFINITY;if(i.testPlainObjects?this.plainObjectReplacers.splice(l,0,u):this.nonplainObjectReplacers.splice(l,0,u),i.revive||i.reviveAsync){var f={};i.revive&&(f.revive=i.revive.bind(i)),i.reviveAsync&&(f.reviveAsync=i.reviveAsync.bind(i)),this.revivers[t]=[f,{plain:i.testPlainObjects}]}this.types[t]=i}}),this)}),this),this}}],n&&u(t.prototype,n),r&&u(t,r),e;var t,n,r}(),D=function e(){c(this,e)};D.__typeson__type__="TypesonUndefined",F.Undefined=D,F.Promise=b,F.isThenable=S,F.toStringTag=E,F.hasConstructorOf=_,F.isObject=N,F.isPlainObject=A,F.isUserObject=function e(t){if(!t||"Object"!==E(t))return!1;var n=w(t);return!n||_(t,Object)||e(n)},F.escapeKeyPathComponent=T,F.unescapeKeyPathComponent=j,F.getByKeyPath=k,F.getJSONType=function(e){return null===e?"null":Array.isArray(e)?"array":s(e)},F.JSON_TYPES=["null","boolean","number","string","array","object"];for(var M={userObject:{test:function(e,t){return F.isUserObject(e)},replace:function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)},revive:function(e){return e}}},J=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(e,t){return!!Array.isArray(e)&&(Object.keys(e).some((function(e){return String(Number.parseInt(e))!==e}))&&(t.iterateIn="object",t.addLength=!0),!0)},replace:function(e,t){return t.iterateUnsetNumeric=!0,e},revive:function(e){if(Array.isArray(e))return e;var t=[];return Object.keys(e).forEach((function(n){var r=e[n];t[n]=r})),t}}},{sparseUndefined:{test:function(e,t){return void 0===e&&!1===t.ownKeys},replace:function(e){return 0},revive:function(e){}}}],K={undef:{test:function(e,t){return void 0===e&&(t.ownKeys||!("ownKeys"in t))},replace:function(e){return 0},revive:function(e){return new F.Undefined}}},$={StringObject:{test:function(t){return"String"===F.toStringTag(t)&&"object"===e(t)},replace:function(e){return String(e)},revive:function(e){return new String(e)}},BooleanObject:{test:function(t){return"Boolean"===F.toStringTag(t)&&"object"===e(t)},replace:function(e){return Boolean(e)},revive:function(e){return new Boolean(e)}},NumberObject:{test:function(t){return"Number"===F.toStringTag(t)&&"object"===e(t)},replace:function(e){return Number(e)},revive:function(e){return new Number(e)}}},G=[{nan:{test:function(e){return Number.isNaN(e)},replace:function(e){return"NaN"},revive:function(e){return Number.NaN}}},{infinity:{test:function(e){return e===Number.POSITIVE_INFINITY},replace:function(e){return"Infinity"},revive:function(e){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(e){return e===Number.NEGATIVE_INFINITY},replace:function(e){return"-Infinity"},revive:function(e){return Number.NEGATIVE_INFINITY}}}],Y={date:{test:function(e){return"Date"===F.toStringTag(e)},replace:function(e){var t=e.getTime();return Number.isNaN(t)?"NaN":t},revive:function(e){return"NaN"===e?new Date(Number.NaN):new Date(e)}}},q={regexp:{test:function(e){return"RegExp"===F.toStringTag(e)},replace:function(e){return{source:e.source,flags:(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":"")}},revive:function(e){var t=e.source,n=e.flags;return new RegExp(t,n)}}},z={map:{test:function(e){return"Map"===F.toStringTag(e)},replace:function(e){return o(e.entries())},revive:function(e){return new Map(e)}}},H={set:{test:function(e){return"Set"===F.toStringTag(e)},replace:function(e){return o(e.values())},revive:function(e){return new Set(e)}}},X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",W=new Uint8Array(256),Q=0;Q<X.length;Q++)W[X.charCodeAt(Q)]=Q;var Z=function(e,t,n){null==n&&(n=e.byteLength);for(var r=new Uint8Array(e,t||0,n),i=r.length,o="",a=0;a<i;a+=3)o+=X[r[a]>>2],o+=X[(3&r[a])<<4|r[a+1]>>4],o+=X[(15&r[a+1])<<2|r[a+2]>>6],o+=X[63&r[a+2]];return i%3==2?o=o.slice(0,-1)+"=":i%3==1&&(o=o.slice(0,-2)+"=="),o},ee=function(e){var t,n,r,i,o=e.length,a=.75*e.length,s=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);for(var c=new ArrayBuffer(a),u=new Uint8Array(c),l=0;l<o;l+=4)t=W[e.charCodeAt(l)],n=W[e.charCodeAt(l+1)],r=W[e.charCodeAt(l+2)],i=W[e.charCodeAt(l+3)],u[s++]=t<<2|n>>4,u[s++]=(15&n)<<4|r>>2,u[s++]=(3&r)<<6|63&i;return c},te={arraybuffer:{test:function(e){return"ArrayBuffer"===F.toStringTag(e)},replace:function(e,t){t.buffers||(t.buffers=[]);var n=t.buffers.indexOf(e);return n>-1?{index:n}:(t.buffers.push(e),Z(e))},revive:function(t,n){if(n.buffers||(n.buffers=[]),"object"===e(t))return n.buffers[t.index];var r=ee(t);return n.buffers.push(r),r}}},ne="undefined"==typeof self?V:self,re={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach((function(e){var t=e,n=ne[t];n&&(re[e.toLowerCase()]={test:function(e){return F.toStringTag(e)===t},replace:function(e,t){var n=e.buffer,r=e.byteOffset,i=e.length;t.buffers||(t.buffers=[]);var o=t.buffers.indexOf(n);return o>-1?{index:o,byteOffset:r,length:i}:(t.buffers.push(n),{encoded:Z(n),byteOffset:r,length:i})},revive:function(e,t){t.buffers||(t.buffers=[]);var r,i=e.byteOffset,o=e.length,a=e.encoded,s=e.index;return"index"in e?r=t.buffers[s]:(r=ee(a),t.buffers.push(r)),new n(r,i,o)}})}));var ie={dataview:{test:function(e){return"DataView"===F.toStringTag(e)},replace:function(e,t){var n=e.buffer,r=e.byteOffset,i=e.byteLength;t.buffers||(t.buffers=[]);var o=t.buffers.indexOf(n);return o>-1?{index:o,byteOffset:r,byteLength:i}:(t.buffers.push(n),{encoded:Z(n),byteOffset:r,byteLength:i})},revive:function(e,t){t.buffers||(t.buffers=[]);var n,r=e.byteOffset,i=e.byteLength,o=e.encoded,a=e.index;return"index"in e?n=t.buffers[a]:(n=ee(o),t.buffers.push(n)),new DataView(n,r,i)}}},oe={IntlCollator:{test:function(e){return F.hasConstructorOf(e,Intl.Collator)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.Collator(e.locale,e)}},IntlDateTimeFormat:{test:function(e){return F.hasConstructorOf(e,Intl.DateTimeFormat)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.DateTimeFormat(e.locale,e)}},IntlNumberFormat:{test:function(e){return F.hasConstructorOf(e,Intl.NumberFormat)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.NumberFormat(e.locale,e)}}};function ae(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer}var se={file:{test:function(e){return"File"===F.toStringTag(e)},replace:function(e){var t=new XMLHttpRequest;if(t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("GET",URL.createObjectURL(e),!1),t.send(),200!==t.status&&0!==t.status)throw new Error("Bad File access: "+t.status);return{type:e.type,stringContents:t.responseText,name:e.name,lastModified:e.lastModified}},revive:function(e){var t=e.name,n=e.type,r=e.stringContents,i=e.lastModified;return new File([ae(r)],t,{type:n,lastModified:i})},replaceAsync:function(e){return new F.Promise((function(t,n){var r=new FileReader;r.addEventListener("load",(function(){t({type:e.type,stringContents:r.result,name:e.name,lastModified:e.lastModified})})),r.addEventListener("error",(function(){n(r.error)})),r.readAsBinaryString(e)}))}}},ce={bigint:{test:function(e){return"bigint"==typeof e},replace:function(e){return String(e)},revive:function(e){return BigInt(e)}}},ue={bigintObject:{test:function(t){return"object"===e(t)&&F.hasConstructorOf(t,BigInt)},replace:function(e){return String(e)},revive:function(e){return new Object(BigInt(e))}}},le={cryptokey:{test:function(e){return"CryptoKey"===F.toStringTag(e)&&e.extractable},replaceAsync:function(e){return new F.Promise((function(t,n){crypto.subtle.exportKey("jwk",e).catch((function(e){n(e)})).then((function(n){t({jwk:n,algorithm:e.algorithm,usages:e.usages})}))}))},revive:function(e){var t=e.jwk,n=e.algorithm,r=e.usages;return crypto.subtle.importKey("jwk",t,n,!0,r)}}};return[M,K,J,$,G,Y,q,{imagedata:{test:function(e){return"ImageData"===F.toStringTag(e)},replace:function(e){return{array:o(e.data),width:e.width,height:e.height}},revive:function(e){return new ImageData(new Uint8ClampedArray(e.array),e.width,e.height)}}},{imagebitmap:{test:function(e){return"ImageBitmap"===F.toStringTag(e)||e&&e.dataset&&"ImageBitmap"===e.dataset.toStringTag},replace:function(e){var t=document.createElement("canvas");return t.getContext("2d").drawImage(e,0,0),t.toDataURL()},revive:function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),r=document.createElement("img");return r.addEventListener("load",(function(){n.drawImage(r,0,0)})),r.src=e,t},reviveAsync:function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),r=document.createElement("img");return r.addEventListener("load",(function(){n.drawImage(r,0,0)})),r.src=e,createImageBitmap(t)}}},se,{file:se.file,filelist:{test:function(e){return"FileList"===F.toStringTag(e)},replace:function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e.item(n);return t},revive:function(e){return new(function(){function e(){t(this,e),this._files=arguments[0],this.length=this._files.length}return r=e,i=[{key:"item",value:function(e){return this._files[e]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}],i&&n(r.prototype,i),o&&n(r,o),e;var r,i,o}())(e)}}},{blob:{test:function(e){return"Blob"===F.toStringTag(e)},replace:function(e){var t=new XMLHttpRequest;if(t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("GET",URL.createObjectURL(e),!1),t.send(),200!==t.status&&0!==t.status)throw new Error("Bad Blob access: "+t.status);return{type:e.type,stringContents:t.responseText}},revive:function(e){var t=e.type,n=e.stringContents;return new Blob([ae(n)],{type:t})},replaceAsync:function(e){return new F.Promise((function(t,n){var r=new FileReader;r.addEventListener("load",(function(){t({type:e.type,stringContents:r.result})})),r.addEventListener("error",(function(){n(r.error)})),r.readAsBinaryString(e)}))}}}].concat("function"==typeof Map?z:[],"function"==typeof Set?H:[],"function"==typeof ArrayBuffer?te:[],"function"==typeof Uint8Array?re:[],"function"==typeof DataView?ie:[],"undefined"!=typeof Intl?oe:[],"undefined"!=typeof crypto?le:[],"undefined"!=typeof BigInt?[ce,ue]:[])}()})),$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",G=new Uint8Array(256),Y=0;Y<64;Y++)G[$.codePointAt(Y)]=Y;var q=function(e,t,n){null==n&&(n=e.byteLength);for(var r=new Uint8Array(e,t||0,n),i=r.length,o="",a=0;a<i;a+=3)o+=$[r[a]>>2],o+=$[(3&r[a])<<4|r[a+1]>>4],o+=$[(15&r[a+1])<<2|r[a+2]>>6],o+=$[63&r[a+2]];return i%3==2?o=o.slice(0,-1)+"=":i%3==1&&(o=o.slice(0,-2)+"=="),o},z=function(e){var t,n,r,i,o=e.length,a=.75*e.length,s=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);for(var c=new ArrayBuffer(a),u=new Uint8Array(c),l=0;l<o;l+=4)t=G[e.codePointAt(l)],n=G[e.codePointAt(l+1)],r=G[e.codePointAt(l+2)],i=G[e.codePointAt(l+3)],u[s++]=t<<2|n>>4,u[s++]=(15&n)<<4|r>>2,u[s++]=(3&r)<<6|63&i;return c},H="undefined"==typeof self?global:self,X={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach((function(e){var t=e,n=H[t];n&&(X[e.toLowerCase()+"2"]={test:function(e){return J.toStringTag(e)===t},replace:function(e){return{buffer:e.buffer,byteOffset:e.byteOffset,length:e.length}},revive:function(e){var t=e.buffer,r=e.byteOffset,i=e.length;return new n(t,r,i)}})}));var W={arraybuffer:{test:function(e){return"ArrayBuffer"===J.toStringTag(e)},replace:function(e){return q(e,0,e.byteLength)},revive:function(e){return z(e)}}},Q=(new J).register(K),Z="FileReaderSync"in self,ee=[],te=0;function ne(e,t){return L(this,void 0,void 0,(function(){function n(){return L(this,void 0,void 0,(function(){var n,u,l,f,p,y,d,h,v;return R(this,(function(b){switch(b.label){case 0:return[4,Promise.all(e.tables.map((function(e){return e.count()})))];case 1:(n=b.sent()).forEach((function(e,t){return i[t].rowCount=e})),c.totalRows=n.reduce((function(e,t){return e+t})),u=JSON.stringify(a,void 0,o?2:void 0),l=u.lastIndexOf("]"),f=u.substring(0,l),r.push(f),p=t.filter,y=function(n){var i,a,u,l,f,y,d,h,v,b,m;return R(this,(function(g){switch(g.label){case 0:i=e.table(n),a=i.schema.primKey,u=!!a.keyPath,l=t.numRowsPerChunk||2e3,f=u?{tableName:i.name,inbound:!0,rows:[]}:{tableName:i.name,inbound:!1,rows:[]},y=JSON.stringify(f,void 0,o?2:void 0),o&&(y=y.split("\n").join("\n    ")),d=y.lastIndexOf("]"),r.push(y.substring(0,d)),h=null,v=0,b=!0,m=function(){var e,t,f,y,d,m,g,w;return R(this,(function(O){switch(O.label){case 0:return s&&S.ignoreTransaction((function(){return s(c)})),[4,(e=null==h?i.limit(l):i.where(":id").above(h).limit(l)).toArray()];case 1:return 0===(t=O.sent()).length?[2,"break"]:(null!=h&&v>0&&(r.push(","),o&&r.push("\n      ")),b=t.length===l,u?(f=p?t.filter((function(e){return p(n,e)})):t,y=f.map((function(e){return Q.encapsulate(e)})),Q.mustFinalize()?[4,S.waitFor(Q.finalize(y))]:[3,3]):[3,4]);case 2:O.sent(),O.label=3;case 3:return w=JSON.stringify(y,void 0,o?2:void 0),o&&(w=w.split("\n").join("\n      ")),r.push(new Blob([w.substring(1,w.length-1)])),v=f.length,h=t.length>0?S.getByKeyPath(t[t.length-1],a.keyPath):null,[3,8];case 4:return[4,e.primaryKeys()];case 5:return d=O.sent(),m=d.map((function(e,n){return[e,t[n]]})),p&&(m=m.filter((function(e){var t=e[0],r=e[1];return p(n,r,t)}))),g=m.map((function(e){return Q.encapsulate(e)})),Q.mustFinalize()?[4,S.waitFor(Q.finalize(g))]:[3,7];case 6:O.sent(),O.label=7;case 7:w=JSON.stringify(g,void 0,o?2:void 0),o&&(w=w.split("\n").join("\n      ")),r.push(new Blob([w.substring(1,w.length-1)])),v=m.length,h=d.length>0?d[d.length-1]:null,O.label=8;case 8:return c.completedRows+=t.length,[2]}}))},g.label=1;case 1:return b?[5,m()]:[3,3];case 2:return"break"===g.sent()?[3,3]:[3,1];case 3:return r.push(y.substr(d)),c.completedTables+=1,c.completedTables<c.totalTables&&r.push(","),[2]}}))},d=0,h=i,b.label=2;case 2:return d<h.length?(v=h[d].name,[5,y(v)]):[3,5];case 3:b.sent(),b.label=4;case 4:return d++,[3,2];case 5:return r.push(u.substr(l)),c.done=!0,s&&S.ignoreTransaction((function(){return s(c)})),[2]}}))}))}var r,i,o,a,s,c;return R(this,(function(u){switch(u.label){case 0:t=t||{},r=[],i=e.tables.map((function(e){return{name:e.name,schema:U(e),rowCount:0}})),o=t.prettyJson,a={formatName:"dexie",formatVersion:1,data:{databaseName:e.name,databaseVersion:e.verno,tables:i,data:[]}},s=t.progressCallback,c={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:e.tables.length},u.label=1;case 1:return u.trys.push([1,,6,7]),t.noTransaction?[4,n()]:[3,3];case 2:return u.sent(),[3,5];case 3:return[4,e.transaction("r",e.tables,n)];case 4:u.sent(),u.label=5;case 5:return[3,7];case 6:return Q.finalize(),[7];case 7:return[2,new Blob(r,{type:"text/json"})]}}))}))}Q.register([W,X,{blob2:{test:function(e){return"Blob"===J.toStringTag(e)},replace:function(e){if(e.isClosed)throw new Error("The Blob is closed");if(Z){var t=D(e,"binary"),n=q(t,0,t.byteLength);return{type:e.type,data:n}}ee.push(e);var r={type:e.type,data:{start:te,end:te+e.size}};return te+=e.size,r},finalize:function(e,t){e.data=q(t,0,t.byteLength)},revive:function(e){var t=e.type,n=e.data;return new Blob([z(n)],{type:t})}}}]),Q.mustFinalize=function(){return ee.length>0},Q.finalize=function(e){return L(void 0,void 0,void 0,(function(){var t,n,r,i,o,a,s,c,u,l;return R(this,(function(f){switch(f.label){case 0:return[4,F(new Blob(ee),"binary")];case 1:if(t=f.sent(),e)for(n=0,r=e;n<r.length;n++)if((i=r[n]).$types)for(s in o=i.$types,(a=o.$)&&(o=o.$),o)c=o[s],(u=Q.types[c])&&u.finalize&&(l=S.getByKeyPath(i,a?"$."+s:s),u.finalize(l,t.slice(l.start,l.end)));return ee=[],[2]}}))}))};var re=1,ie=function(){},oe=M((function(e,t){!function(e){var t="object"==typeof process&&x?x:self;e.parser=function(e){return new l(e)},e.CParser=l,e.CStream=f,e.createStream=function(e){return new f(e)},e.MAX_BUFFER_LENGTH=10485760,e.DEBUG="debug"===t.CDEBUG,e.INFO="debug"===t.CDEBUG||"info"===t.CDEBUG,e.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var n,r={textNode:void 0,numberNode:""},i=e.EVENTS.filter((function(e){return"error"!==e&&"end"!==e})),o=0;for(var a in e.STATE={BEGIN:o++,VALUE:o++,OPEN_OBJECT:o++,CLOSE_OBJECT:o++,OPEN_ARRAY:o++,CLOSE_ARRAY:o++,TEXT_ESCAPE:o++,STRING:o++,BACKSLASH:o++,END:o++,OPEN_KEY:o++,CLOSE_KEY:o++,TRUE:o++,TRUE2:o++,TRUE3:o++,FALSE:o++,FALSE2:o++,FALSE3:o++,FALSE4:o++,NULL:o++,NULL2:o++,NULL3:o++,NUMBER_DECIMAL_POINT:o++,NUMBER_DIGIT:o++},e.STATE)e.STATE[e.STATE[a]]=a;o=e.STATE;const s={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};function c(e){for(var t in r)e[t]=r[t]}Object.create||(Object.create=function(e){function t(){this.__proto__=e}return t.prototype=e,new t}),Object.getPrototypeOf||(Object.getPrototypeOf=function(e){return e.__proto__}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t});var u=/[\\"\n]/g;function l(t){if(!(this instanceof l))return new l(t);var n=this;c(n),n.bufferCheckPosition=e.MAX_BUFFER_LENGTH,n.q=n.c=n.p="",n.opt=t||{},n.closed=n.closedRoot=n.sawRoot=!1,n.tag=n.error=null,n.state=o.BEGIN,n.stack=new Array,n.position=n.column=0,n.line=1,n.slashed=!1,n.unicodeI=0,n.unicodeS=null,n.depth=0,p(n,"onready")}l.prototype={end:function(){b(this)},write:function(t){var n=this;if(this.error)throw this.error;if(n.closed)return v(n,"Cannot write after close. Assign an onready handler.");if(null===t)return b(n);var i=0,a=t.charCodeAt(0),c=n.p;for(e.DEBUG&&console.log("write -> ["+t+"]");a&&(c=a,n.c=a=t.charCodeAt(i++),c!==a?n.p=c:c=n.p,a);)switch(e.DEBUG&&console.log(i,a,e.STATE[n.state]),n.position++,a===s.lineFeed?(n.line++,n.column=0):n.column++,n.state){case o.BEGIN:a===s.openBrace?n.state=o.OPEN_OBJECT:a===s.openBracket?n.state=o.OPEN_ARRAY:m(a)||v(n,"Non-whitespace before {[.");continue;case o.OPEN_KEY:case o.OPEN_OBJECT:if(m(a))continue;if(n.state===o.OPEN_KEY)n.stack.push(o.CLOSE_KEY);else{if(a===s.closeBrace){p(n,"onopenobject"),this.depth++,p(n,"oncloseobject"),this.depth--,n.state=n.stack.pop()||o.VALUE;continue}n.stack.push(o.CLOSE_OBJECT)}a===s.doubleQuote?n.state=o.STRING:v(n,'Malformed object key should start with "');continue;case o.CLOSE_KEY:case o.CLOSE_OBJECT:if(m(a))continue;n.state,o.CLOSE_KEY,a===s.colon?(n.state===o.CLOSE_OBJECT?(n.stack.push(o.CLOSE_OBJECT),d(n,"onopenobject"),this.depth++):d(n,"onkey"),n.state=o.VALUE):a===s.closeBrace?(y(n,"oncloseobject"),this.depth--,n.state=n.stack.pop()||o.VALUE):a===s.comma?(n.state===o.CLOSE_OBJECT&&n.stack.push(o.CLOSE_OBJECT),d(n),n.state=o.OPEN_KEY):v(n,"Bad object");continue;case o.OPEN_ARRAY:case o.VALUE:if(m(a))continue;if(n.state===o.OPEN_ARRAY){if(p(n,"onopenarray"),this.depth++,n.state=o.VALUE,a===s.closeBracket){p(n,"onclosearray"),this.depth--,n.state=n.stack.pop()||o.VALUE;continue}n.stack.push(o.CLOSE_ARRAY)}a===s.doubleQuote?n.state=o.STRING:a===s.openBrace?n.state=o.OPEN_OBJECT:a===s.openBracket?n.state=o.OPEN_ARRAY:a===s.t?n.state=o.TRUE:a===s.f?n.state=o.FALSE:a===s.n?n.state=o.NULL:a===s.minus?n.numberNode+="-":s._0<=a&&a<=s._9?(n.numberNode+=String.fromCharCode(a),n.state=o.NUMBER_DIGIT):v(n,"Bad value");continue;case o.CLOSE_ARRAY:if(a===s.comma)n.stack.push(o.CLOSE_ARRAY),d(n,"onvalue"),n.state=o.VALUE;else if(a===s.closeBracket)y(n,"onclosearray"),this.depth--,n.state=n.stack.pop()||o.VALUE;else{if(m(a))continue;v(n,"Bad array")}continue;case o.STRING:void 0===n.textNode&&(n.textNode="");var l=i-1,f=n.slashed,g=n.unicodeI;e:for(;;){for(e.DEBUG&&console.log(i,a,e.STATE[n.state],f);g>0;)if(n.unicodeS+=String.fromCharCode(a),a=t.charCodeAt(i++),n.position++,4===g?(n.textNode+=String.fromCharCode(parseInt(n.unicodeS,16)),g=0,l=i-1):g++,!a)break e;if(a===s.doubleQuote&&!f){n.state=n.stack.pop()||o.VALUE,n.textNode+=t.substring(l,i-1),n.position+=i-1-l;break}if(a===s.backslash&&!f&&(f=!0,n.textNode+=t.substring(l,i-1),n.position+=i-1-l,a=t.charCodeAt(i++),n.position++,!a))break;if(f){if(f=!1,a===s.n?n.textNode+="\n":a===s.r?n.textNode+="\r":a===s.t?n.textNode+="\t":a===s.f?n.textNode+="\f":a===s.b?n.textNode+="\b":a===s.u?(g=1,n.unicodeS=""):n.textNode+=String.fromCharCode(a),a=t.charCodeAt(i++),n.position++,l=i-1,a)continue;break}u.lastIndex=i;var w=u.exec(t);if(null===w){i=t.length+1,n.textNode+=t.substring(l,i-1),n.position+=i-1-l;break}if(i=w.index+1,!(a=t.charCodeAt(w.index))){n.textNode+=t.substring(l,i-1),n.position+=i-1-l;break}}n.slashed=f,n.unicodeI=g;continue;case o.TRUE:a===s.r?n.state=o.TRUE2:v(n,"Invalid true started with t"+a);continue;case o.TRUE2:a===s.u?n.state=o.TRUE3:v(n,"Invalid true started with tr"+a);continue;case o.TRUE3:a===s.e?(p(n,"onvalue",!0),n.state=n.stack.pop()||o.VALUE):v(n,"Invalid true started with tru"+a);continue;case o.FALSE:a===s.a?n.state=o.FALSE2:v(n,"Invalid false started with f"+a);continue;case o.FALSE2:a===s.l?n.state=o.FALSE3:v(n,"Invalid false started with fa"+a);continue;case o.FALSE3:a===s.s?n.state=o.FALSE4:v(n,"Invalid false started with fal"+a);continue;case o.FALSE4:a===s.e?(p(n,"onvalue",!1),n.state=n.stack.pop()||o.VALUE):v(n,"Invalid false started with fals"+a);continue;case o.NULL:a===s.u?n.state=o.NULL2:v(n,"Invalid null started with n"+a);continue;case o.NULL2:a===s.l?n.state=o.NULL3:v(n,"Invalid null started with nu"+a);continue;case o.NULL3:a===s.l?(p(n,"onvalue",null),n.state=n.stack.pop()||o.VALUE):v(n,"Invalid null started with nul"+a);continue;case o.NUMBER_DECIMAL_POINT:a===s.period?(n.numberNode+=".",n.state=o.NUMBER_DIGIT):v(n,"Leading zero not followed by .");continue;case o.NUMBER_DIGIT:s._0<=a&&a<=s._9?n.numberNode+=String.fromCharCode(a):a===s.period?(-1!==n.numberNode.indexOf(".")&&v(n,"Invalid number has two dots"),n.numberNode+="."):a===s.e||a===s.E?(-1===n.numberNode.indexOf("e")&&-1===n.numberNode.indexOf("E")||v(n,"Invalid number has two exponential"),n.numberNode+="e"):a===s.plus||a===s.minus?(c!==s.e&&c!==s.E&&v(n,"Invalid symbol in number"),n.numberNode+=String.fromCharCode(a)):(h(n),i--,n.state=n.stack.pop()||o.VALUE);continue;default:v(n,"Unknown state: "+n.state)}return n.position>=n.bufferCheckPosition&&function(t){var n=Math.max(e.MAX_BUFFER_LENGTH,10),i=0;for(var o in r){var a=void 0===t[o]?0:t[o].length;a>n&&("text"===o?closeText(t):v(t,"Max buffer length exceeded: "+o)),i=Math.max(i,a)}t.bufferCheckPosition=e.MAX_BUFFER_LENGTH-i+t.position}(n),n},resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{n=ie}catch(g){n=function(){}}function f(e){if(!(this instanceof f))return new f(e);this._parser=new l(e),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var t=this;n.apply(t),this._parser.onend=function(){t.emit("end")},this._parser.onerror=function(e){t.emit("error",e),t._parser.error=null},i.forEach((function(e){Object.defineProperty(t,"on"+e,{get:function(){return t._parser["on"+e]},set:function(n){if(!n)return t.removeAllListeners(e),t._parser["on"+e]=n,n;t.on(e,n)},enumerable:!0,configurable:!1})}))}function p(t,n,r){e.INFO&&console.log("-- emit",n,r),t[n]&&t[n](r)}function y(e,t,n){d(e),p(e,t,n)}function d(e,t){var n,r;e.textNode=(n=e.opt,void 0===(r=e.textNode)||(n.trim&&(r=r.trim()),n.normalize&&(r=r.replace(/\s+/g," "))),r),void 0!==e.textNode&&p(e,t||"onvalue",e.textNode),e.textNode=void 0}function h(e){e.numberNode&&p(e,"onvalue",parseFloat(e.numberNode)),e.numberNode=""}function v(e,t){return d(e),t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c,t=new Error(t),e.error=t,p(e,"onerror",t),e}function b(e){return e.state===o.VALUE&&0===e.depth||v(e,"Unexpected end"),d(e),e.c="",e.closed=!0,p(e,"onend"),l.call(e,e.opt),e}function m(e){return e===s.carriageReturn||e===s.lineFeed||e===s.space||e===s.tab}f.prototype=Object.create(n.prototype,{constructor:{value:f}}),f.prototype.write=function(e){e=new Buffer(e);for(var t=0;t<e.length;t++){var n=e[t];if(this.bytes_remaining>0){for(var r=0;r<this.bytes_remaining;r++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+r]=e[r];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,t=t+r-1,this._parser.write(this.string),this.emit("data",this.string)}else if(0===this.bytes_remaining&&n>=128){if(n>=194&&n<=223&&(this.bytes_in_sequence=2),n>=224&&n<=239&&(this.bytes_in_sequence=3),n>=240&&n<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+t>e.length){for(var i=0;i<=e.length-1-t;i++)this.temp_buffs[this.bytes_in_sequence][i]=e[t+i];return this.bytes_remaining=t+this.bytes_in_sequence-e.length,!0}this.string=e.slice(t,t+this.bytes_in_sequence).toString(),t=t+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string)}else{for(var o=t;o<e.length&&!(e[o]>=128);o++);this.string=e.slice(t,o).toString(),this._parser.write(this.string),this.emit("data",this.string),t=o-1}}},f.prototype.end=function(e){return e&&e.length&&this._parser.write(e.toString()),this._parser.end(),!0},f.prototype.on=function(e,t){var r=this;return r._parser["on"+e]||-1===i.indexOf(e)||(r._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),r.emit.apply(r,t)}),n.prototype.on.call(r,e,t)},f.prototype.destroy=function(){c(this._parser),this.emit("close")}}(t)}));function ae(e){var t=0,n=function(e){var t,n,r,i=oe.parser(),o=0,a=[],s=!1,c=!1;return i.onopenobject=function(i){var s={incomplete:!0};t||(t=s),n&&(a.push([r,n,c]),e&&(c?n.push(s):n[r]=s)),n=s,r=i,c=!1,++o},i.onkey=function(e){return r=e},i.onvalue=function(e){return c?n.push(e):n[r]=e},i.oncloseobject=function(){var t;if(delete n.incomplete,r=null,0==--o)s=!0;else{var i=n;t=a.pop(),r=t[0],n=t[1],c=t[2],e||(c?n.push(i):n[r]=i)}},i.onopenarray=function(){var i=[];i.incomplete=!0,t||(t=i),n&&(a.push([r,n,c]),e&&(c?n.push(i):n[r]=i)),n=i,c=!0,r=null,++o},i.onclosearray=function(){var t;if(delete n.incomplete,r=null,0==--o)s=!0;else{var i=n;t=a.pop(),r=t[0],n=t[1],c=t[2],e||(c?n.push(i):n[r]=i)}},{write:function(e){return i.write(e),t},done:function(){return s}}}(!0),r={pullAsync:function(i){return L(this,void 0,void 0,(function(){var o,a,s;return R(this,(function(c){switch(c.label){case 0:return o=e.slice(t,t+i),t+=i,[4,F(o,"text")];case 1:return a=c.sent(),s=n.write(a),r.result=s||{},[2,s]}}))}))},pullSync:function(i){var o=e.slice(t,t+i);t+=i;var a=D(o,"text"),s=n.write(a);return r.result=s||{},s},done:function(){return n.done()},eof:function(){return t>=e.size},result:{}};return r}var se=1024;function ce(e,t,n){return L(this,void 0,void 0,(function(){function r(){return L(this,void 0,void 0,(function(){var t,r,a,f;return R(this,(function(p){switch(p.label){case 0:t=function(t){var r,i,o,a,s,f,p,y,d,h,v,b;return R(this,(function(m){switch(m.label){case 0:if(!t.rows)return[2,"break"];if(!t.rows.incomplete&&0===t.rows.length)return[2,"continue"];if(u&&S.ignoreTransaction((function(){return u(l)})),r=t.tableName,i=e.table(r),o=c.tables.filter((function(e){return e.name===r}))[0].schema,!i){if(n.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(t.tableName," is missing in installed database"))}if(!n.acceptChangedPrimaryKey&&o.split(",")[0]!=i.schema.primKey.src)throw new Error("Primary key differs for table ".concat(t.tableName,". "));for(a=t.rows,s=[],f=0;f<a.length&&!(p=a[f]).incomplete;f++)s.push(Q.revive(p));return y=n.filter,d=y?t.inbound?s.filter((function(e){return y(r,e)})):s.filter((function(e){var t=e[0],n=e[1];return y(r,n,t)})):s,h=t.inbound?[void 0,d]:[d.map((function(e){return e[0]})),s.map((function(e){return e[1]}))],v=h[0],b=h[1],n.overwriteValues?[4,i.bulkPut(b,v)]:[3,2];case 1:return m.sent(),[3,4];case 2:return[4,i.bulkAdd(b,v)];case 3:m.sent(),m.label=4;case 4:return l.completedRows+=s.length,s.incomplete||(l.completedTables+=1),a.splice(0,s.length),[2]}}))},r=0,a=c.data,p.label=1;case 1:return r<a.length?(f=a[r],[5,t(f)]):[3,4];case 2:if("break"===p.sent())return[3,4];p.label=3;case 3:return r++,[3,1];case 4:for(;c.data.length>0&&c.data[0].rows&&!c.data[0].rows.incomplete;)c.data.splice(0,1);return o.done()||o.eof()?[3,8]:s?(o.pullSync(i),[3,7]):[3,5];case 5:return[4,S.waitFor(o.pullAsync(i))];case 6:p.sent(),p.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}}))}))}var i,o,a,s,c,u,l,f,p;return R(this,(function(y){switch(y.label){case 0:return i=(n=n||{}).chunkSizeBytes||1024*se,[4,ue(t,i)];case 1:if(o=y.sent(),a=o.result,s="FileReaderSync"in self,c=a.data,!n.acceptNameDiff&&e.name!==c.databaseName)throw new Error("Name differs. Current database name is ".concat(e.name," but export is ").concat(c.databaseName));if(!n.acceptVersionDiff&&e.verno!==c.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(e.verno," but export is ").concat(c.databaseVersion));if(u=n.progressCallback,l={done:!1,completedRows:0,completedTables:0,totalRows:c.tables.reduce((function(e,t){return e+t.rowCount}),0),totalTables:c.tables.length},u&&S.ignoreTransaction((function(){return u(l)})),!n.clearTablesBeforeImport)return[3,5];f=0,p=e.tables,y.label=2;case 2:return f<p.length?[4,p[f].clear()]:[3,5];case 3:y.sent(),y.label=4;case 4:return f++,[3,2];case 5:return n.noTransaction?[4,r()]:[3,7];case 6:return y.sent(),[3,9];case 7:return[4,e.transaction("rw",e.tables,r)];case 8:y.sent(),y.label=9;case 9:return l.done=!0,u&&S.ignoreTransaction((function(){return u(l)})),[2]}}))}))}function ue(e,t){return L(this,void 0,void 0,(function(){var n,r;return R(this,(function(i){switch(i.label){case 0:n="slice"in e?ae(e):e,i.label=1;case 1:return n.eof()?[3,3]:[4,n.pullAsync(t)];case 2:return i.sent(),n.result.data&&n.result.data.data?[3,3]:[3,1];case 3:if(!(r=n.result)||"dexie"!=r.formatName)throw new Error("Given file is not a dexie export");if(r.formatVersion>re)throw new Error("Format version ".concat(r.formatVersion," not supported"));if(!r.data)throw new Error("No data in export file");if(!r.data.databaseName)throw new Error("Missing databaseName in export file");if(!r.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!r.data.tables)throw new Error("Missing tables in export file");return[2,n]}}))}))}S.prototype.export=function(e){return ne(this,e)},S.prototype.import=function(e,t){return ce(this,e,t)},S.import=function(e,t){return function(e,t){return L(this,void 0,void 0,(function(){var n,r,i,o;return R(this,(function(a){switch(a.label){case 0:return n=(t=t||{}).chunkSizeBytes||1024*se,[4,ue(e,n)];case 1:return r=a.sent(),i=r.result.data,(o=new S(i.databaseName)).version(i.databaseVersion).stores(function(e){for(var t={},n=0,r=e.tables;n<r.length;n++){var i=r[n];t[i.name]=i.schema}return t}(i)),[4,ce(o,r,t)];case 2:return a.sent(),[2,o]}}))}))}(e,t)};const le=A("App",{web:()=>n((()=>t.import("./web-legacy-q8MgueYp.js")),void 0).then((e=>new e.AppWeb))});class fe extends N{constructor(){super(...arguments),this.ERROR_PICK_FILE_CANCELED="pickFiles canceled."}async convertHeicToJpeg(e){throw this.unimplemented("Not implemented on web.")}async pickFiles(e){const t=await this.openFilePicker(e);if(!t)throw new Error(this.ERROR_PICK_FILE_CANCELED);const n={files:[]};for(const r of t){const t={blob:r,modifiedAt:r.lastModified,mimeType:this.getMimeTypeFromUrl(r),name:this.getNameFromUrl(r),path:void 0,size:this.getSizeFromUrl(r)};(null==e?void 0:e.readData)&&(t.data=await this.getDataFromFile(r)),n.files.push(t)}return n}async pickImages(e){return this.pickFiles(Object.assign({types:["image/*"]},e))}async pickMedia(e){return this.pickFiles(Object.assign({types:["image/*","video/*"]},e))}async pickVideos(e){return this.pickFiles(Object.assign({types:["video/*"]},e))}async openFilePicker(e){var t;const n=(null===(t=null==e?void 0:e.types)||void 0===t?void 0:t.join(","))||"",r=!!(null==e?void 0:e.multiple);return new Promise((e=>{let t=!1;const i=document.createElement("input");i.type="file",i.accept=n,i.multiple=r,i.addEventListener("change",(()=>{t=!0;const n=Array.from(i.files||[]);e(n)}),{once:!0}),window.addEventListener("focus",(async()=>{await this.wait(1e3),t||e(void 0)}),{once:!0}),i.click()}))}async getDataFromFile(e){return new Promise(((t,n)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>{const e=("string"==typeof r.result?r.result:"").split("base64,")[1]||"";t(e)},r.onerror=e=>{n(e)}}))}getNameFromUrl(e){return e.name}getMimeTypeFromUrl(e){return e.type}getSizeFromUrl(e){return e.size}async wait(e){return new Promise((t=>setTimeout(t,e)))}}const pe=A("FilePicker",{web:()=>new fe});e("default",r({__name:"SettingsPage",setup(e){const t=i({name:"RopeRisk",version:"PWA"});async function n(){ne(E,{prettyJson:!0}).then((e=>{C(e,"database_dump.json").then((e=>{console.log(e)}))}))}async function r(){pe.pickFiles({types:["application/json"],readData:!0}).then((e=>{const t=e.files;if(0===t.length)return;const n=t[0];var r;r=((e,t="",n=512)=>{const r=atob(e),i=[];for(let o=0;o<r.length;o+=n){const e=r.slice(o,o+n),t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);const a=new Uint8Array(t);i.push(a)}return new Blob(i,{type:t})})(n.data,n.mimeType),ce(E,r,{acceptMissingTables:!0,acceptVersionDiff:!0,acceptNameDiff:!0,acceptChangedPrimaryKey:!0,overwriteValues:!0,clearTablesBeforeImport:!0}).then((()=>{P("Import erfolgreich","success")})).catch((e=>{P("Import gescheitert","danger"),console.warn(e)}))}))}return le.getInfo().then((e=>{t.value=e})).catch((()=>{})),I({dataType:"Blob",types:[{description:"JSON Datei",accept:{"application/json":[".json"]}}]}),_.isNativePlatform(),(e,i)=>(o(),a(O,null,{default:s((()=>[c(u(g),null,{default:s((()=>[c(u(l),null,{default:s((()=>[c(u(f),null,{default:s((()=>[p("App")])),_:1})])),_:1}),c(u(y),null,{default:s((()=>["PWA"!==t.value.version?(o(),d(b,{key:0},[c(u(h),{lines:"none"},{default:s((()=>[p(" Name: "+v(t.value.name),1)])),_:1}),c(u(h),{lines:"none"},{default:s((()=>[p(" Version: "+v(t.value.version),1)])),_:1}),c(u(h),{lines:"none"},{default:s((()=>[p(" Build: "+v(t.value.build),1)])),_:1}),c(u(h),{lines:"none"},{default:s((()=>[p(" ID: "+v(t.value.id),1)])),_:1})],64)):(o(),d(b,{key:1},[c(u(h),{lines:"none"},{default:s((()=>[p(" Keine Informationen verfügbar. ")])),_:1}),c(u(m),null,{default:s((()=>[p("Vermutlich läuft die App als PWA (Webapp).")])),_:1})],64))])),_:1})])),_:1}),c(u(g),null,{default:s((()=>[c(u(l),null,{default:s((()=>[c(u(f),null,{default:s((()=>[p(" Datenbank ")])),_:1})])),_:1}),c(u(y),null,{default:s((()=>[c(u(h),{lines:"none"},{default:s((()=>[p(" Name: "+v(u(E).name),1)])),_:1}),c(u(h),{lines:"none"},{default:s((()=>[p(" Version: "+v(u(E).verno),1)])),_:1}),c(u(h),{lines:"none"},{default:s((()=>[p(" Dexie-Version: "+v(u(S).version),1)])),_:1}),c(u(h),{lines:"none"},{default:s((()=>[c(u(w),{onClick:n},{default:s((()=>[p("Exportieren")])),_:1})])),_:1}),c(u(m),null,{default:s((()=>[p("Exportiert die gesamte Datenbank im JSON-Format.")])),_:1}),c(u(h),{lines:"none"},{default:s((()=>[c(u(w),{onClick:r},{default:s((()=>[p("Importieren")])),_:1})])),_:1}),c(u(m),null,{default:s((()=>[p("Importiert die gesamte Datenbank im JSON-Format.")])),_:1})])),_:1})])),_:1})])),_:1}))}}))}}}));
