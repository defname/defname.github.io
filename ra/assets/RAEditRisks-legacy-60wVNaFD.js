System.register(["./index-legacy-sS6aLOVw.js","./riskassessment-legacy-obaEtDzR.js","./RiskCatalog.vue_vue_type_script_setup_true_lang-legacy-baYD4HOP.js","./GenericEditModal-legacy-fyIKf2q-.js","./liveriskstree-legacy-L2MofBxz.js","./livequery-legacy-hzDUtCPS.js","./AddedByList.vue_vue_type_script_setup_true_lang-legacy-pFbuFdAT.js","./TemplateRiskAssessmentPage-legacy-xv6_oqnk.js","./helpers-legacy-jVuaT5b9.js","./database-legacy-zPeqZLiu.js","./index-legacy-X91ZUWSc.js"],(function(e,l){"use strict";var a,s,t,i,n,r,u,d,o,c,g,k,f,v,_,y,m,h,p,j,b,x,A,C,R,q,B,w,G,L,M,z,I,U,Z,E,T,V,D,H,K,S,F,J,P,W;return{setters:[e=>{a=e.d,s=e.x,t=e.av,i=e.e,n=e.u,r=e.o,u=e.c,d=e.w,o=e.b,c=e.f,g=e.aq,k=e.i,f=e.j,v=e.ar,_=e.g,y=e.m,m=e.n,h=e.p,p=e.q,j=e.F,b=e.R,x=e.l,A=e.G,C=e.a6,R=e.H,q=e.T,B=e.t,w=e.J,G=e.aw,L=e.K,M=e.I,z=e.h,I=e.r,U=e.k,Z=e.a,E=e.a5,T=e._},e=>{V=e.u,D=e.a},e=>{H=e._},e=>{K=e.G},e=>{S=e.l},e=>{F=e.l},e=>{J=e._},e=>{P=e.T},e=>{W=e.a},null,null],execute:function(){var l=document.createElement("style");l.textContent=".risk-card .checkmark[data-v-5c08963f]{display:none}.risk-card:has(.risk-solved) .checkmark[data-v-5c08963f]{display:block}\n",document.head.appendChild(l);const $={class:"ion-text-right"};e("default",T(a({__name:"RAEditRisks",setup(e){s(0),t((()=>console.log("will enter")));const l=V(),a=D(),T=F.table("measures"),N=i((()=>S.isReady()?a.value.map((e=>({risk:S.get(e),meta:l.getMeta(e)}))):[])),O=s("Z");s(-1);const Q=i((()=>N.value.filter((e=>e.risk.sector===O.value))));["Z","U","A"].includes(n().query.sector)&&(O.value=n().query.sector);const X=s(!1);function Y(e){W("Die Gefährdung wirklich aus der Liste entfernen?",{text:"Löschen",role:"destructive",icon:E,handler:()=>{!function(e){l.risks=l.risks.filter((l=>l!==e.risk.id))}(e)}})}const ee="/riskassessment/"+l.id+"/risks";return(e,a)=>(r(),u(P,null,{default:d((()=>[o(c(v),{value:O.value,onIonChange:a[0]||(a[0]=l=>{O.value=l.detail.value,e.$router.replace({query:{sector:l.detail.value}})})},{default:d((()=>[o(c(g),{value:"Z"},{default:d((()=>[o(c(k),null,{default:d((()=>[f("Zugang")])),_:1})])),_:1}),o(c(g),{value:"U"},{default:d((()=>[o(c(k),null,{default:d((()=>[f("Umgebung")])),_:1})])),_:1}),o(c(g),{value:"A"},{default:d((()=>[o(c(k),null,{default:d((()=>[f("Arbeit")])),_:1})])),_:1})])),_:1},8,["value"]),c(l).ready&&c(T).isReady()?(r(),_(j,{key:0},[o(c(p),{slot:"fixed",vertical:"bottom",horizontal:"end"},{default:d((()=>[o(c(y),{onClick:a[1]||(a[1]=e=>X.value=!0)},{default:d((()=>[o(c(m),{icon:c(h)},null,8,["icon"])])),_:1})])),_:1}),(r(!0),_(j,null,b(Q.value,(e=>(r(),u(c(A),{key:e.risk.id,class:"risk-card"},{default:d((()=>[o(c(m),{icon:c(C),color:"success",class:"checkmark ion-padding ion-float-right",size:"large"},null,8,["icon"]),o(c(R),null,{default:d((()=>[o(c(q),null,{default:d((()=>{var l,a;return[f(B(null===(l=e.risk.factor)||void 0===l||null===(l=l.category)||void 0===l?void 0:l.descr)+" ➤ "+B(null===(a=e.risk.factor)||void 0===a?void 0:a.descr),1)]})),_:2},1024),o(c(w),{style:{"font-size":"1.1rem"}},{default:d((()=>[f(B(e.risk.descr),1)])),_:2},1024),c(l).meta[e.risk.id].addedBy.length>0?(r(),u(c(G),{key:0,style:{"margin-bottom":"1rem"}},{default:d((()=>[o(J,{"trigger-list":c(l).meta[e.risk.id].addedBy},null,8,["trigger-list"])])),_:2},1024)):x("",!0)])),_:2},1024),o(c(L),{class:"ion-no-margin ion-no-padding"},{default:d((()=>[c(l).getMeasures(e.risk.id).length?(r(),u(c(M),{key:0,class:"risk-solved ion-no-padding ion-no-margin",lines:"none"},{default:d((()=>[o(c(z),{class:"ion-no-margin"},{default:d((()=>[o(c(k),null,{default:d((()=>[f("Gewählte Maßnahmen")])),_:1})])),_:1}),(r(!0),_(j,null,b(c(l).getMeasures(e.risk.id),(e=>(r(),u(c(I),{class:"ion-no-margin"},{default:d((()=>[f(B(c(T).get(e).descr),1)])),_:2},1024)))),256))])),_:2},1024)):x("",!0),Z("div",$,[0===c(l).meta[e.risk.id].addedBy.length?(r(),u(c(U),{key:0,fill:"clear",color:"danger",onClick:l=>Y(e)},{default:d((()=>[f("Löschen")])),_:2},1032,["onClick"])):x("",!0),o(c(U),{fill:"clear","router-link":ee+"/"+e.risk.id},{default:d((()=>[f("Bearbeiten")])),_:2},1032,["router-link"])])])),_:2},1024)])),_:2},1024)))),128)),o(K,{"is-open":X.value,onWillDismiss:a[3]||(a[3]=e=>X.value=!1),"hide-save":""},{default:d((()=>[o(H,{modelValue:c(l).risks,"onUpdate:modelValue":a[2]||(a[2]=e=>c(l).risks=e),sector:O.value,"link-to-function":()=>{}},null,8,["modelValue","sector"])])),_:1},8,["is-open"])],64)):x("",!0)])),_:1}))}}),[["__scopeId","data-v-5c08963f"]]))}}}));
