import{d as I,e as V,x as j,u as f,o as r,c as d,w as s,b as a,f as e,T as c,i as m,j as u,R as x,t as p,ay as v,l as g,r as B,g as C,m as R,n as T,p as w,q as A,F as S}from"./index-6YVP06UH.js";import{_ as b}from"./TechniciansList.vue_vue_type_script_setup_true_lang-pA5nZlG6.js";import{u as q}from"./riskassessment-hEEgjnB3.js";import{l as _}from"./livequery-DZoN91kH.js";import{T as F}from"./TemplateRiskAssessmentPage-axdKbpF4.js";import"./GenericList.vue_vue_type_script_setup_true_lang-PXH3pSCE.js";import"./helpers-iJWbSvob.js";import"./database-GtjOZku2.js";import"./liveriskstree-dDb20zb1.js";const Q=I({__name:"RAEditTechnicians",setup(N){const o=q(),k=V(()=>_.table("technicians").isReady().value?o.technicians.map(n=>_.table("technicians").get(n)):[]),i=j("selected");["selected","available"].includes(f().query.segment)&&(i.value=f().query.segment);function y(n){if(n.id===void 0){console.warn("Technician ID is undefined");return}if(!n.fisat||n.fisat.level!==3)return;const l=o.supervisors.indexOf(n.id);console.log(l),l!==-1?o.supervisors.splice(l,1):o.supervisors.push(n.id)}return(n,l)=>(r(),d(F,null,{default:s(()=>[a(e(x),{value:i.value,onIonChange:l[0]||(l[0]=t=>{i.value=t.detail.value,n.$router.replace({query:{segment:t.detail.value}})})},{default:s(()=>[a(e(c),{value:"selected"},{default:s(()=>[a(e(m),null,{default:s(()=>[u("Ausgewählt")]),_:1})]),_:1}),a(e(c),{value:"available"},{default:s(()=>[a(e(m),null,{default:s(()=>[u("Verfügbar")]),_:1})]),_:1})]),_:1},8,["value"]),i.value==="selected"?(r(),d(b,{key:0,entries:k.value,modelValue:e(o).technicians,"onUpdate:modelValue":l[1]||(l[1]=t=>e(o).technicians=t),inverted:"","forbid-deletion":""},{default:s(t=>[a(e(B),null,{default:s(()=>[a(e(m),null,{default:s(()=>[u(p(t.object.name),1)]),_:2},1024),t.object.fisat?(r(),d(e(v),{key:0,slot:"end",color:t.object.fisat.level===3?"tertiary":"medium",onClick:$=>y(t.object)},{default:s(()=>[u(" Level "+p(t.object.fisat.level),1)]),_:2},1032,["color","onClick"])):g("",!0),e(o).supervisors.includes(t.object.id)?(r(),d(e(v),{key:1,slot:"start"},{default:s(()=>[u("Supervisor")]),_:1})):g("",!0)]),_:2},1024)]),_:1},8,["entries","modelValue"])):(r(),C(S,{key:1},[a(e(A),{slot:"fixed",vertical:"bottom",horizontal:"end"},{default:s(()=>[a(e(R),{"router-link":"/technicians/new"},{default:s(()=>[a(e(T),{icon:e(w)},null,8,["icon"])]),_:1})]),_:1}),a(b,{modelValue:e(o).technicians,"onUpdate:modelValue":l[2]||(l[2]=t=>e(o).technicians=t)},null,8,["modelValue"])],64))]),_:1}))}});export{Q as default};
