System.register(["./index-legacy-sS6aLOVw.js","./riskassessment-legacy-obaEtDzR.js","./livequery-legacy-hzDUtCPS.js","./TemplateRiskAssessmentPage-legacy-xv6_oqnk.js","./GenericEditModal-legacy-fyIKf2q-.js","./HistoryTextarea.vue_vue_type_script_setup_true_lang-legacy-ox-qE-de.js","./database-legacy-zPeqZLiu.js","./liveriskstree-legacy-L2MofBxz.js","./helpers-legacy-jVuaT5b9.js","./index-legacy-X91ZUWSc.js","./index-legacy-8OL4aSJO.js"],(function(e,l){"use strict";var n,a,t,s,i,u,o,d,c,r,k,m,g,f,p,y,_,v,h,b,V,j,x,w,z,D,E,A,C,I,R,S,G,q,F,P,T,U,W,H,L,M,B,K,$,N,O,X,Z;return{setters:[e=>{n=e.d,a=e.o,t=e.c,s=e.f,i=e.a6,u=e.n,o=e._,d=e.x,c=e.g,r=e.b,k=e.s,m=e.w,g=e.a7,f=e.a8,p=e.k,y=e.a9,_=e.I,v=e.F,h=e.R,b=e.aa,V=e.r,j=e.i,x=e.t,w=e.j,z=e.ab,D=e.ac,E=e.a5,A=e.e,C=e.ad,I=e.ae,R=e.h,S=e.U,G=e.l,q=e.V,F=e.W,P=e.X,T=e.af,U=e.ag,W=e.ah,H=e.ai,L=e.aj},e=>{M=e.u,B=e.a},e=>{K=e.l},e=>{$=e.T},e=>{N=e.G},e=>{O=e.u,X=e.a,Z=e._},null,null,null,null,null],execute:function(){var l=document.createElement("style");l.textContent=".checkmark[data-v-b74799a7]{float:right}.label[data-v-5937dc4c]{margin-bottom:10px}.nested-list[data-v-5937dc4c]{background:transparent;width:100%;padding:0;margin:0}.nested-list-item[data-v-5937dc4c]{background:transparent;padding:0;margin:0;border:0}\n",document.head.appendChild(l);const J=o(n({__name:"Checkmark",setup:e=>(e,l)=>(a(),t(s(u),{class:"checkmark",slot:"end",color:"success",icon:s(i)},null,8,["icon"]))}),[["__scopeId","data-v-b74799a7"]]),Q=n({__name:"HistoryInput",props:{modelValue:{},label:{},inputId:{}},emits:["update:modelValue"],setup(e,{emit:l}){const n=l,o=e,A=O(o.inputId),C=d(void 0),I=d(!1),R=d(""),{results:S}=X(R,A.entries,{matchAllWhenSearchEmpty:!0});function G(e){"save"===e.detail.role&&(n("update:modelValue",R.value),A.add(R.value)),I.value=!1}function q(){R.value=o.modelValue}function F(e){R.value=e,C.value.$el.setFocus()}return(e,l)=>(a(),c(v,null,[r(s(k),{label:e.label,"label-placement":"floating",value:e.modelValue,onClick:l[0]||(l[0]=e=>I.value=!0)},null,8,["label","value"]),r(N,{"is-open":I.value,onWillDismiss:G,onDidPresent:l[4]||(l[4]=e=>C.value.$el.setFocus()),onWillPresent:q,"icon-save":s(i)},{default:m((()=>[r(s(k),{ref_key:"input",ref:C,label:e.label,"label-placement":"stacked",modelValue:R.value,"onUpdate:modelValue":l[2]||(l[2]=e=>R.value=e),onKeydown:l[3]||(l[3]=g(f((e=>F(s(S)[0].item)),["prevent"]),["tab"]))},{default:m((()=>[r(s(p),{slot:"end",fill:"clear",onClick:l[1]||(l[1]=l=>{console.log(R.value,e.modelValue),R.value=e.modelValue})},{default:m((()=>[r(s(u),{slot:"icon-only",icon:s(y)},null,8,["icon"])])),_:1})])),_:1},8,["label","modelValue"]),r(s(_),{ref:"slidingList"},{default:m((()=>[(a(!0),c(v,null,h(s(S),((e,l)=>(a(),t(s(b),{key:e.item,ref_for:!0,ref:"slidingItem"},{default:m((()=>[r(s(V),{onClick:l=>F(e.item)},{default:m((()=>[r(s(j),null,{default:m((()=>[w(x(e.item),1)])),_:2},1024)])),_:2},1032,["onClick"]),r(s(z),{side:"end"},{default:m((()=>[r(s(D),{color:"danger",onClick:l=>{return n=e.item,A.remove(n);var n}},{default:m((()=>[r(s(u),{icon:s(E),slot:"end"},null,8,["icon"]),w(" Löschen ")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1},512)])),_:1},8,["is-open","icon-save"])],64))}}),Y={key:1,class:"nested-list",lines:"none"},ee={class:"ion-no-padding ion-no-margin nested-list-item",lines:"none"},le={key:1,class:"nested-list ion-no-padding",lines:"none"},ne={class:"ion-no-padding ion-no-margin nested-list-item",lines:"none",size:"small"};e("default",o(n({__name:"RAEditOverview",setup(e){const l=K.table("technicians"),n=K.table("equipment"),i=M(),o=A((()=>l.isReady().value?i.technicians.map((e=>l.get(e))):[])),d=A((()=>n.isReady().value?i.equipment.map((e=>n.get(e))):[])),g="/riskassessment/"+i.id,f=B(),p=C({direct:-1,all:-1,solved:-1});return I(f,(async()=>{await i.ready,p.direct=i.risks.length;const e=await i.calcAllRisks();p.all=e.length,p.solved=e.filter((e=>void 0!==i.measures[e]&&i.measures[e].length>0)).length})),(e,l)=>(a(),t($,null,{default:m((()=>[r(s(_),{lines:"full"},{default:m((()=>[r(s(R),null,{default:m((()=>[w(" Allgemeines ")])),_:1}),r(s(V),null,{default:m((()=>[r(s(u),{slot:"start",icon:s(S)},null,8,["icon"]),s(i).company?(a(),t(J,{key:0})):G("",!0),r(Q,{modelValue:s(i).company,"onUpdate:modelValue":l[0]||(l[0]=e=>s(i).company=e),"input-id":"ra_company",label:"Ausführende Firma"},null,8,["modelValue"])])),_:1}),r(s(V),null,{default:m((()=>[r(s(u),{slot:"start",icon:s(q)},null,8,["icon"]),s(i).jobDescr?(a(),t(J,{key:0})):G("",!0),r(Z,{label:"Beschreibung der Tätigkeit","input-id":"ra_jobdescr",modelValue:s(i).jobDescr,"onUpdate:modelValue":l[1]||(l[1]=e=>s(i).jobDescr=e)},null,8,["modelValue"])])),_:1}),r(s(V),null,{default:m((()=>[r(s(u),{slot:"start",icon:s(F)},null,8,["icon"]),s(i).address?(a(),t(J,{key:0})):G("",!0),r(s(k),{"router-link":g+"/location",label:"Addresse","label-placement":"floating",readonly:"",value:s(i).address},null,8,["router-link","value"])])),_:1}),r(s(V),null,{default:m((()=>[r(s(u),{slot:"start",icon:s(P)},null,8,["icon"]),s(i).startDate?(a(),t(J,{key:0})):G("",!0),r(s(k),{"router-link":g+"/date",label:"Datum","label-placement":"floating",readonly:"",value:s(i).startDate+(s(i).endDate?" - "+s(i).endDate:"")},null,8,["router-link","value"])])),_:1}),r(s(V),{"router-link":g+"/equipment",detail:!1},{default:m((()=>[r(s(u),{slot:"start",icon:s(T)},null,8,["icon"]),s(i).equipment?(a(),t(J,{key:0})):G("",!0),r(s(j),{position:"stacked",style:{"z-index":"10"},class:"label"},{default:m((()=>[w("Ausrüstung")])),_:1}),d.value.length>0?(a(),c("ul",Y,[(a(!0),c(v,null,h(d.value,(e=>(a(),c("li",ee,x(e.descr),1)))),256))])):G("",!0)])),_:1},8,["router-link"]),r(s(V),{"router-link":g+"/technicians",detail:!1},{default:m((()=>[r(s(u),{slot:"start",icon:s(U)},null,8,["icon"]),s(i).technicians.length>0?(a(),t(J,{key:0})):G("",!0),r(s(j),{position:"stacked",style:{"z-index":"10"},class:"label"},{default:m((()=>[w("Personal")])),_:1}),s(i).technicians.length>0?(a(),c("ul",le,[(a(!0),c(v,null,h(o.value,(e=>(a(),c("li",ne,x(e.name),1)))),256))])):(a(),c(v,{key:2},[w(" Es wurde noch kein Personal ausgewählt ")],64))])),_:1},8,["router-link"]),r(s(R),null,{default:m((()=>[w(" Zugang ")])),_:1}),r(s(V),{"router-link":g+"/access",detail:!1},{default:m((()=>[r(s(u),{slot:"start",icon:s(W)},null,8,["icon"]),s(i).access.length>0?(a(),t(J,{key:0})):G("",!0),r(s(j),{position:"stacked",style:{"z-index":"10"},class:"label"},{default:m((()=>[w("Sektoren")])),_:1}),0===s(i).access.length?(a(),c(v,{key:1},[w("Es wurden noch keine Sektoren definiert")],64)):1===s(i).access.length?(a(),c(v,{key:2},[w("Es wurde ein Sektor definiert")],64)):(a(),c(v,{key:3},[w("Es wurden bisher "+x(s(i).access.length)+" Sektoren definiert",1)],64))])),_:1},8,["router-link"]),r(s(V),{"router-link":g+"/rescue",detail:!1},{default:m((()=>[r(s(u),{slot:"start",icon:s(H)},null,8,["icon"]),s(i).access.length>0?(a(),t(J,{key:0})):G("",!0),r(s(j),{position:"stacked",style:{"z-index":"10"},class:"label"},{default:m((()=>[w("Rettungskonzept")])),_:1}),0===s(i).access.length?(a(),c(v,{key:1},[w("Es wurden noch keine Sektoren definiert")],64)):(a(),c(v,{key:2},[w("Für "+x(s(i).access.filter((e=>e.rescue)).length)+" Sektoren existiert ein Rettungskonzept",1)],64))])),_:1},8,["router-link"]),r(s(R),null,{default:m((()=>[w(" Gefährdungen ")])),_:1}),r(s(V),{"router-link":g+"/risks",detail:!1},{default:m((()=>[r(s(u),{slot:"start",icon:s(L)},null,8,["icon"]),s(i).access.length>0?(a(),t(J,{key:0})):G("",!0),r(s(j),{position:"stacked",style:{"z-index":"10"},class:"label"},{default:m((()=>[w("Gefährdungen")])),_:1}),0===p.all?(a(),c(v,{key:1},[w("Es wurden noch keine Gefährdungen hinzugefügt")],64)):(a(),c(v,{key:2},[w(" Von insgesamt "+x(p.all)+" Gefährdungen sind für "+x(p.solved)+" Maßnahmen angegeben. ",1)],64))])),_:1},8,["router-link"])])),_:1})])),_:1}))}}),[["__scopeId","data-v-5937dc4c"]]))}}}));
