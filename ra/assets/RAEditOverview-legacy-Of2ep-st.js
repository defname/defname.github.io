System.register(["./index-legacy-sTcrDMYq.js","./riskassessment-legacy-9hi0LLwl.js","./livequery-legacy-tkInflhO.js","./TemplateRiskAssessmentPage-legacy-U8MtJ39U.js","./GenericEditModal-legacy-ewPrqCzC.js","./HistoryTextarea.vue_vue_type_script_setup_true_lang-legacy-AVBo8-uJ.js","./helpers-legacy-Rp8Wbxgk.js","./liveriskstree-legacy-1-jYbkaU.js","./index-legacy-556IOogQ.js"],(function(e,l){"use strict";var n,a,t,s,i,u,o,d,r,c,k,m,g,f,p,y,_,v,h,b,V,j,w,x,E,D,z,C,A,I,R,S,G,q,F,P,T,U,W,H,$,L,M,Z,B,J,K,O,X;return{setters:[e=>{n=e.d,a=e.o,t=e.c,s=e.f,i=e.U,u=e.n,o=e._,d=e.x,r=e.g,c=e.b,k=e.s,m=e.w,g=e.W,f=e.X,p=e.k,y=e.Y,_=e.I,v=e.F,h=e.R,b=e.Z,V=e.r,j=e.i,w=e.t,x=e.j,E=e.$,D=e.a0,z=e.V,C=e.e,A=e.a1,I=e.a2,R=e.h,S=e.a3,G=e.l,q=e.a4,F=e.a5,P=e.a6,T=e.a7,U=e.a8,W=e.a9,H=e.aa,$=e.ab},e=>{L=e.u,M=e.a},e=>{Z=e.l},e=>{B=e.T},e=>{J=e.G},e=>{K=e.u,O=e.a,X=e._},null,null,null],execute:function(){var l=document.createElement("style");l.textContent=".checkmark[data-v-b74799a7]{float:right}.label[data-v-5937dc4c]{margin-bottom:10px}.nested-list[data-v-5937dc4c]{background:transparent;width:100%;padding:0;margin:0}.nested-list-item[data-v-5937dc4c]{background:transparent;padding:0;margin:0;border:0}\n",document.head.appendChild(l);const Y=o(n({__name:"Checkmark",setup:e=>(e,l)=>(a(),t(s(u),{class:"checkmark",slot:"end",color:"success",icon:s(i)},null,8,["icon"]))}),[["__scopeId","data-v-b74799a7"]]),N=n({__name:"HistoryInput",props:{modelValue:{},label:{},inputId:{}},emits:["update:modelValue"],setup(e,{emit:l}){const n=l,o=e,C=K(o.inputId),A=d(void 0),I=d(!1),R=d(""),{results:S}=O(R,C.entries,{matchAllWhenSearchEmpty:!0});function G(e){"save"===e.detail.role&&(n("update:modelValue",R.value),C.add(R.value)),I.value=!1}function q(){R.value=o.modelValue}function F(e){R.value=e,A.value.$el.setFocus()}return(e,l)=>(a(),r(v,null,[c(s(k),{label:e.label,"label-placement":"floating",value:e.modelValue,onClick:l[0]||(l[0]=e=>I.value=!0)},null,8,["label","value"]),c(J,{"is-open":I.value,onWillDismiss:G,onDidPresent:l[4]||(l[4]=e=>A.value.$el.setFocus()),onWillPresent:q,"icon-save":s(i)},{default:m((()=>[c(s(k),{ref_key:"input",ref:A,label:e.label,"label-placement":"stacked",modelValue:R.value,"onUpdate:modelValue":l[2]||(l[2]=e=>R.value=e),onKeydown:l[3]||(l[3]=g(f((e=>F(s(S)[0].item)),["prevent"]),["tab"]))},{default:m((()=>[c(s(p),{slot:"end",fill:"clear",onClick:l[1]||(l[1]=l=>{console.log(R.value,e.modelValue),R.value=e.modelValue})},{default:m((()=>[c(s(u),{slot:"icon-only",icon:s(y)},null,8,["icon"])])),_:1})])),_:1},8,["label","modelValue"]),c(s(_),{ref:"slidingList"},{default:m((()=>[(a(!0),r(v,null,h(s(S),((e,l)=>(a(),t(s(b),{key:e.item,ref_for:!0,ref:"slidingItem"},{default:m((()=>[c(s(V),{onClick:l=>F(e.item)},{default:m((()=>[c(s(j),null,{default:m((()=>[x(w(e.item),1)])),_:2},1024)])),_:2},1032,["onClick"]),c(s(E),{side:"end"},{default:m((()=>[c(s(D),{color:"danger",onClick:l=>{return n=e.item,C.remove(n);var n}},{default:m((()=>[c(s(u),{icon:s(z),slot:"end"},null,8,["icon"]),x(" Löschen ")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1},512)])),_:1},8,["is-open","icon-save"])],64))}}),Q={key:1,class:"nested-list",lines:"none"},ee={class:"ion-no-padding ion-no-margin nested-list-item",lines:"none"},le={key:1,class:"nested-list ion-no-padding",lines:"none"},ne={class:"ion-no-padding ion-no-margin nested-list-item",lines:"none",size:"small"};e("default",o(n({__name:"RAEditOverview",setup(e){const l=Z.table("technicians"),n=Z.table("equipment"),i=L(),o=C((()=>l.isReady().value?i.technicians.map((e=>l.get(e))):[])),d=C((()=>n.isReady().value?i.equipment.map((e=>n.get(e))):[])),g="/riskassessment/"+i.id,f=M(),p=A({direct:-1,all:-1,solved:-1});return I(f,(async()=>{await i.ready,p.direct=i.risks.length;const e=await i.calcAllRisks();p.all=e.length,p.solved=e.filter((e=>void 0!==i.measures[e]&&i.measures[e].length>0)).length})),(e,l)=>(a(),t(B,null,{default:m((()=>[c(s(_),{lines:"full"},{default:m((()=>[c(s(R),null,{default:m((()=>[x(" Allgemeines ")])),_:1}),c(s(V),null,{default:m((()=>[c(s(u),{slot:"start",icon:s(S)},null,8,["icon"]),s(i).company?(a(),t(Y,{key:0})):G("",!0),c(N,{modelValue:s(i).company,"onUpdate:modelValue":l[0]||(l[0]=e=>s(i).company=e),"input-id":"ra_company",label:"Ausführende Firma"},null,8,["modelValue"])])),_:1}),c(s(V),null,{default:m((()=>[c(s(u),{slot:"start",icon:s(q)},null,8,["icon"]),s(i).jobDescr?(a(),t(Y,{key:0})):G("",!0),c(X,{label:"Beschreibung der Tätigkeit","input-id":"ra_jobdescr",modelValue:s(i).jobDescr,"onUpdate:modelValue":l[1]||(l[1]=e=>s(i).jobDescr=e)},null,8,["modelValue"])])),_:1}),c(s(V),null,{default:m((()=>[c(s(u),{slot:"start",icon:s(F)},null,8,["icon"]),s(i).address?(a(),t(Y,{key:0})):G("",!0),c(s(k),{"router-link":g+"/location",label:"Addresse","label-placement":"floating",readonly:"",value:s(i).address},null,8,["router-link","value"])])),_:1}),c(s(V),null,{default:m((()=>[c(s(u),{slot:"start",icon:s(P)},null,8,["icon"]),s(i).startDate?(a(),t(Y,{key:0})):G("",!0),c(s(k),{"router-link":g+"/date",label:"Datum","label-placement":"floating",readonly:"",value:s(i).startDate+(s(i).endDate?" - "+s(i).endDate:"")},null,8,["router-link","value"])])),_:1}),c(s(V),{"router-link":g+"/equipment",detail:!1},{default:m((()=>[c(s(u),{slot:"start",icon:s(T)},null,8,["icon"]),s(i).equipment?(a(),t(Y,{key:0})):G("",!0),c(s(j),{position:"stacked",style:{"z-index":"10"},class:"label"},{default:m((()=>[x("Ausrüstung")])),_:1}),d.value.length>0?(a(),r("ul",Q,[(a(!0),r(v,null,h(d.value,(e=>(a(),r("li",ee,w(e.descr),1)))),256))])):G("",!0)])),_:1},8,["router-link"]),c(s(V),{"router-link":g+"/technicians",detail:!1},{default:m((()=>[c(s(u),{slot:"start",icon:s(U)},null,8,["icon"]),s(i).technicians.length>0?(a(),t(Y,{key:0})):G("",!0),c(s(j),{position:"stacked",style:{"z-index":"10"},class:"label"},{default:m((()=>[x("Personal")])),_:1}),s(i).technicians.length>0?(a(),r("ul",le,[(a(!0),r(v,null,h(o.value,(e=>(a(),r("li",ne,w(e.name),1)))),256))])):(a(),r(v,{key:2},[x(" Es wurde noch kein Personal ausgewählt ")],64))])),_:1},8,["router-link"]),c(s(R),null,{default:m((()=>[x(" Zugang ")])),_:1}),c(s(V),{"router-link":g+"/access",detail:!1},{default:m((()=>[c(s(u),{slot:"start",icon:s(W)},null,8,["icon"]),s(i).access.length>0?(a(),t(Y,{key:0})):G("",!0),c(s(j),{position:"stacked",style:{"z-index":"10"},class:"label"},{default:m((()=>[x("Sektoren")])),_:1}),0===s(i).access.length?(a(),r(v,{key:1},[x("Es wurden noch keine Sektoren definiert")],64)):1===s(i).access.length?(a(),r(v,{key:2},[x("Es wurde ein Sektor definiert")],64)):(a(),r(v,{key:3},[x("Es wurden bisher "+w(s(i).access.length)+" Sektoren definiert",1)],64))])),_:1},8,["router-link"]),c(s(V),{"router-link":g+"/rescue",detail:!1},{default:m((()=>[c(s(u),{slot:"start",icon:s(H)},null,8,["icon"]),s(i).access.length>0?(a(),t(Y,{key:0})):G("",!0),c(s(j),{position:"stacked",style:{"z-index":"10"},class:"label"},{default:m((()=>[x("Rettungskonzept")])),_:1}),0===s(i).access.length?(a(),r(v,{key:1},[x("Es wurden noch keine Sektoren definiert")],64)):(a(),r(v,{key:2},[x("Für "+w(s(i).access.filter((e=>e.rescue)).length)+" Sektoren existiert ein Rettungskonzept",1)],64))])),_:1},8,["router-link"]),c(s(R),null,{default:m((()=>[x(" Gefährdungen ")])),_:1}),c(s(V),{"router-link":g+"/risks",detail:!1},{default:m((()=>[c(s(u),{slot:"start",icon:s($)},null,8,["icon"]),s(i).access.length>0?(a(),t(Y,{key:0})):G("",!0),c(s(j),{position:"stacked",style:{"z-index":"10"},class:"label"},{default:m((()=>[x("Gefährdungen")])),_:1}),0===p.all?(a(),r(v,{key:1},[x("Es wurden noch keine Gefährdungen hinzugefügt")],64)):(a(),r(v,{key:2},[x(" Von insgesamt "+w(p.all)+" Gefährdungen sind für "+w(p.solved)+" Maßnahmen angegeben. ",1)],64))])),_:1},8,["router-link"])])),_:1})])),_:1}))}}),[["__scopeId","data-v-5937dc4c"]]))}}}));
