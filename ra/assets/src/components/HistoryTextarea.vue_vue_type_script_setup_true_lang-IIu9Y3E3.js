import{y as S,t as d,x as W,C as m,J as k,F as t,u as e,ai as V,E as s,af as B,ag as E,_ as H,T as b,ah as O,V as T,M as g,L as _,S as h,ab as P,W as x,X as G,Q as K,O as y,ac as N,ad as A,ae as J,D as Q}from"../../vendor-fe-4Mo55.js";import{G as R}from"./GenericEditModal-0xE-bflg.js";import{u as U}from"../composables/inputhistory-tJaetQEq.js";import{u as X}from"../../async-vendor-gRlujhSQ.js";const ee=S({__name:"HistoryTextarea",props:{modelValue:{},label:{},inputId:{}},emits:["update:modelValue"],setup(C,{emit:$}){const w=$,p=C,i=U(p.inputId),u=d(!1),r=d(void 0),a=d(""),c=/\n|\.|;/,f=W(()=>{var l;return((l=a.value.split(c).pop())==null?void 0:l.trim())||""}),{results:v}=X(f,i.entries,{matchAllWhenSearchEmpty:!0});function F(l){l.detail.role==="save"&&(w("update:modelValue",a.value),i.add(...a.value.split(c))),u.value=!1}function L(){a.value=p.modelValue}function D(l){return i.remove(l)}function I(l){a.value=a.value.slice(0,-f.value.length||void 0)+l,r.value.$el.setFocus()}return(l,o)=>(m(),k(g,null,[t(e(V),{"auto-grow":"",label:l.label,"label-placement":"floating",value:l.modelValue,onClick:o[0]||(o[0]=n=>u.value=!0)},null,8,["label","value"]),t(R,{"is-open":u.value,onWillDismiss:F,onDidPresent:o[4]||(o[4]=n=>r.value.$el.setFocus()),onWillPresent:L,"icon-save":e(h)},{default:s(()=>[t(e(V),{ref_key:"input",ref:r,"auto-grow":"",label:l.label,"label-placement":"stacked",modelValue:a.value,"onUpdate:modelValue":o[2]||(o[2]=n=>a.value=n),onKeydown:o[3]||(o[3]=B(E(n=>I(e(v)[0].item),["prevent"]),["tab"]))},{default:s(()=>[t(e(H),{slot:"end",fill:"clear",onClick:o[1]||(o[1]=n=>{console.log(a.value,l.modelValue),a.value=l.modelValue})},{default:s(()=>[t(e(b),{slot:"icon-only",icon:e(O)},null,8,["icon"])]),_:1})]),_:1},8,["label","modelValue"]),t(e(T),{ref:"slidingList"},{default:s(()=>[(m(!0),k(g,null,_(e(v),(n,j)=>(m(),Q(e(P),{key:n.item,ref_for:!0,ref:"slidingItem"},{default:s(()=>[t(e(x),{onClick:M=>I(n.item)},{default:s(()=>[t(e(G),null,{default:s(()=>[y(K(n.item),1)]),_:2},1024)]),_:2},1032,["onClick"]),t(e(N),{side:"end"},{default:s(()=>[t(e(A),{color:"danger",onClick:M=>D(n.item)},{default:s(()=>[t(e(b),{icon:e(J),slot:"end"},null,8,["icon"]),y(" LÃ¶schen ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},512)]),_:1},8,["is-open","icon-save"])],64))}});export{ee as _};
