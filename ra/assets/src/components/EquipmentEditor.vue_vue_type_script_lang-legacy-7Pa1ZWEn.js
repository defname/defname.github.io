System.register(["../../vendor-legacy-1yjrExH1.js","../composables/database-legacy-9fIx2aCc.js","./RiskList.vue_vue_type_script_setup_true_lang-legacy-oeAgQIe8.js","./GenericEditModal-legacy-sKjZkeFq.js","./RiskCatalog.vue_vue_type_script_setup_true_lang-legacy-ZuvDcWEU.js","../composables/helpers-legacy-9syT91eV.js","./TagInput.vue_vue_type_script_setup_true_lang-legacy-UXaBI6t-.js","../composables/livequery-legacy-cKPslJOc.js"],(function(e,t){"use strict";var s,i,a,n,u,d,r,c,o,h,p,l,g;return{setters:[e=>{s=e.V,i=e.W,a=e.X,n=e.Y,u=e.Z,d=e._},e=>{r=e.d},e=>{c=e._},e=>{o=e.G},e=>{h=e._},e=>{p=e.p},e=>{l=e._},e=>{g=e.l}],execute:function(){e("_",{components:{IonList:s,IonItem:i,IonLabel:a,IonListHeader:n,IonInput:u,RiskList:c,RiskCatalog:h,GenericEditModal:o,IonButton:d,TagInput:l},emits:["hasSaved","hasAdded"],props:{id:{type:Number},createNew:Boolean,defaultValues:{type:Object,default:{descr:"",tags:[],causeRisks:[]}}},data:()=>({equipment:void 0,addCausedRisks:!1}),computed:{allTags:()=>g.table("equipment").entries().reduce(((e,t)=>(e.push(...t.tags),e)),[])},methods:{loadFromDb(){void 0!==this.id&&r.equipment.get(this.id).then((e=>{void 0!==e?this.equipment=e:p("Es existiert keine Ausrüstung mit der ID "+this.id+" in der Datenbank.","danger")}))},saveToDb(){if(void 0===this.equipment)return void p("Etwas ist schief gelaufen.");if(""===this.equipment.descr)return void p("Die Beschreibung darf nicht leer sein.");const e={descr:this.equipment.descr,tags:[...this.equipment.tags],causeRisks:[...this.equipment.causeRisks]};this.createNew&&r.equipment.add(e).then((t=>{p(e.descr+" wurde hinzugefügt.","success"),this.$emit("hasAdded",{id:t,...this.equipment})})).catch((e=>{throw p("Beim Speichern ist ein Fehler aufgetreten.","danger"),e})),void 0!==this.id?r.equipment.update(this.id,e).then((()=>{p("Änderungen gespeichert.","success"),console.log(e),this.$emit("hasSaved",{id:this.id,...this.equipment})})).catch((e=>{throw p("Beim Speichern ist ein Fehler aufgetreten.","warning"),e})):p("Ungültige ID","danger")}},mounted(){this.equipment=this.defaultValues,console.log(this.equipment),this.loadFromDb()}})}}}));
