System.register(["./riskassessment-legacy--cfx1kYn.js","../vfs_fonts-legacy-jiPiSG0D.js","../../async-vendor-legacy-K7_Bgj6n.js","./database-legacy-9fIx2aCc.js","./md2pdfmake-legacy-GC_rEXmO.js"],(function(e,t){"use strict";var n,a,r,i,s,o;return{setters:[e=>{n=e.a},e=>{a=e.p},e=>{r=e.p},e=>{i=e.S},e=>{s=e.s,o=e.a}],execute:function(){function t(...e){return 0===e.length?0:1===e.length?28.3465*e[0]:e.map((e=>28.3465*e))}function l(e,t){return[{text:"Seite "+e+" von "+t,alignment:"center",margin:[0,5]},{text:["Erstellt am "+new Date(Date.now()).toLocaleDateString("de")+" mit ",{text:"RopeRisk App",bold:!0,italics:!0}],alignment:"center",color:"#AAAAAA"}]}function u(e){return new Date(e).toLocaleDateString("de")}function c(e){return[["Ausführende Firma",e.company],["Datum",u(e.startDate)+(e.endDate?" - "+u(e.endDate):"")],["Einsatzort",e.address],["Durchzuführende Arbeiten",e.jobDescr],["Aufsichtsführender Höhenarbeiter",e.supervisors.map((e=>e.name)).join(", ")]].map((e=>({text:[{text:e[0]+": ",style:"caption"},e[1]],style:"p"})))}function d(e){const n=[["entrance","Einstieg"],["exit","Ausstieg"],["anchorPoints","Anschlagpunkte"],["comment",""]];return e.access.map((e=>[{text:e.title,bold:!0,lineHeight:1.2},...n.filter((t=>""!==e[t[0]])).map((n=>((e,n,a)=>({stack:""!==n?[{text:n+": ",bold:!0},{text:[{text:"foo"}],style:"p"},s(e[a])]:s(e[a]),margin:t(.5,.2,0,0),lineHeight:1.2}))(e,n[1],n[0])))]))}function g(e,t){const n=[[{text:"Gefährdung",style:"tableHeader"},{text:"Maßnahme",style:"tableHeader"}]];return e.categories.forEach((e=>{const a=e.risks.filter((e=>e.risk.sector===t));0!==a.length&&(n.push([{text:e.descr,style:"riskCategory",colSpan:2},{}]),n.push(...a.map((e=>[[{text:e.risk.factor.descr,style:"riskFactor"},e.risk.descr],0===e.measures.length?{text:"Keine Maßnahme vorhanden",style:"noMeasure"}:1===e.measures.length?e.measures[0].descr:{ul:e.measures.map((e=>e.descr))}]))))})),{layout:"riskTable",table:{headerRows:1,widths:["*","*"],body:n}}}e("u",(function(e){const{exportData:a,updateExportData:u}=n(e);return r.tableLayouts={customLayout:{hLineWidth:function(e,t){return 0===e||e===t.table.body.length?0:e===t.table.headerRows?.5:0},vLineWidth:function(e){return 0},hLineColor:function(e){return"#aaa"},paddingLeft:function(e){return 0===e?0:8},paddingRight:function(e,t){return e===t.table.widths.length-1?0:8}},riskTable:{hLineWidth:()=>.5,vLineWidth:()=>.5,hLineColor:()=>"#aaa",vLineColor:()=>"#aaa"}},{open:async()=>{await u(),r.createPdf({watermark:{text:"RopeRisk App",opacity:.03,bold:!0,italics:!1},pageSize:"A4",pageMargins:t(2.5,2,2.5,3),info:{title:"Baustellenplan/Gefährdungsbeurteilung",author:"TODO",creator:"RopeRisk App",producer:"RopeRisk App",subject:"gefährdungsermittlung"},permissions:{modifying:!1,copying:!1,annotating:!1,documentAssembly:!1},footer:l,content:[{text:"Einsatzplanung",style:"title"},{text:"Es wird grundsätzlich nach den geltenden Regeln und Vorschriften der DGUV, dem Arbeitsschutzgesetz, der BetrSichV, den TRBS und der FISAT FSR-SZP gearbeitet",style:"intro"},c(a),{text:"Höhenarbeiter:",style:["caption","p"]},{layout:"customLayout",table:{headerRows:1,widths:["*","auto","auto"],body:[[{text:"Name",style:"tableHeader"},{text:"FISAT Nr.",style:"tableHeader"},{text:"Level",style:"tableHeader"}],...a.technicians.map((e=>{var t;return[e.name,(null===(t=e.fisat)||void 0===t?void 0:t.id)||"",e.fisat?e.fisat.level+"":""]}))]},style:"marginBottom"},{text:"Ausrüstung:",style:["caption","p"]},{ul:a.equipment.map((e=>e.descr)),style:"ul"},{text:"Zugangsverfahren",style:"subheader"},...d(a),{text:"Notfall- und Rettungsplan",style:"subheader"},...a.access.map((e=>[{text:e.title,bold:!0,lineHeight:1.2},s(e.rescue)])),{text:"Gefährdungsermittlung",style:"header",pageBreak:"before"},{text:"Gefahren durch die ausgewählten Zugangstechniken",style:"subheader"},g(a,i.Access),{text:"Gefahren durch die Arbeitsumgebung",style:"subheader"},g(a,i.Environment),{text:"Gefahren durch die Arbeit",style:"subheader"},g(a,i.Work),a.signature?{image:a.signature.signature,width:t(8)}:"Keine Unterschrift"],styles:{defaultStyle:{},title:{fontSize:22,bold:!0,alignment:"center"},header:{fontSize:18,bold:!0},subheader:{fontSize:14,bold:!0,margin:[0,15,0,5]},intro:{margin:22,lineHeight:1.2},p:{margin:[0,5],lineHeight:1.2},ol:{margin:[10,5],lineHeight:1.2},ul:{margin:[10,5],lineHeight:1.2},marginTop:{margin:[0,5,0,0]},marginBottom:{margin:[0,0,0,5]},caption:{bold:!0},tableHeader:{bold:!0},riskFactor:{fontSize:8},riskCategory:{fontSize:12,bold:!0,italics:!0,alignment:"center"},noMeasure:{italics:!0},...o()},pageBreakBefore:function(e,t,n,a){return!1}}).open()}}})),r.vfs=a}}}));
