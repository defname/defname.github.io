System.register(["../../../vendor-legacy-1yjrExH1.js","../../composables/database-legacy-9fIx2aCc.js","../../composables/riskassessment-legacy--cfx1kYn.js","../../composables/livequery-legacy-cKPslJOc.js","../../components/TemplateMainPage.vue_vue_type_script_setup_true_lang-legacy-kHSfOXpp.js","../../composables/helpers-legacy-9syT91eV.js"],(function(e,s){"use strict";var t,l,n,a,r,i,d,o,u,c,m,f,g,b,k,_,p,h,v,y,z,w,C,j,x,D,E,L,S,F,M;return{setters:[e=>{t=e.y,l=e.bo,n=e.C,a=e.D,r=e.E,i=e.F,d=e.u,o=e.a$,u=e.T,c=e.aK,m=e.b1,f=e.J,g=e.L,b=e.M,k=e.b4,_=e.ba,p=e.bb,h=e.Q,v=e.O,y=e.bp,z=e.b3,w=e._,C=e.N,j=e.S,x=e.ae},e=>{D=e.d},e=>{E=e.u,L=e.d},e=>{S=e.l},e=>{F=e._},e=>{M=e.a}],execute:function(){e("_",t({__name:"RiskAssessmentListPage",setup(e){const s=l(),t=S.table("riskassessmentsmeta").entries(),$=E();return(e,l)=>(n(),a(F,null,{default:r((()=>[i(d(m),{slot:"fixed",vertical:"bottom",horizontal:"end"},{default:r((()=>[i(d(o),{onClick:l[0]||(l[0]=e=>{D.riskassessments.add({...L}).then((e=>{const s=Math.floor(Date.now()/1e3);D.riskassessmentsmeta.add({id:e,descr:"Neue Gefährdungsbeurteilung "+e,created:s,lastChange:s}).then((()=>{}))}))})},{default:r((()=>[i(d(u),{icon:d(c)},null,8,["icon"])])),_:1})])),_:1}),(n(!0),f(b,null,g(d(t),(e=>(n(),a(d(k),null,{default:r((()=>[i(d(_),{onClick:t=>{return l=e.id,$.id===l&&s.push("/riskassessment/"+l),void(void 0!==$.id&&l!==$.id&&$.modified()?M("In der geöffneten Einsatzplanung gibt es noch ungespeicherte Änderungen. Diese gehen verloren wenn eine andere geöffnet wird. Soll die Einsatzplanung trotzdem geöffnet werden?",{text:"Öffnen",role:"submit",icon:j,handler:()=>{$.loadFromDb(l)}}):$.loadFromDb(l));var l}},{default:r((()=>[i(d(p),null,{default:r((()=>[v(h(e.descr),1)])),_:2},1024),i(d(y),null,{default:r((()=>[v("Zuletzt geändert: "+h(new Date(1e3*e.lastChange).toLocaleString("de")),1)])),_:2},1024)])),_:2},1032,["onClick"]),e.id===d($).id?(n(),a(d(z),{key:0},{default:r((()=>[i(d(w),{size:"small",fill:"clear",color:"danger",onClick:s=>{return t=e.id,void M("Soll der Einsatzplan wirklich unwideruflich gelöscht werden?",{text:"Löschen",icon:x,handler:()=>{S.table("riskassessments").delete(t),S.table("riskassessmentsmeta").delete(t)}});var t}},{default:r((()=>[v("Löschen")])),_:2},1032,["onClick"]),i(d(w),{size:"small",fill:"clear","router-link":`/riskassessment/${e.id}/export`},{default:r((()=>[v("Export")])),_:2},1032,["router-link"]),i(d(w),{size:"small",fill:"clear","router-link":`/riskassessment/${e.id}`},{default:r((()=>[v("Bearbeiten")])),_:2},1032,["router-link"])])),_:2},1024)):C("",!0)])),_:2},1024)))),256))])),_:1}))}}))}}}));
