System.register(["../../../vendor-legacy-1yjrExH1.js","../../composables/riskassessment-legacy--cfx1kYn.js","../../components/GenericEditModal-legacy-sKjZkeFq.js","../../composables/database-legacy-9fIx2aCc.js","../../components/TemplateRiskAssessmentPage-legacy-u2VvndrO.js","../../components/SignatureInput-legacy-TDL-K6tV.js","../../composables/pdfexport-legacy-mAKu0BRt.js"],(function(n,e){"use strict";var l,t,s,u,r,i,a,c,o,d,g,h,p,m,f,k,y,b,v,T,A,D,E,M,_,H,L;return{setters:[n=>{l=n.y,t=n.t,s=n.bi,u=n.C,r=n.D,i=n.E,a=n.F,c=n.O,o=n.u,d=n._,g=n.ba,h=n.bb,p=n.b3,m=n.P,f=n.Q,k=n.J,y=n.N,b=n.L,v=n.M,T=n.b4},n=>{A=n.u,D=n.a},n=>{E=n.G},n=>{M=n.S},n=>{_=n.T},n=>{H=n.S},n=>{L=n.u}],execute:function(){const e={id:"print"},j=m("h1",null,"Einsatzplanung",-1),S=m("p",null," Es wird grundsätzlich nach den geltenden Regeln und Vorschriften der DGUV, dem Arbeitsschutzgesetz, der BetrSichV, den TRBS und der FISAT FSR-SZP gearbeitet. ",-1),z=m("strong",null,"Ausführende Firma:",-1),G=m("strong",null,"Einsatzdatum:",-1),w=m("strong",null,"Einsatzort:",-1),x=m("strong",null,"Durchzuführende Arbeiten:",-1),P=m("br",null,null,-1),F={key:0},R=m("strong",null,"Aufsichtsführende Höhenarbeiter:",-1),C=m("p",null,[m("strong",null,"Höhenarbeiter:")],-1),I=m("thead",null,[m("tr",null,[m("th",null,"Name"),m("th",null,"FISAT-Nr"),m("th",null,"Level")])],-1),N=m("strong",null,"Ausrüstung:",-1),U=m("h2",null,"Zugangsverfahren",-1),B={key:0},V=m("strong",null,"Einstieg:",-1),W=["innerHTML"],Z={key:1},O=m("strong",null,"Ausstieg:",-1),$=["innerHTML"],q={key:2},J=m("strong",null,"Anschlagpunkte:",-1),Q=["innerHTML"],K=["innerHTML"],X=m("h2",null,"Notfall- und Rettungsplan",-1),Y=["innerHTML"],nn=m("h1",null,"Gefährdungsermittlung",-1),en={key:0},ln={key:1},tn={key:2},sn=m("thead",null,[m("tr",null,[m("th",null,"Gefährdung"),m("th",null,"Maßnahme")])],-1),un={colspan:"2"},rn={class:"factor"},an={key:0},cn=["src"],on={key:2},dn=[m("strong",null,"Ohne Unterschrift",-1)],gn=m("h1",null,"Empfangsbestätigung",-1),hn=m("p",null," Es wird bestätigt, über Gefahren und Maßnahmen aufgeklärt worden zu sein. ",-1),pn=["src"];n("_",l({__name:"RiskAssessmentExport",setup(n){const l=A(),{exportData:mn,updateExportData:fn}=D(),{open:kn}=L(),yn=t(void 0),bn=t(!1);async function vn(){!function(n){const e=window.open("","print","");if(!e)return;e.open(),e.document.write(`<html>\n    <head>\n        <link rel="stylesheet" href="/ra/print.css" />\n    </head>\n    <body>${n.outerHTML}\n    </body>\n    </html>`),e.document.close();const l=e.document.createElement("script");l.setAttribute("src","/ra/print.js"),e.document.head.appendChild(l)}(document.getElementById("print"))}function Tn(n){l.signature=n,fn()}return s((()=>{fn()})),(n,t)=>(u(),r(_,null,{default:i((()=>[a(o(d),{"router-link":"/riskassessment/"+o(l).id+"/sign"},{default:i((()=>[c("Unterzeichnen (Technicker)")])),_:1},8,["router-link"]),a(o(d),{onClick:t[0]||(t[0]=n=>bn.value=!0)},{default:i((()=>[c("Unterzeichnen")])),_:1}),a(o(d),{onClick:t[1]||(t[1]=n=>vn())},{default:i((()=>[c("Drucken")])),_:1}),a(o(d),{onClick:t[2]||(t[2]=n=>o(kn)())},{default:i((()=>[c("PDF")])),_:1}),a(E,{"is-open":bn.value,"hide-save":"",onWillDismiss:t[3]||(t[3]=n=>bn.value=!1),onDidPresent:t[4]||(t[4]=e=>n.$refs.signatureinput.updateDimensions())},{default:i((()=>[a(H,{onSignature:Tn,ref_key:"signatureinput",ref:yn},null,512)])),_:1},8,["is-open"]),a(o(T),null,{default:i((()=>[a(o(g),null,{default:i((()=>[a(o(h),null,{default:i((()=>[c("Druckvorschau")])),_:1})])),_:1}),a(o(p),null,{default:i((()=>[m("div",e,[j,S,m("p",null,[z,c(" "+f(o(mn).company),1)]),m("p",null,[G,c(" "+f(o(mn).startDate)+" "+f(o(mn).endDate?o(mn).endDate:""),1)]),m("p",null,[w,c(" "+f(o(mn).address),1)]),m("p",null,[x,P,c(" "+f(o(mn).jobDescr),1)]),o(mn).supervisors?(u(),k("p",F,[R,c(" "+f(o(mn).supervisors.map((n=>n.name)).join(", ")),1)])):y("",!0),C,m("table",null,[I,(u(!0),k(v,null,b(o(mn).technicians,(n=>{var e,l;return u(),k("tr",null,[m("td",null,f(n.name),1),m("td",null,f(null===(e=n.fisat)||void 0===e?void 0:e.id),1),m("td",null,f(null===(l=n.fisat)||void 0===l?void 0:l.level),1)])})),256))]),m("p",null,[N,m("ul",null,[(u(!0),k(v,null,b(o(mn).equipment,(n=>(u(),k("li",null,f(n.descr),1)))),256))])]),U,(u(!0),k(v,null,b(o(mn).access,(n=>(u(),k(v,null,[m("p",null,[m("strong",null,f(n.title),1)]),n.access?(u(),k("p",B,[V,c(),m("span",{innerHTML:n.access},null,8,W)])):y("",!0),n.exit?(u(),k("p",Z,[O,c(),m("span",{innerHTML:n.exit},null,8,$)])):y("",!0),n.anchorPoints?(u(),k("p",q,[J,c(),m("span",{innerHTML:n.anchorPoints},null,8,Q)])):y("",!0),n.comment?(u(),k("p",{key:3,innerHTML:n.comment},null,8,K)):y("",!0)],64)))),256)),X,(u(!0),k(v,null,b(o(mn).access,(n=>(u(),k(v,null,[m("p",null,[m("strong",null,f(n.title),1)]),m("p",{innerHTML:n.rescue},null,8,Y)],64)))),256)),nn,(u(!0),k(v,null,b([o(M).Access,o(M).Environment,o(M).Work],(n=>(u(),k(v,null,[n===o(M).Access?(u(),k("h3",en,"Gefahren durch die ausgewählten Zugangstechniken")):n===o(M).Environment?(u(),k("h3",ln,"Gefahren durch die Arbeitsumgebung")):(u(),k("h3",tn,"Gefahren durch die Arbeit")),m("table",null,[sn,m("tbody",null,[(u(!0),k(v,null,b(o(mn).categories,(e=>(u(),k(v,null,[e.risks.filter((e=>e.risk.sector===n)).length?(u(),k(v,{key:0},[m("tr",null,[m("th",un,f(e.descr),1)]),(u(!0),k(v,null,b(e.risks.filter((e=>e.risk.sector===n)),(n=>(u(),k("tr",null,[m("td",null,[m("span",rn,f(n.risk.factor.descr),1),c(" "+f(n.risk.descr),1)]),m("td",null,[n.measures.length>1?(u(),k("ul",an,[(u(!0),k(v,null,b(n.measures,(n=>(u(),k("li",null,f(n.descr),1)))),256))])):1===n.measures.length?(u(),k(v,{key:1},[c(f(n.measures[0].descr),1)],64)):y("",!0)])])))),256))],64)):y("",!0)],64)))),256))])])],64)))),256)),o(mn).signature?(u(),k("img",{key:1,src:o(mn).signature.signature},null,8,cn)):(u(),k("p",on,dn)),gn,hn,(u(!0),k(v,null,b(o(mn).signatures,(n=>(u(),k("div",null,[m("img",{src:n.signature},null,8,pn)])))),256))])])),_:1})])),_:1})])),_:1}))}}))}}}));
