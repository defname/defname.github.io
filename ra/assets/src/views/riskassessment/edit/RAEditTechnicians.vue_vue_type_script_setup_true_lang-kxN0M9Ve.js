import{y as I,x as V,t as C,aD as f,C as u,D as d,E as t,F as a,u as e,br as c,X as m,O as r,bs as j,Q as v,a0 as p,N as b,W as x,J as B,a$ as T,T as A,aK as R,b1 as S,M as w}from"../../../../vendor-fe-4Mo55.js";import{_ as g}from"../../../components/TechniciansList.vue_vue_type_script_setup_true_lang-c420XbUd.js";import{u as D}from"../../../composables/riskassessment-yedfBpr3.js";import{l as _}from"../../../composables/livequery-P21yeuae.js";import{T as F}from"../../../components/TemplateRiskAssessmentPage-jWM7FwVS.js";const O=I({__name:"RAEditTechnicians",setup(N){const o=D(),k=V(()=>_.table("technicians").isReady().value?o.technicians.map(n=>_.table("technicians").get(n)):[]),i=C("selected");["selected","available"].includes(f().query.segment)&&(i.value=f().query.segment);function y(n){if(n.id===void 0){console.warn("Technician ID is undefined");return}if(!n.fisat||n.fisat.level!==3)return;const l=o.supervisors.indexOf(n.id);console.log(l),l!==-1?o.supervisors.splice(l,1):o.supervisors.push(n.id)}return(n,l)=>(u(),d(F,null,{default:t(()=>[a(e(j),{value:i.value,onIonChange:l[0]||(l[0]=s=>{i.value=s.detail.value,n.$router.replace({query:{segment:s.detail.value}})})},{default:t(()=>[a(e(c),{value:"selected"},{default:t(()=>[a(e(m),null,{default:t(()=>[r("Ausgewählt")]),_:1})]),_:1}),a(e(c),{value:"available"},{default:t(()=>[a(e(m),null,{default:t(()=>[r("Verfügbar")]),_:1})]),_:1})]),_:1},8,["value"]),i.value==="selected"?(u(),d(g,{key:0,entries:k.value,modelValue:e(o).technicians,"onUpdate:modelValue":l[1]||(l[1]=s=>e(o).technicians=s),inverted:"","forbid-deletion":""},{default:t(s=>[a(e(x),null,{default:t(()=>[a(e(m),null,{default:t(()=>[r(v(s.object.name),1)]),_:2},1024),s.object.fisat?(u(),d(e(p),{key:0,slot:"end",color:s.object.fisat.level===3?"tertiary":"medium",onClick:$=>y(s.object)},{default:t(()=>[r(" Level "+v(s.object.fisat.level),1)]),_:2},1032,["color","onClick"])):b("",!0),e(o).supervisors.includes(s.object.id)?(u(),d(e(p),{key:1,slot:"start"},{default:t(()=>[r("Supervisor")]),_:1})):b("",!0)]),_:2},1024)]),_:1},8,["entries","modelValue"])):(u(),B(w,{key:1},[a(e(S),{slot:"fixed",vertical:"bottom",horizontal:"end"},{default:t(()=>[a(e(T),{"router-link":"/technicians/new"},{default:t(()=>[a(e(A),{icon:e(R)},null,8,["icon"])]),_:1})]),_:1}),a(g,{modelValue:e(o).technicians,"onUpdate:modelValue":l[2]||(l[2]=s=>e(o).technicians=s)},null,8,["modelValue"])],64))]),_:1}))}});export{O as _};
