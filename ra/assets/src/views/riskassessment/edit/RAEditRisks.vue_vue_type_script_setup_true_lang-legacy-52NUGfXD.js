System.register(["../../../../vendor-legacy-1yjrExH1.js","../../../composables/riskassessment-legacy--cfx1kYn.js","../../../components/RiskCatalog.vue_vue_type_script_setup_true_lang-legacy-ZuvDcWEU.js","../../../components/GenericEditModal-legacy-sKjZkeFq.js","../../../composables/liveriskstree-legacy-LprV0t_9.js","../../../composables/livequery-legacy-cKPslJOc.js","../../../components/AddedByList.vue_vue_type_script_setup_true_lang-legacy-pD1ZQYNg.js","../../../components/TemplateRiskAssessmentPage-legacy-u2VvndrO.js","../../../composables/helpers-legacy-9syT91eV.js"],(function(e,l){"use strict";var s,a,t,i,n,r,o,u,d,c,g,k,_,f,m,v,y,p,b,h,j,R,A,C,M,x,B,L,q,D,G,U,V,Z,w,z,E,T,P,S,W,$,F,I,J;return{setters:[e=>{s=e.y,a=e.t,t=e.bi,i=e.x,n=e.aD,r=e.C,o=e.D,u=e.E,d=e.F,c=e.u,g=e.br,k=e.X,_=e.O,f=e.bs,m=e.J,v=e.a$,y=e.T,p=e.aK,b=e.b1,h=e.M,j=e.L,R=e.N,A=e.b4,C=e.S,M=e.ba,x=e.bp,B=e.Q,L=e.bb,q=e.am,D=e.b3,G=e.V,U=e.Y,V=e.W,Z=e._,w=e.P,z=e.ae},e=>{E=e.u,T=e.b},e=>{P=e._},e=>{S=e.G},e=>{W=e.l},e=>{$=e.l},e=>{F=e._},e=>{I=e.T},e=>{J=e.a}],execute:function(){const l={class:"ion-text-right"};e("_",s({__name:"RAEditRisks",setup(e){a(0),t((()=>console.log("will enter")));const s=E(),K=T(),N=$.table("measures"),O=i((()=>W.isReady()?K.value.map((e=>({risk:W.get(e),meta:s.getMeta(e)}))):[])),Q=a("Z");a(-1);const X=i((()=>O.value.filter((e=>e.risk.sector===Q.value))));["Z","U","A"].includes(n().query.sector)&&(Q.value=n().query.sector);const Y=a(!1);function H(e){J("Die Gefährdung wirklich aus der Liste entfernen?",{text:"Löschen",role:"destructive",icon:z,handler:()=>{!function(e){s.risks=s.risks.filter((l=>l!==e.risk.id))}(e)}})}const ee="/riskassessment/"+s.id+"/risks";return(e,a)=>(r(),o(I,null,{default:u((()=>[d(c(f),{value:Q.value,onIonChange:a[0]||(a[0]=l=>{Q.value=l.detail.value,e.$router.replace({query:{sector:l.detail.value}})})},{default:u((()=>[d(c(g),{value:"Z"},{default:u((()=>[d(c(k),null,{default:u((()=>[_("Zugang")])),_:1})])),_:1}),d(c(g),{value:"U"},{default:u((()=>[d(c(k),null,{default:u((()=>[_("Umgebung")])),_:1})])),_:1}),d(c(g),{value:"A"},{default:u((()=>[d(c(k),null,{default:u((()=>[_("Arbeit")])),_:1})])),_:1})])),_:1},8,["value"]),c(s).ready&&c(N).isReady()?(r(),m(h,{key:0},[d(c(b),{slot:"fixed",vertical:"bottom",horizontal:"end"},{default:u((()=>[d(c(v),{onClick:a[1]||(a[1]=e=>Y.value=!0)},{default:u((()=>[d(c(y),{icon:c(p)},null,8,["icon"])])),_:1})])),_:1}),(r(!0),m(h,null,j(X.value,(e=>(r(),o(c(A),{key:e.risk.id,class:"risk-card"},{default:u((()=>[d(c(y),{icon:c(C),color:"success",class:"checkmark ion-padding ion-float-right",size:"large"},null,8,["icon"]),d(c(M),null,{default:u((()=>[d(c(x),null,{default:u((()=>{var l,s;return[_(B(null===(l=e.risk.factor)||void 0===l||null===(l=l.category)||void 0===l?void 0:l.descr)+" ➤ "+B(null===(s=e.risk.factor)||void 0===s?void 0:s.descr),1)]})),_:2},1024),d(c(L),{style:{"font-size":"1.1rem"}},{default:u((()=>[_(B(e.risk.descr),1)])),_:2},1024),c(s).meta[e.risk.id].addedBy.length>0?(r(),o(c(q),{key:0,style:{"margin-bottom":"1rem"}},{default:u((()=>[d(F,{"trigger-list":c(s).meta[e.risk.id].addedBy},null,8,["trigger-list"])])),_:2},1024)):R("",!0)])),_:2},1024),d(c(D),{class:"ion-no-margin ion-no-padding"},{default:u((()=>[c(s).getMeasures(e.risk.id).length?(r(),o(c(G),{key:0,class:"risk-solved ion-no-padding ion-no-margin",lines:"none"},{default:u((()=>[d(c(U),{class:"ion-no-margin"},{default:u((()=>[d(c(k),null,{default:u((()=>[_("Gewählte Maßnahmen")])),_:1})])),_:1}),(r(!0),m(h,null,j(c(s).getMeasures(e.risk.id),(e=>(r(),o(c(V),{class:"ion-no-margin"},{default:u((()=>[_(B(c(N).get(e).descr),1)])),_:2},1024)))),256))])),_:2},1024)):R("",!0),w("div",l,[0===c(s).meta[e.risk.id].addedBy.length?(r(),o(c(Z),{key:0,fill:"clear",color:"danger",onClick:l=>H(e)},{default:u((()=>[_("Löschen")])),_:2},1032,["onClick"])):R("",!0),d(c(Z),{fill:"clear","router-link":ee+"/"+e.risk.id},{default:u((()=>[_("Bearbeiten")])),_:2},1032,["router-link"])])])),_:2},1024)])),_:2},1024)))),128)),d(S,{"is-open":Y.value,onWillDismiss:a[3]||(a[3]=e=>Y.value=!1),"hide-save":""},{default:u((()=>[d(P,{modelValue:c(s).risks,"onUpdate:modelValue":a[2]||(a[2]=e=>c(s).risks=e),sector:Q.value,"link-to-function":()=>{}},null,8,["modelValue","sector"])])),_:1},8,["is-open"])],64)):R("",!0)])),_:1}))}}))}}}));
