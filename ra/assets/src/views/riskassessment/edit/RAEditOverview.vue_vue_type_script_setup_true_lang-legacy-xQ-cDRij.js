System.register(["../../../../vendor-legacy-1yjrExH1.js","../../../composables/riskassessment-legacy--cfx1kYn.js","../../../components/Checkmark-legacy-G9Td8o7H.js","../../../composables/livequery-legacy-cKPslJOc.js","../../../components/TemplateRiskAssessmentPage-legacy-u2VvndrO.js","../../../components/HistoryInput.vue_vue_type_script_setup_true_lang-legacy-5ZvBTB0G.js","../../../components/HistoryTextarea.vue_vue_type_script_setup_true_lang-legacy-c8gYYWi0.js"],(function(e,l){"use strict";var n,t,s,a,i,o,u,r,c,d,k,g,y,m,p,_,f,h,b,v,j,w,x,z,D,E,A,V,R,S,q,T,G,B,C,F,P;return{setters:[e=>{n=e.y,t=e.x,s=e.bh,a=e.v,i=e.C,o=e.D,u=e.E,r=e.F,c=e.u,d=e.Y,k=e.O,g=e.W,y=e.T,m=e.bt,p=e.N,_=e.bu,f=e.bv,h=e.Z,b=e.bw,v=e.bx,j=e.X,w=e.J,x=e.M,z=e.L,D=e.by,E=e.bz,A=e.Q,V=e.bA,R=e.bB,S=e.V},e=>{q=e.u,T=e.b},e=>{G=e.C},e=>{B=e.l},e=>{C=e.T},e=>{F=e._},e=>{P=e._}],execute:function(){const l={key:1,class:"nested-list",lines:"none"},H={class:"ion-no-padding ion-no-margin nested-list-item",lines:"none"},M={key:1,class:"nested-list ion-no-padding",lines:"none"},O={class:"ion-no-padding ion-no-margin nested-list-item",lines:"none",size:"small"};e("_",n({__name:"RAEditOverview",setup(e){const n=B.table("technicians"),U=B.table("equipment"),Z=q(),I=t((()=>n.isReady().value?Z.technicians.map((e=>n.get(e))):[])),J=t((()=>U.isReady().value?Z.equipment.map((e=>U.get(e))):[])),L="/riskassessment/"+Z.id,N=T(),Q=s({direct:-1,all:-1,solved:-1});return a(N,(async()=>{await Z.ready,Q.direct=Z.risks.length;const e=await Z.calcAllRisks();Q.all=e.length,Q.solved=e.filter((e=>void 0!==Z.measures[e]&&Z.measures[e].length>0)).length})),(e,n)=>(i(),o(C,null,{default:u((()=>[r(c(S),{lines:"full"},{default:u((()=>[r(c(d),null,{default:u((()=>[k(" Allgemeines ")])),_:1}),r(c(g),null,{default:u((()=>[r(c(y),{slot:"start",icon:c(m)},null,8,["icon"]),c(Z).company?(i(),o(G,{key:0})):p("",!0),r(F,{modelValue:c(Z).company,"onUpdate:modelValue":n[0]||(n[0]=e=>c(Z).company=e),"input-id":"ra_company",label:"Ausführende Firma"},null,8,["modelValue"])])),_:1}),r(c(g),null,{default:u((()=>[r(c(y),{slot:"start",icon:c(_)},null,8,["icon"]),c(Z).jobDescr?(i(),o(G,{key:0})):p("",!0),r(P,{label:"Beschreibung der Tätigkeit","input-id":"ra_jobdescr",modelValue:c(Z).jobDescr,"onUpdate:modelValue":n[1]||(n[1]=e=>c(Z).jobDescr=e)},null,8,["modelValue"])])),_:1}),r(c(g),null,{default:u((()=>[r(c(y),{slot:"start",icon:c(f)},null,8,["icon"]),c(Z).address?(i(),o(G,{key:0})):p("",!0),r(c(h),{"router-link":L+"/location",label:"Addresse","label-placement":"floating",readonly:"",value:c(Z).address},null,8,["router-link","value"])])),_:1}),r(c(g),null,{default:u((()=>[r(c(y),{slot:"start",icon:c(b)},null,8,["icon"]),c(Z).startDate?(i(),o(G,{key:0})):p("",!0),r(c(h),{"router-link":L+"/date",label:"Datum","label-placement":"floating",readonly:"",value:c(Z).startDate+(c(Z).endDate?" - "+c(Z).endDate:"")},null,8,["router-link","value"])])),_:1}),r(c(g),{"router-link":L+"/equipment",detail:!1},{default:u((()=>[r(c(y),{slot:"start",icon:c(v)},null,8,["icon"]),c(Z).equipment?(i(),o(G,{key:0})):p("",!0),r(c(j),{position:"stacked",style:{"z-index":"10"},class:"label"},{default:u((()=>[k("Ausrüstung")])),_:1}),J.value.length>0?(i(),w("ul",l,[(i(!0),w(x,null,z(J.value,(e=>(i(),w("li",H,A(e.descr),1)))),256))])):p("",!0)])),_:1},8,["router-link"]),r(c(g),{"router-link":L+"/technicians",detail:!1},{default:u((()=>[r(c(y),{slot:"start",icon:c(D)},null,8,["icon"]),c(Z).technicians.length>0?(i(),o(G,{key:0})):p("",!0),r(c(j),{position:"stacked",style:{"z-index":"10"},class:"label"},{default:u((()=>[k("Personal")])),_:1}),c(Z).technicians.length>0?(i(),w("ul",M,[(i(!0),w(x,null,z(I.value,(e=>(i(),w("li",O,A(e.name),1)))),256))])):(i(),w(x,{key:2},[k(" Es wurde noch kein Personal ausgewählt ")],64))])),_:1},8,["router-link"]),r(c(d),null,{default:u((()=>[k(" Zugang ")])),_:1}),r(c(g),{"router-link":L+"/access",detail:!1},{default:u((()=>[r(c(y),{slot:"start",icon:c(E)},null,8,["icon"]),c(Z).access.length>0?(i(),o(G,{key:0})):p("",!0),r(c(j),{position:"stacked",style:{"z-index":"10"},class:"label"},{default:u((()=>[k("Sektoren")])),_:1}),0===c(Z).access.length?(i(),w(x,{key:1},[k("Es wurden noch keine Sektoren definiert")],64)):1===c(Z).access.length?(i(),w(x,{key:2},[k("Es wurde ein Sektor definiert")],64)):(i(),w(x,{key:3},[k("Es wurden bisher "+A(c(Z).access.length)+" Sektoren definiert",1)],64))])),_:1},8,["router-link"]),r(c(g),{"router-link":L+"/rescue",detail:!1},{default:u((()=>[r(c(y),{slot:"start",icon:c(V)},null,8,["icon"]),c(Z).access.length>0?(i(),o(G,{key:0})):p("",!0),r(c(j),{position:"stacked",style:{"z-index":"10"},class:"label"},{default:u((()=>[k("Rettungskonzept")])),_:1}),0===c(Z).access.length?(i(),w(x,{key:1},[k("Es wurden noch keine Sektoren definiert")],64)):(i(),w(x,{key:2},[k("Für "+A(c(Z).access.filter((e=>e.rescue)).length)+" Sektoren existiert ein Rettungskonzept",1)],64))])),_:1},8,["router-link"]),r(c(d),null,{default:u((()=>[k(" Gefährdungen ")])),_:1}),r(c(g),{"router-link":L+"/risks",detail:!1},{default:u((()=>[r(c(y),{slot:"start",icon:c(R)},null,8,["icon"]),c(Z).access.length>0?(i(),o(G,{key:0})):p("",!0),r(c(j),{position:"stacked",style:{"z-index":"10"},class:"label"},{default:u((()=>[k("Gefährdungen")])),_:1}),0===Q.all?(i(),w(x,{key:1},[k("Es wurden noch keine Gefährdungen hinzugefügt")],64)):(i(),w(x,{key:2},[k(" Von insgesamt "+A(Q.all)+" Gefährdungen sind für "+A(Q.solved)+" Maßnahmen angegeben. ",1)],64))])),_:1},8,["router-link"])])),_:1})])),_:1}))}}))}}}));
