import{d as Kt,x as $t,o as Et,c as Vt,w as $e,b as Ge,f as Ee,G as Jt,H as Mt,J as Gt,j as rt,K as Yt,r as mt,t as gt,k as Nt,aw as Pt,g as qt,l as zt,I as Ht,a as Ct}from"./index-MjQ2o11G.js";import{_ as Xt}from"./TemplateMainPage.vue_vue_type_script_setup_true_lang-eUXUGd65.js";import{X as Ce,d as pt}from"./database-Jpx-SvdX.js";import{C as Bt}from"./index-0jqLegA0.js";import{F as wt,a as Wt,D as Qt}from"./index-QfXBZMna.js";import{p as it}from"./helpers-67hrFqte.js";import{b as jt}from"./index-sAmKBX2p.js";import"./index-plEVgq0P.js";function Zt(h){const y=new FileReader;return y.readAsDataURL(h),new Promise(c=>{y.onloadend=()=>{c(y.result)}})}function en(h){const y=new Date(Date.now()),c=y.getHours()*60*60+y.getMinutes()*60+y.getSeconds(),v=(y.getMonth()+1).toString().padStart(2,"0")+y.getDate().toString().padStart(2,"0")+c,g=h.split(".");if(g.length===1)return h+v;const f=g.splice(-1);return g.join(".")+v+"."+f}const tn=nn;async function nn(h,y,c=!1,v=Qt.Documents){const g=en(y);if(!Bt.isNativePlatform()){const a=jt({dataType:"Blob",types:[{description:"JSON Datei",accept:{"application/json":[".json"]}}]});if(!a.isSupported.value){const I=URL.createObjectURL(h),E=document.createElement("a");E.href=I,c||(E.download=g),document.body.appendChild(E),E.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),document.body.removeChild(E);return}a.data.value=h;try{await a.saveAs({suggestedName:y}),it("Datei gespeichert: "+a.fileName.value,"success")}catch(I){}return a.fileName.value}if(!await wt.checkPermissions().then(a=>{if(a.publicStorage==="granted")return!0;throw Error}).catch(()=>wt.requestPermissions().then(a=>a.publicStorage==="granted"))){it("Keine Erlaubnis zum Speichern von Dateien erteilt.",void 0,"middle");return}return wt.writeFile({path:"RopeRisk/"+g,directory:v,data:await Zt(h),recursive:!0}).then(a=>(it("Datei gespeichert: "+a.uri,"success"),c&&Wt.open(a.uri,"application/pdf"),a.uri)).catch(()=>{throw it("Beim Speichern ist ein Fehler aufgetreten.","danger"),Error()})}var It={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function at(h,y,c,v){function g(f){return f instanceof c?f:new c(function(a){a(f)})}return new(c||(c=Promise))(function(f,a){function I(N){try{s(v.next(N))}catch($){a($)}}function E(N){try{s(v.throw(N))}catch($){a($)}}function s(N){N.done?f(N.value):g(N.value).then(I,E)}s((v=v.apply(h,y||[])).next())})}function Qe(h,y){var c={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},v,g,f,a;return a={next:I(0),throw:I(1),return:I(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function I(s){return function(N){return E([s,N])}}function E(s){if(v)throw new TypeError("Generator is already executing.");for(;c;)try{if(v=1,g&&(f=s[0]&2?g.return:s[0]?g.throw||((f=g.return)&&f.call(g),0):g.next)&&!(f=f.call(g,s[1])).done)return f;switch(g=0,f&&(s=[s[0]&2,f.value]),s[0]){case 0:case 1:f=s;break;case 4:return c.label++,{value:s[1],done:!1};case 5:c.label++,g=s[1],s=[0];continue;case 7:s=c.ops.pop(),c.trys.pop();continue;default:if(f=c.trys,!(f=f.length>0&&f[f.length-1])&&(s[0]===6||s[0]===2)){c=0;continue}if(s[0]===3&&(!f||s[1]>f[0]&&s[1]<f[3])){c.label=s[1];break}if(s[0]===6&&c.label<f[1]){c.label=f[1],f=s;break}if(f&&c.label<f[2]){c.label=f[2],c.ops.push(s);break}f[2]&&c.ops.pop(),c.trys.pop();continue}s=y.call(h,c)}catch(N){s=[6,N],g=0}finally{v=f=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function rn(h){var y=[h.schema.primKey].concat(h.schema.indexes);return y.map(function(c){return c.src}).join(",")}function an(h){for(var y={},c=0,v=h.tables;c<v.length;c++){var g=v[c];y[g.name]=g.schema}return y}function kt(h,y){return new Promise(function(c,v){var g=new FileReader;g.onabort=function(f){return v(new Error("file read aborted"))},g.onerror=function(f){return v(f.target.error)},g.onload=function(f){return c(f.target.result)},y==="binary"?g.readAsArrayBuffer(h):g.readAsText(h)})}function Lt(h,y){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var c=new FileReaderSync,v=y==="binary"?c.readAsArrayBuffer(h):c.readAsText(h);return v}var Ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tt(h,y){return y={exports:{}},h(y,y.exports),y.exports}var vt=Tt(function(h,y){(function(c,v){h.exports=v()})(Ot,function(){function c(l){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c=function(d){return typeof d}:c=function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},c(l)}function v(l,d,b,w,_,H,Q){try{var Y=l[H](Q),k=Y.value}catch(Te){b(Te);return}Y.done?d(k):Promise.resolve(k).then(w,_)}function g(l){return function(){var d=this,b=arguments;return new Promise(function(w,_){var H=l.apply(d,b);function Q(k){v(H,w,_,Q,Y,"next",k)}function Y(k){v(H,w,_,Q,Y,"throw",k)}Q(void 0)})}}function f(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}function a(l,d){for(var b=0;b<d.length;b++){var w=d[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(l,w.key,w)}}function I(l,d,b){return d&&a(l.prototype,d),b&&a(l,b),l}function E(l,d,b){return d in l?Object.defineProperty(l,d,{value:b,enumerable:!0,configurable:!0,writable:!0}):l[d]=b,l}function s(l,d){var b=Object.keys(l);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(l);d&&(w=w.filter(function(_){return Object.getOwnPropertyDescriptor(l,_).enumerable})),b.push.apply(b,w)}return b}function N(l){for(var d=1;d<arguments.length;d++){var b=arguments[d]!=null?arguments[d]:{};d%2?s(Object(b),!0).forEach(function(w){E(l,w,b[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(b)):s(Object(b)).forEach(function(w){Object.defineProperty(l,w,Object.getOwnPropertyDescriptor(b,w))})}return l}function $(l,d){return D(l)||se(l,d)||de()}function Oe(l){return he(l)||q(l)||Le()}function he(l){if(Array.isArray(l)){for(var d=0,b=new Array(l.length);d<l.length;d++)b[d]=l[d];return b}}function D(l){if(Array.isArray(l))return l}function q(l){if(Symbol.iterator in Object(l)||Object.prototype.toString.call(l)==="[object Arguments]")return Array.from(l)}function se(l,d){if(Symbol.iterator in Object(l)||Object.prototype.toString.call(l)==="[object Arguments]"){var b=[],w=!0,_=!1,H=void 0;try{for(var Q=l[Symbol.iterator](),Y;!(w=(Y=Q.next()).done)&&(b.push(Y.value),!(d&&b.length===d));w=!0);}catch(k){_=!0,H=k}finally{try{!w&&Q.return!=null&&Q.return()}finally{if(_)throw H}}return b}}function Le(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function de(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var T=function l(d){f(this,l),this.p=new Promise(d)};T.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(T.prototype[Symbol.toStringTag]="TypesonPromise"),T.prototype.then=function(l,d){var b=this;return new T(function(w,_){b.p.then(function(H){w(l?l(H):H)}).catch(function(H){return d?d(H):Promise.reject(H)}).then(w,_)})},T.prototype.catch=function(l){return this.then(null,l)},T.resolve=function(l){return new T(function(d){d(l)})},T.reject=function(l){return new T(function(d,b){b(l)})},["all","race"].forEach(function(l){T[l]=function(d){return new T(function(b,w){Promise[l](d.map(function(_){return _&&_.constructor&&_.constructor.__typeson__type__==="TypesonPromise"?_.p:_})).then(b,w)})}});var ue={},V=ue.toString,Se={}.hasOwnProperty,we=Object.getPrototypeOf,Ne=Se.toString;function u(l,d){return z(l)&&typeof l.then=="function"&&(!d||typeof l.catch=="function")}function r(l){return V.call(l).slice(8,-1)}function m(l,d){if(!l||c(l)!=="object")return!1;var b=we(l);if(!b)return d===null;var w=Se.call(b,"constructor")&&b.constructor;return typeof w!="function"?d===null:d===w||d!==null&&Ne.call(w)===Ne.call(d)||typeof d=="function"&&typeof w.__typeson__type__=="string"&&w.__typeson__type__===d.__typeson__type__}function p(l){if(!l||r(l)!=="Object")return!1;var d=we(l);return d?m(l,Object):!0}function Z(l){if(!l||r(l)!=="Object")return!1;var d=we(l);return d?m(l,Object)||Z(d):!0}function z(l){return l&&c(l)==="object"}function le(l){return l.replace(/~/g,"~0").replace(/\./g,"~1")}function ye(l){return l.replace(/~1/g,".").replace(/~0/g,"~")}function ve(l,d){if(d==="")return l;var b=d.indexOf(".");if(b>-1){var w=l[ye(d.slice(0,b))];return w===void 0?void 0:ve(w,d.slice(b+1))}return l[ye(d)]}function te(l,d,b){if(d==="")return b;var w=d.indexOf(".");if(w>-1){var _=l[ye(d.slice(0,w))];return te(_,d.slice(w+1),b)}return l[ye(d)]=b,l}function Ue(l){return l===null?"null":Array.isArray(l)?"array":c(l)}var xe=Object.keys,Be=Array.isArray,Ve={}.hasOwnProperty,tt=["type","replaced","iterateIn","iterateUnsetNumeric"];function U(l,d){if(l.keypath==="")return-1;var b=l.keypath.match(/\./g)||0,w=d.keypath.match(/\./g)||0;return b&&(b=b.length),w&&(w=w.length),b>w?-1:b<w?1:l.keypath<d.keypath?-1:l.keypath>d.keypath}var re=function(){function l(d){f(this,l),this.options=d,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return I(l,[{key:"stringify",value:function(b,w,_,H){H=N({},this.options,{},H,{stringification:!0});var Q=this.encapsulate(b,null,H);return Be(Q)?JSON.stringify(Q[0],w,_):Q.then(function(Y){return JSON.stringify(Y,w,_)})}},{key:"stringifySync",value:function(b,w,_,H){return this.stringify(b,w,_,N({throwOnBadSyncType:!0},H,{sync:!0}))}},{key:"stringifyAsync",value:function(b,w,_,H){return this.stringify(b,w,_,N({throwOnBadSyncType:!0},H,{sync:!1}))}},{key:"parse",value:function(b,w,_){return _=N({},this.options,{},_,{parse:!0}),this.revive(JSON.parse(b,w),_)}},{key:"parseSync",value:function(b,w,_){return this.parse(b,w,N({throwOnBadSyncType:!0},_,{sync:!0}))}},{key:"parseAsync",value:function(b,w,_){return this.parse(b,w,N({throwOnBadSyncType:!0},_,{sync:!1}))}},{key:"specialTypeNames",value:function(b,w){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return _.returnTypeNames=!0,this.encapsulate(b,w,_)}},{key:"rootTypeName",value:function(b,w){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return _.iterateNone=!0,this.encapsulate(b,w,_)}},{key:"encapsulate",value:function(b,w,_){_=N({sync:!0},this.options,{},_);var H=_,Q=H.sync,Y=this,k={},Te=[],je=[],Re=[],qe="cyclic"in _?_.cyclic:!0,ze=_,Ze=ze.encapsulateObserver,Fe=ae("",b,qe,w||{},Re);function He(B){var n=Object.values(k);if(_.iterateNone)return n.length?n[0]:l.getJSONType(B);if(n.length){if(_.returnTypeNames)return Oe(new Set(n));!B||!p(B)||Ve.call(B,"$types")?B={$:B,$types:{$:k}}:B.$types=k}else z(B)&&Ve.call(B,"$types")&&(B={$:B,$types:!0});return _.returnTypeNames?!1:B}function be(B,n){return ie.apply(this,arguments)}function ie(){return ie=g(regeneratorRuntime.mark(function B(n,e){var t;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Promise.all(e.map(function(S){return S[1].p}));case 2:return t=o.sent,o.next=5,Promise.all(t.map(function(){var S=g(regeneratorRuntime.mark(function A(j){var P,R,J,M,ne,W,X,ce,fe,K,_e,C,O,x;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(P=[],R=e.splice(0,1),J=$(R,1),M=J[0],ne=$(M,7),W=ne[0],X=ne[2],ce=ne[3],fe=ne[4],K=ne[5],_e=ne[6],C=ae(W,j,X,ce,P,!0,_e),O=m(C,T),!(W&&O)){F.next=11;break}return F.next=8,C.p;case 8:return x=F.sent,fe[K]=x,F.abrupt("return",be(n,P));case 11:return W?fe[K]=C:O?n=C.p:n=C,F.abrupt("return",be(n,P));case 13:case"end":return F.stop()}},A)}));return function(A){return S.apply(this,arguments)}}()));case 5:return o.abrupt("return",n);case 6:case"end":return o.stop()}},B)})),ie.apply(this,arguments)}function ee(B,n,e){Object.assign(B,n);var t=tt.map(function(i){var o=B[i];return delete B[i],o});e(),tt.forEach(function(i,o){B[i]=t[o]})}function ae(B,n,e,t,i,o,S){var A,j={},P=c(n),R=Ze?function(O){var x=S||t.type||l.getJSONType(n);Ze(Object.assign(O||j,{keypath:B,value:n,cyclic:e,stateObj:t,promisesData:i,resolvingTypesonPromise:o,awaitingTypesonPromise:m(n,T)},{type:x}))}:null;if(["string","boolean","number","undefined"].includes(P))return n===void 0||P==="number"&&(isNaN(n)||n===-1/0||n===1/0)?(t.replaced?A=n:A=me(B,n,t,i,!1,o,R),A!==n&&(j={replaced:A})):A=n,R&&R(),A;if(n===null)return R&&R(),n;if(e&&!t.iterateIn&&!t.iterateUnsetNumeric&&n&&c(n)==="object"){var J=Te.indexOf(n);if(J<0)e===!0&&(Te.push(n),je.push(B));else return k[B]="#",R&&R({cyclicKeypath:je[J]}),"#"+je[J]}var M=p(n),ne=Be(n),W=(M||ne)&&(!Y.plainObjectReplacers.length||t.replaced)||t.iterateIn?n:me(B,n,t,i,M||ne,null,R),X;if(W!==n?(A=W,j={replaced:W}):B===""&&m(n,T)?(i.push([B,n,e,t,void 0,void 0,t.type]),A=n):ne&&t.iterateIn!=="object"||t.iterateIn==="array"?(X=new Array(n.length),j={clone:X}):!["function","symbol"].includes(c(n))&&!("toJSON"in n)&&!m(n,T)&&!m(n,Promise)&&!m(n,ArrayBuffer)||M||t.iterateIn==="object"?(X={},t.addLength&&(X.length=n.length),j={clone:X}):A=n,R&&R(),_.iterateNone)return X||A;if(!X)return A;if(t.iterateIn){var ce=function(x){var L={ownKeys:Ve.call(n,x)};ee(t,L,function(){var F=B+(B?".":"")+le(x),G=ae(F,n[x],!!e,t,i,o);m(G,T)?i.push([F,G,!!e,t,X,x,t.type]):G!==void 0&&(X[x]=G)})};for(var fe in n)ce(fe);R&&R({endIterateIn:!0,end:!0})}else xe(n).forEach(function(O){var x=B+(B?".":"")+le(O),L={ownKeys:!0};ee(t,L,function(){var F=ae(x,n[O],!!e,t,i,o);m(F,T)?i.push([x,F,!!e,t,X,O,t.type]):F!==void 0&&(X[O]=F)})}),R&&R({endIterateOwn:!0,end:!0});if(t.iterateUnsetNumeric){for(var K=n.length,_e=function(x){if(!(x in n)){var L=B+(B?".":"")+x,F={ownKeys:!1};ee(t,F,function(){var G=ae(L,void 0,!!e,t,i,o);m(G,T)?i.push([L,G,!!e,t,X,x,t.type]):G!==void 0&&(X[x]=G)})}},C=0;C<K;C++)_e(C);R&&R({endIterateUnsetNumeric:!0,end:!0})}return X}function me(B,n,e,t,i,o,S){for(var A=i?Y.plainObjectReplacers:Y.nonplainObjectReplacers,j=A.length;j--;){var P=A[j];if(P.test(n,e)){var R=P.type;if(Y.revivers[R]){var J=k[B];k[B]=J?[R].concat(J):R}if(Object.assign(e,{type:R,replaced:!0}),(Q||!P.replaceAsync)&&!P.replace)return S&&S({typeDetected:!0}),ae(B,n,qe&&"readonly",e,t,o,R);S&&S({replacing:!0});var M=Q||!P.replaceAsync?"replace":"replaceAsync";return ae(B,P[M](n,e),qe&&"readonly",e,t,o,R)}}return n}return Re.length?Q&&_.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(be(Fe,Re)).then(He):!Q&&_.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():_.stringification&&Q?[He(Fe)]:Q?He(Fe):Promise.resolve(He(Fe))}},{key:"encapsulateSync",value:function(b,w,_){return this.encapsulate(b,w,N({throwOnBadSyncType:!0},_,{sync:!0}))}},{key:"encapsulateAsync",value:function(b,w,_){return this.encapsulate(b,w,N({throwOnBadSyncType:!0},_,{sync:!1}))}},{key:"revive",value:function(b,w){var _=b&&b.$types;if(!_)return b;if(_===!0)return b.$;w=N({sync:!0},this.options,{},w);var H=w,Q=H.sync,Y=[],k={},Te=!0;_.$&&p(_.$)&&(b=b.$,_=_.$,Te=!1);var je=this;function Re(ie,ee){var ae=je.revivers[ie]||[],me=$(ae,1),B=me[0];if(!B)throw new Error("Unregistered type: "+ie);return Q&&!("revive"in B)?ee:B[Q&&B.revive?"revive":!Q&&B.reviveAsync?"reviveAsync":"revive"](ee,k)}function qe(){var ie=[];if(Object.entries(_).forEach(function(ee){var ae=$(ee,2),me=ae[0],B=ae[1];B!=="#"&&[].concat(B).forEach(function(n){var e=je.revivers[n]||[null,{}],t=$(e,2),i=t[1].plain;i&&(ie.push({keypath:me,type:n}),delete _[me])})}),!!ie.length)return ie.sort(U).reduce(function ee(ae,me){var B=me.keypath,n=me.type;if(u(ae))return ae.then(function(i){return ee(i,{keypath:B,type:n})});var e=ve(b,B);if(e=Re(n,e),m(e,T))return e.then(function(i){var o=te(b,B,i);o===i&&(b=o)});var t=te(b,B,e);t===e&&(b=t)},void 0)}var ze=[];function Ze(ie,ee,ae,me,B){if(!(Te&&ie==="$types")){var n=_[ie],e=Be(ee);if(e||p(ee)){var t=e?new Array(ee.length):{};for(xe(ee).forEach(function(J){var M=Ze(ie+(ie?".":"")+le(J),ee[J],ae||t,t,J),ne=function(X){return m(X,Ae)?t[J]=void 0:X!==void 0&&(t[J]=X),X};m(M,T)?ze.push(M.then(function(W){return ne(W)})):ne(M)}),ee=t;Y.length;){var i=$(Y[0],4),o=i[0],S=i[1],A=i[2],j=i[3],P=ve(o,S);if(P!==void 0)A[j]=P;else break;Y.splice(0,1)}}if(!n)return ee;if(n==="#"){var R=ve(ae,ee.slice(1));return R===void 0&&Y.push([ae,ee.slice(1),me,B]),R}return[].concat(n).reduce(function J(M,ne){return m(M,T)?M.then(function(W){return J(W,ne)}):Re(ne,M)},ee)}}function Fe(ie){return m(ie,Ae)?void 0:ie}var He=qe(),be;return m(He,T)?be=He.then(function(){return b}):(be=Ze("",b,null),ze.length&&(be=T.resolve(be).then(function(ie){return T.all([ie].concat(ze))}).then(function(ie){var ee=$(ie,1),ae=ee[0];return ae}))),u(be)?Q&&w.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():m(be,T)?be.p.then(Fe):be:!Q&&w.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():Q?Fe(be):Promise.resolve(Fe(be))}},{key:"reviveSync",value:function(b,w){return this.revive(b,N({throwOnBadSyncType:!0},w,{sync:!0}))}},{key:"reviveAsync",value:function(b,w){return this.revive(b,N({throwOnBadSyncType:!0},w,{sync:!1}))}},{key:"register",value:function(b,w){return w=w||{},[].concat(b).forEach(function _(H){var Q=this;if(Be(H))return H.map(function(Y){return _.call(Q,Y)});H&&xe(H).forEach(function(Y){if(Y==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(l.JSON_TYPES.includes(Y))throw new TypeError("Plain JSON object types are reserved as type names");var k=H[Y],Te=k&&k.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,je=Te.filter(function(ae){return ae.type===Y});if(je.length&&(Te.splice(Te.indexOf(je[0]),1),delete this.revivers[Y],delete this.types[Y]),typeof k=="function"){var Re=k;k={test:function(me){return me&&me.constructor===Re},replace:function(me){return N({},me)},revive:function(me){return Object.assign(Object.create(Re.prototype),me)}}}else if(Be(k)){var qe=k,ze=$(qe,3),Ze=ze[0],Fe=ze[1],He=ze[2];k={test:Ze,replace:Fe,revive:He}}if(!(!k||!k.test)){var be={type:Y,test:k.test.bind(k)};k.replace&&(be.replace=k.replace.bind(k)),k.replaceAsync&&(be.replaceAsync=k.replaceAsync.bind(k));var ie=typeof w.fallback=="number"?w.fallback:w.fallback?0:1/0;if(k.testPlainObjects?this.plainObjectReplacers.splice(ie,0,be):this.nonplainObjectReplacers.splice(ie,0,be),k.revive||k.reviveAsync){var ee={};k.revive&&(ee.revive=k.revive.bind(k)),k.reviveAsync&&(ee.reviveAsync=k.reviveAsync.bind(k)),this.revivers[Y]=[ee,{plain:k.testPlainObjects}]}this.types[Y]=k}},this)},this),this}}]),l}(),Ae=function l(){f(this,l)};return Ae.__typeson__type__="TypesonUndefined",re.Undefined=Ae,re.Promise=T,re.isThenable=u,re.toStringTag=r,re.hasConstructorOf=m,re.isObject=z,re.isPlainObject=p,re.isUserObject=Z,re.escapeKeyPathComponent=le,re.unescapeKeyPathComponent=ye,re.getByKeyPath=ve,re.getJSONType=Ue,re.JSON_TYPES=["null","boolean","number","string","array","object"],re})}),on=Tt(function(h,y){(function(c,v){h.exports=v()})(Ot,function(){function c(n){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function v(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function g(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function f(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function a(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,i)}return t}function I(n){return function(t){if(Array.isArray(t))return E(t)}(n)||function(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}(n)||function(t,i){if(t){if(typeof t=="string")return E(t,i);var o=Object.prototype.toString.call(t).slice(8,-1);if(o==="Object"&&t.constructor&&(o=t.constructor.name),o==="Map"||o==="Set")return Array.from(t);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return E(t,i)}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function s(n){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function N(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function $(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Oe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function he(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,i)}return t}function D(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?he(Object(t),!0).forEach(function(i){Oe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):he(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function q(n,e){return function(i){if(Array.isArray(i))return i}(n)||function(i,o){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(i)))){var S=[],A=!0,j=!1,P=void 0;try{for(var R,J=i[Symbol.iterator]();!(A=(R=J.next()).done)&&(S.push(R.value),!o||S.length!==o);A=!0);}catch(M){j=!0,P=M}finally{try{A||J.return==null||J.return()}finally{if(j)throw P}}return S}}(n,e)||Le(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(n){return function(t){if(Array.isArray(t))return de(t)}(n)||function(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}(n)||Le(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(n,e){if(n){if(typeof n=="string")return de(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?de(n,e):void 0}}function de(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}var T=function n(e){N(this,n),this.p=new Promise(e)};T.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(T.prototype[Symbol.toStringTag]="TypesonPromise"),T.prototype.then=function(n,e){var t=this;return new T(function(i,o){t.p.then(function(S){i(n?n(S):S)}).catch(function(S){return e?e(S):Promise.reject(S)}).then(i,o)})},T.prototype.catch=function(n){return this.then(null,n)},T.resolve=function(n){return new T(function(e){e(n)})},T.reject=function(n){return new T(function(e,t){t(n)})},["all","race"].forEach(function(n){T[n]=function(e){return new T(function(t,i){Promise[n](e.map(function(o){return o&&o.constructor&&o.constructor.__typeson__type__==="TypesonPromise"?o.p:o})).then(t,i)})}});var ue={}.toString,V={}.hasOwnProperty,Se=Object.getPrototypeOf,we=V.toString;function Ne(n,e){return p(n)&&typeof n.then=="function"&&(!e||typeof n.catch=="function")}function u(n){return ue.call(n).slice(8,-1)}function r(n,e){if(!n||s(n)!=="object")return!1;var t=Se(n);if(!t)return e===null;var i=V.call(t,"constructor")&&t.constructor;return typeof i!="function"?e===null:e===i||e!==null&&we.call(i)===we.call(e)||typeof e=="function"&&typeof i.__typeson__type__=="string"&&i.__typeson__type__===e.__typeson__type__}function m(n){return!(!n||u(n)!=="Object")&&(!Se(n)||r(n,Object))}function p(n){return n&&s(n)==="object"}function Z(n){return n.replace(/~/g,"~0").replace(/\./g,"~1")}function z(n){return n.replace(/~1/g,".").replace(/~0/g,"~")}function le(n,e){if(e==="")return n;var t=e.indexOf(".");if(t>-1){var i=n[z(e.slice(0,t))];return i===void 0?void 0:le(i,e.slice(t+1))}return n[z(e)]}function ye(n,e,t){if(e==="")return t;var i=e.indexOf(".");return i>-1?ye(n[z(e.slice(0,i))],e.slice(i+1),t):(n[z(e)]=t,n)}function ve(n,e,t){return t?e?e(n):n:(n&&n.then||(n=Promise.resolve(n)),e?n.then(e):n)}var te=Object.keys,Ue=Array.isArray,xe={}.hasOwnProperty,Be=["type","replaced","iterateIn","iterateUnsetNumeric"];function Ve(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(n.apply(this,e))}catch(i){return Promise.reject(i)}}}function tt(n,e){if(n.keypath==="")return-1;var t=n.keypath.match(/\./g)||0,i=e.keypath.match(/\./g)||0;return t&&(t=t.length),i&&(i=i.length),t>i?-1:t<i?1:n.keypath<e.keypath?-1:n.keypath>e.keypath}var U=function(){function n(e){N(this,n),this.options=e,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function(t,i,o){return i&&$(t.prototype,i),o&&$(t,o),t}(n,[{key:"stringify",value:function(t,i,o,S){S=D(D(D({},this.options),S),{},{stringification:!0});var A=this.encapsulate(t,null,S);return Ue(A)?JSON.stringify(A[0],i,o):A.then(function(j){return JSON.stringify(j,i,o)})}},{key:"stringifySync",value:function(t,i,o,S){return this.stringify(t,i,o,D(D({throwOnBadSyncType:!0},S),{},{sync:!0}))}},{key:"stringifyAsync",value:function(t,i,o,S){return this.stringify(t,i,o,D(D({throwOnBadSyncType:!0},S),{},{sync:!1}))}},{key:"parse",value:function(t,i,o){return o=D(D(D({},this.options),o),{},{parse:!0}),this.revive(JSON.parse(t,i),o)}},{key:"parseSync",value:function(t,i,o){return this.parse(t,i,D(D({throwOnBadSyncType:!0},o),{},{sync:!0}))}},{key:"parseAsync",value:function(t,i,o){return this.parse(t,i,D(D({throwOnBadSyncType:!0},o),{},{sync:!1}))}},{key:"specialTypeNames",value:function(t,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return o.returnTypeNames=!0,this.encapsulate(t,i,o)}},{key:"rootTypeName",value:function(t,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return o.iterateNone=!0,this.encapsulate(t,i,o)}},{key:"encapsulate",value:function(t,i,o){var S=Ve(function(C,O){return ve(Promise.all(O.map(function(x){return x[1].p})),function(x){return ve(Promise.all(x.map(Ve(function(L){var F=!1,G=[],De=q(O.splice(0,1),1),ge=q(De[0],7),ke=ge[0],Je=ge[2],oe=ge[3],Me=ge[4],pe=ge[5],Ke=ge[6],Pe=K(ke,L,Je,oe,G,!0,Ke),Xe=r(Pe,T);return function(ht,ft){var st=ht();return st&&st.then?st.then(ft):ft(st)}(function(){if(ke&&Xe)return ve(Pe.p,function(We){return Me[pe]=We,F=!0,S(C,G)})},function(We){return F?We:(ke?Me[pe]=Pe:C=Xe?Pe.p:Pe,S(C,G))})}))),function(){return C})})}),A=(o=D(D({sync:!0},this.options),o)).sync,j=this,P={},R=[],J=[],M=[],ne=!("cyclic"in o)||o.cyclic,W=o.encapsulateObserver,X=K("",t,ne,i||{},M);function ce(C){var O=Object.values(P);if(o.iterateNone)return O.length?O[0]:n.getJSONType(C);if(O.length){if(o.returnTypeNames)return se(new Set(O));C&&m(C)&&!xe.call(C,"$types")?C.$types=P:C={$:C,$types:{$:P}}}else p(C)&&xe.call(C,"$types")&&(C={$:C,$types:!0});return!o.returnTypeNames&&C}function fe(C,O,x){Object.assign(C,O);var L=Be.map(function(F){var G=C[F];return delete C[F],G});x(),Be.forEach(function(F,G){C[F]=L[G]})}function K(C,O,x,L,F,G,De){var ge,ke={},Je=s(O),oe=W?function(nt){var Ie=De||L.type||n.getJSONType(O);W(Object.assign(nt||ke,{keypath:C,value:O,cyclic:x,stateObj:L,promisesData:F,resolvingTypesonPromise:G,awaitingTypesonPromise:r(O,T)},{type:Ie}))}:null;if(["string","boolean","number","undefined"].includes(Je))return O===void 0||Number.isNaN(O)||O===Number.NEGATIVE_INFINITY||O===Number.POSITIVE_INFINITY?(ge=L.replaced?O:_e(C,O,L,F,!1,G,oe))!==O&&(ke={replaced:ge}):ge=O,oe&&oe(),ge;if(O===null)return oe&&oe(),O;if(x&&!L.iterateIn&&!L.iterateUnsetNumeric&&O&&s(O)==="object"){var Me=R.indexOf(O);if(!(Me<0))return P[C]="#",oe&&oe({cyclicKeypath:J[Me]}),"#"+J[Me];x===!0&&(R.push(O),J.push(C))}var pe,Ke=m(O),Pe=Ue(O),Xe=(Ke||Pe)&&(!j.plainObjectReplacers.length||L.replaced)||L.iterateIn?O:_e(C,O,L,F,Ke||Pe,null,oe);if(Xe!==O?(ge=Xe,ke={replaced:Xe}):C===""&&r(O,T)?(F.push([C,O,x,L,void 0,void 0,L.type]),ge=O):Pe&&L.iterateIn!=="object"||L.iterateIn==="array"?(pe=new Array(O.length),ke={clone:pe}):(["function","symbol"].includes(s(O))||"toJSON"in O||r(O,T)||r(O,Promise)||r(O,ArrayBuffer))&&!Ke&&L.iterateIn!=="object"?ge=O:(pe={},L.addLength&&(pe.length=O.length),ke={clone:pe}),oe&&oe(),o.iterateNone)return pe||ge;if(!pe)return ge;if(L.iterateIn){var We=function(Ie){var et={ownKeys:xe.call(O,Ie)};fe(L,et,function(){var ot=C+(C?".":"")+Z(Ie),lt=K(ot,O[Ie],!!x,L,F,G);r(lt,T)?F.push([ot,lt,!!x,L,pe,Ie,L.type]):lt!==void 0&&(pe[Ie]=lt)})};for(var ht in O)We(ht);oe&&oe({endIterateIn:!0,end:!0})}else te(O).forEach(function(nt){var Ie=C+(C?".":"")+Z(nt);fe(L,{ownKeys:!0},function(){var et=K(Ie,O[nt],!!x,L,F,G);r(et,T)?F.push([Ie,et,!!x,L,pe,nt,L.type]):et!==void 0&&(pe[nt]=et)})}),oe&&oe({endIterateOwn:!0,end:!0});if(L.iterateUnsetNumeric){for(var ft=O.length,st=function(Ie){if(!(Ie in O)){var et=C+(C?".":"")+Ie;fe(L,{ownKeys:!1},function(){var ot=K(et,void 0,!!x,L,F,G);r(ot,T)?F.push([et,ot,!!x,L,pe,Ie,L.type]):ot!==void 0&&(pe[Ie]=ot)})}},bt=0;bt<ft;bt++)st(bt);oe&&oe({endIterateUnsetNumeric:!0,end:!0})}return pe}function _e(C,O,x,L,F,G,De){for(var ge=F?j.plainObjectReplacers:j.nonplainObjectReplacers,ke=ge.length;ke--;){var Je=ge[ke];if(Je.test(O,x)){var oe=Je.type;if(j.revivers[oe]){var Me=P[C];P[C]=Me?[oe].concat(Me):oe}return Object.assign(x,{type:oe,replaced:!0}),!A&&Je.replaceAsync||Je.replace?(De&&De({replacing:!0}),K(C,Je[A||!Je.replaceAsync?"replace":"replaceAsync"](O,x),ne&&"readonly",x,L,G,oe)):(De&&De({typeDetected:!0}),K(C,O,ne&&"readonly",x,L,G,oe))}}return O}return M.length?A&&o.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(S(X,M)).then(ce):!A&&o.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():o.stringification&&A?[ce(X)]:A?ce(X):Promise.resolve(ce(X))}},{key:"encapsulateSync",value:function(t,i,o){return this.encapsulate(t,i,D(D({throwOnBadSyncType:!0},o),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(t,i,o){return this.encapsulate(t,i,D(D({throwOnBadSyncType:!0},o),{},{sync:!1}))}},{key:"revive",value:function(t,i){var o=t&&t.$types;if(!o)return t;if(o===!0)return t.$;var S=(i=D(D({sync:!0},this.options),i)).sync,A=[],j={},P=!0;o.$&&m(o.$)&&(t=t.$,o=o.$,P=!1);var R=this;function J(ce,fe){var K=q(R.revivers[ce]||[],1)[0];if(!K)throw new Error("Unregistered type: "+ce);return S&&!("revive"in K)?fe:K[S&&K.revive?"revive":!S&&K.reviveAsync?"reviveAsync":"revive"](fe,j)}var M=[];function ne(ce){return r(ce,re)?void 0:ce}var W,X=function(){var fe=[];if(Object.entries(o).forEach(function(K){var _e=q(K,2),C=_e[0],O=_e[1];O!=="#"&&[].concat(O).forEach(function(x){q(R.revivers[x]||[null,{}],2)[1].plain&&(fe.push({keypath:C,type:x}),delete o[C])})}),fe.length)return fe.sort(tt).reduce(function K(_e,C){var O=C.keypath,x=C.type;if(Ne(_e))return _e.then(function(G){return K(G,{keypath:O,type:x})});var L=le(t,O);if(r(L=J(x,L),T))return L.then(function(G){var De=ye(t,O,G);De===G&&(t=De)});var F=ye(t,O,L);F===L&&(t=F)},void 0)}();return r(X,T)?W=X.then(function(){return t}):(W=function ce(fe,K,_e,C,O){if(!P||fe!=="$types"){var x=o[fe],L=Ue(K);if(L||m(K)){var F=L?new Array(K.length):{};for(te(K).forEach(function(pe){var Ke=ce(fe+(fe?".":"")+Z(pe),K[pe],_e||F,F,pe),Pe=function(We){return r(We,re)?F[pe]=void 0:We!==void 0&&(F[pe]=We),We};r(Ke,T)?M.push(Ke.then(function(Xe){return Pe(Xe)})):Pe(Ke)}),K=F;A.length;){var G=q(A[0],4),De=G[0],ge=G[1],ke=G[2],Je=G[3],oe=le(De,ge);if(oe===void 0)break;ke[Je]=oe,A.splice(0,1)}}if(!x)return K;if(x==="#"){var Me=le(_e,K.slice(1));return Me===void 0&&A.push([_e,K.slice(1),C,O]),Me}return[].concat(x).reduce(function pe(Ke,Pe){return r(Ke,T)?Ke.then(function(Xe){return pe(Xe,Pe)}):J(Pe,Ke)},K)}}("",t,null),M.length&&(W=T.resolve(W).then(function(ce){return T.all([ce].concat(M))}).then(function(ce){return q(ce,1)[0]}))),Ne(W)?S&&i.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():r(W,T)?W.p.then(ne):W:!S&&i.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():S?ne(W):Promise.resolve(ne(W))}},{key:"reviveSync",value:function(t,i){return this.revive(t,D(D({throwOnBadSyncType:!0},i),{},{sync:!0}))}},{key:"reviveAsync",value:function(t,i){return this.revive(t,D(D({throwOnBadSyncType:!0},i),{},{sync:!1}))}},{key:"register",value:function(t,i){return i=i||{},[].concat(t).forEach(function o(S){var A=this;if(Ue(S))return S.map(function(j){return o.call(A,j)});S&&te(S).forEach(function(j){if(j==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(n.JSON_TYPES.includes(j))throw new TypeError("Plain JSON object types are reserved as type names");var P=S[j],R=P&&P.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,J=R.filter(function(fe){return fe.type===j});if(J.length&&(R.splice(R.indexOf(J[0]),1),delete this.revivers[j],delete this.types[j]),typeof P=="function"){var M=P;P={test:function(K){return K&&K.constructor===M},replace:function(K){return D({},K)},revive:function(K){return Object.assign(Object.create(M.prototype),K)}}}else if(Ue(P)){var ne=q(P,3);P={test:ne[0],replace:ne[1],revive:ne[2]}}if(P&&P.test){var W={type:j,test:P.test.bind(P)};P.replace&&(W.replace=P.replace.bind(P)),P.replaceAsync&&(W.replaceAsync=P.replaceAsync.bind(P));var X=typeof i.fallback=="number"?i.fallback:i.fallback?0:Number.POSITIVE_INFINITY;if(P.testPlainObjects?this.plainObjectReplacers.splice(X,0,W):this.nonplainObjectReplacers.splice(X,0,W),P.revive||P.reviveAsync){var ce={};P.revive&&(ce.revive=P.revive.bind(P)),P.reviveAsync&&(ce.reviveAsync=P.reviveAsync.bind(P)),this.revivers[j]=[ce,{plain:P.testPlainObjects}]}this.types[j]=P}},this)},this),this}}]),n}(),re=function n(){N(this,n)};re.__typeson__type__="TypesonUndefined",U.Undefined=re,U.Promise=T,U.isThenable=Ne,U.toStringTag=u,U.hasConstructorOf=r,U.isObject=p,U.isPlainObject=m,U.isUserObject=function n(e){if(!e||u(e)!=="Object")return!1;var t=Se(e);return!t||r(e,Object)||n(t)},U.escapeKeyPathComponent=Z,U.unescapeKeyPathComponent=z,U.getByKeyPath=le,U.getJSONType=function(e){return e===null?"null":Array.isArray(e)?"array":s(e)},U.JSON_TYPES=["null","boolean","number","string","array","object"];for(var Ae={userObject:{test:function(e,t){return U.isUserObject(e)},replace:function(e){return function(i){for(var o=1;o<arguments.length;o++){var S=arguments[o]!=null?arguments[o]:{};o%2?a(Object(S),!0).forEach(function(A){f(i,A,S[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(S)):a(Object(S)).forEach(function(A){Object.defineProperty(i,A,Object.getOwnPropertyDescriptor(S,A))})}return i}({},e)},revive:function(e){return e}}},l=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(e,t){return!!Array.isArray(e)&&(Object.keys(e).some(function(i){return String(Number.parseInt(i))!==i})&&(t.iterateIn="object",t.addLength=!0),!0)},replace:function(e,t){return t.iterateUnsetNumeric=!0,e},revive:function(e){if(Array.isArray(e))return e;var t=[];return Object.keys(e).forEach(function(i){var o=e[i];t[i]=o}),t}}},{sparseUndefined:{test:function(e,t){return e===void 0&&t.ownKeys===!1},replace:function(e){return 0},revive:function(e){}}}],d={undef:{test:function(e,t){return e===void 0&&(t.ownKeys||!("ownKeys"in t))},replace:function(e){return 0},revive:function(e){return new U.Undefined}}},b={StringObject:{test:function(e){return U.toStringTag(e)==="String"&&c(e)==="object"},replace:function(e){return String(e)},revive:function(e){return new String(e)}},BooleanObject:{test:function(e){return U.toStringTag(e)==="Boolean"&&c(e)==="object"},replace:function(e){return!!e},revive:function(e){return new Boolean(e)}},NumberObject:{test:function(e){return U.toStringTag(e)==="Number"&&c(e)==="object"},replace:function(e){return Number(e)},revive:function(e){return new Number(e)}}},w=[{nan:{test:function(e){return Number.isNaN(e)},replace:function(e){return"NaN"},revive:function(e){return Number.NaN}}},{infinity:{test:function(e){return e===Number.POSITIVE_INFINITY},replace:function(e){return"Infinity"},revive:function(e){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(e){return e===Number.NEGATIVE_INFINITY},replace:function(e){return"-Infinity"},revive:function(e){return Number.NEGATIVE_INFINITY}}}],_={date:{test:function(e){return U.toStringTag(e)==="Date"},replace:function(e){var t=e.getTime();return Number.isNaN(t)?"NaN":t},revive:function(e){return e==="NaN"?new Date(Number.NaN):new Date(e)}}},H={regexp:{test:function(e){return U.toStringTag(e)==="RegExp"},replace:function(e){return{source:e.source,flags:(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":"")}},revive:function(e){var t=e.source,i=e.flags;return new RegExp(t,i)}}},Q={map:{test:function(e){return U.toStringTag(e)==="Map"},replace:function(e){return I(e.entries())},revive:function(e){return new Map(e)}}},Y={set:{test:function(e){return U.toStringTag(e)==="Set"},replace:function(e){return I(e.values())},revive:function(e){return new Set(e)}}},k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Te=new Uint8Array(256),je=0;je<k.length;je++)Te[k.charCodeAt(je)]=je;var Re=function(e,t,i){i==null&&(i=e.byteLength);for(var o=new Uint8Array(e,t||0,i),S=o.length,A="",j=0;j<S;j+=3)A+=k[o[j]>>2],A+=k[(3&o[j])<<4|o[j+1]>>4],A+=k[(15&o[j+1])<<2|o[j+2]>>6],A+=k[63&o[j+2]];return S%3==2?A=A.slice(0,-1)+"=":S%3==1&&(A=A.slice(0,-2)+"=="),A},qe=function(e){var t,i,o,S,A=e.length,j=.75*e.length,P=0;e[e.length-1]==="="&&(j--,e[e.length-2]==="="&&j--);for(var R=new ArrayBuffer(j),J=new Uint8Array(R),M=0;M<A;M+=4)t=Te[e.charCodeAt(M)],i=Te[e.charCodeAt(M+1)],o=Te[e.charCodeAt(M+2)],S=Te[e.charCodeAt(M+3)],J[P++]=t<<2|i>>4,J[P++]=(15&i)<<4|o>>2,J[P++]=(3&o)<<6|63&S;return R},ze={arraybuffer:{test:function(e){return U.toStringTag(e)==="ArrayBuffer"},replace:function(e,t){t.buffers||(t.buffers=[]);var i=t.buffers.indexOf(e);return i>-1?{index:i}:(t.buffers.push(e),Re(e))},revive:function(e,t){if(t.buffers||(t.buffers=[]),c(e)==="object")return t.buffers[e.index];var i=qe(e);return t.buffers.push(i),i}}},Ze=typeof self>"u"?Ot:self,Fe={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(n){var e=n,t=Ze[e];t&&(Fe[n.toLowerCase()]={test:function(o){return U.toStringTag(o)===e},replace:function(o,S){var A=o.buffer,j=o.byteOffset,P=o.length;S.buffers||(S.buffers=[]);var R=S.buffers.indexOf(A);return R>-1?{index:R,byteOffset:j,length:P}:(S.buffers.push(A),{encoded:Re(A),byteOffset:j,length:P})},revive:function(o,S){S.buffers||(S.buffers=[]);var A,j=o.byteOffset,P=o.length,R=o.encoded,J=o.index;return"index"in o?A=S.buffers[J]:(A=qe(R),S.buffers.push(A)),new t(A,j,P)}})});var He={dataview:{test:function(e){return U.toStringTag(e)==="DataView"},replace:function(e,t){var i=e.buffer,o=e.byteOffset,S=e.byteLength;t.buffers||(t.buffers=[]);var A=t.buffers.indexOf(i);return A>-1?{index:A,byteOffset:o,byteLength:S}:(t.buffers.push(i),{encoded:Re(i),byteOffset:o,byteLength:S})},revive:function(e,t){t.buffers||(t.buffers=[]);var i,o=e.byteOffset,S=e.byteLength,A=e.encoded,j=e.index;return"index"in e?i=t.buffers[j]:(i=qe(A),t.buffers.push(i)),new DataView(i,o,S)}}},be={IntlCollator:{test:function(e){return U.hasConstructorOf(e,Intl.Collator)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.Collator(e.locale,e)}},IntlDateTimeFormat:{test:function(e){return U.hasConstructorOf(e,Intl.DateTimeFormat)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.DateTimeFormat(e.locale,e)}},IntlNumberFormat:{test:function(e){return U.hasConstructorOf(e,Intl.NumberFormat)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.NumberFormat(e.locale,e)}}};function ie(n){for(var e=new Uint8Array(n.length),t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e.buffer}var ee={file:{test:function(e){return U.toStringTag(e)==="File"},replace:function(e){var t=new XMLHttpRequest;if(t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("GET",URL.createObjectURL(e),!1),t.send(),t.status!==200&&t.status!==0)throw new Error("Bad File access: "+t.status);return{type:e.type,stringContents:t.responseText,name:e.name,lastModified:e.lastModified}},revive:function(e){var t=e.name,i=e.type,o=e.stringContents,S=e.lastModified;return new File([ie(o)],t,{type:i,lastModified:S})},replaceAsync:function(e){return new U.Promise(function(t,i){var o=new FileReader;o.addEventListener("load",function(){t({type:e.type,stringContents:o.result,name:e.name,lastModified:e.lastModified})}),o.addEventListener("error",function(){i(o.error)}),o.readAsBinaryString(e)})}}},ae={bigint:{test:function(e){return typeof e=="bigint"},replace:function(e){return String(e)},revive:function(e){return BigInt(e)}}},me={bigintObject:{test:function(e){return c(e)==="object"&&U.hasConstructorOf(e,BigInt)},replace:function(e){return String(e)},revive:function(e){return new Object(BigInt(e))}}},B={cryptokey:{test:function(e){return U.toStringTag(e)==="CryptoKey"&&e.extractable},replaceAsync:function(e){return new U.Promise(function(t,i){crypto.subtle.exportKey("jwk",e).catch(function(o){i(o)}).then(function(o){t({jwk:o,algorithm:e.algorithm,usages:e.usages})})})},revive:function(e){var t=e.jwk,i=e.algorithm,o=e.usages;return crypto.subtle.importKey("jwk",t,i,!0,o)}}};return[Ae,d,l,b,w,_,H,{imagedata:{test:function(e){return U.toStringTag(e)==="ImageData"},replace:function(e){return{array:I(e.data),width:e.width,height:e.height}},revive:function(e){return new ImageData(new Uint8ClampedArray(e.array),e.width,e.height)}}},{imagebitmap:{test:function(e){return U.toStringTag(e)==="ImageBitmap"||e&&e.dataset&&e.dataset.toStringTag==="ImageBitmap"},replace:function(e){var t=document.createElement("canvas");return t.getContext("2d").drawImage(e,0,0),t.toDataURL()},revive:function(e){var t=document.createElement("canvas"),i=t.getContext("2d"),o=document.createElement("img");return o.addEventListener("load",function(){i.drawImage(o,0,0)}),o.src=e,t},reviveAsync:function(e){var t=document.createElement("canvas"),i=t.getContext("2d"),o=document.createElement("img");return o.addEventListener("load",function(){i.drawImage(o,0,0)}),o.src=e,createImageBitmap(t)}}},ee,{file:ee.file,filelist:{test:function(e){return U.toStringTag(e)==="FileList"},replace:function(e){for(var t=[],i=0;i<e.length;i++)t[i]=e.item(i);return t},revive:function(e){return new(function(){function t(){v(this,t),this._files=arguments[0],this.length=this._files.length}return function(o,S,A){return S&&g(o.prototype,S),A&&g(o,A),o}(t,[{key:"item",value:function(o){return this._files[o]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}]),t}())(e)}}},{blob:{test:function(e){return U.toStringTag(e)==="Blob"},replace:function(e){var t=new XMLHttpRequest;if(t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("GET",URL.createObjectURL(e),!1),t.send(),t.status!==200&&t.status!==0)throw new Error("Bad Blob access: "+t.status);return{type:e.type,stringContents:t.responseText}},revive:function(e){var t=e.type,i=e.stringContents;return new Blob([ie(i)],{type:t})},replaceAsync:function(e){return new U.Promise(function(t,i){var o=new FileReader;o.addEventListener("load",function(){t({type:e.type,stringContents:o.result})}),o.addEventListener("error",function(){i(o.error)}),o.readAsBinaryString(e)})}}}].concat(typeof Map=="function"?Q:[],typeof Set=="function"?Y:[],typeof ArrayBuffer=="function"?ze:[],typeof Uint8Array=="function"?Fe:[],typeof DataView=="function"?He:[],typeof Intl<"u"?be:[],typeof crypto<"u"?B:[],typeof BigInt<"u"?[ae,me]:[])})}),ut="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ct=new Uint8Array(256);for(var yt=0;yt<ut.length;yt++)ct[ut.codePointAt(yt)]=yt;var At=function(y,c,v){v==null&&(v=y.byteLength);for(var g=new Uint8Array(y,c||0,v),f=g.length,a="",I=0;I<f;I+=3)a+=ut[g[I]>>2],a+=ut[(g[I]&3)<<4|g[I+1]>>4],a+=ut[(g[I+1]&15)<<2|g[I+2]>>6],a+=ut[g[I+2]&63];return f%3===2?a=a.slice(0,-1)+"=":f%3===1&&(a=a.slice(0,-2)+"=="),a},Ut=function(y){var c=y.length,v=y.length*.75,g=0,f,a,I,E;y[y.length-1]==="="&&(v--,y[y.length-2]==="="&&v--);for(var s=new ArrayBuffer(v),N=new Uint8Array(s),$=0;$<c;$+=4)f=ct[y.codePointAt($)],a=ct[y.codePointAt($+1)],I=ct[y.codePointAt($+2)],E=ct[y.codePointAt($+3)],N[g++]=f<<2|a>>4,N[g++]=(a&15)<<4|I>>2,N[g++]=(I&3)<<6|E&63;return s},sn=typeof self>"u"?global:self,xt={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(h){var y=h,c=sn[y];c&&(xt[h.toLowerCase()+"2"]={test:function(v){return vt.toStringTag(v)===y},replace:function(v){var g=v.buffer,f=v.byteOffset,a=v.length;return{buffer:g,byteOffset:f,length:a}},revive:function(v){var g=v.buffer,f=v.byteOffset,a=v.length;return new c(g,f,a)}})});var un={arraybuffer:{test:function(h){return vt.toStringTag(h)==="ArrayBuffer"},replace:function(h){return At(h,0,h.byteLength)},revive:function(h){var y=Ut(h);return y}}},Ye=new vt().register(on),cn="FileReaderSync"in self,dt=[],St=0;Ye.register([un,xt,{blob2:{test:function(h){return vt.toStringTag(h)==="Blob"},replace:function(h){if(h.isClosed)throw new Error("The Blob is closed");if(cn){var y=Lt(h,"binary"),c=At(y,0,y.byteLength);return{type:h.type,data:c}}else{dt.push(h);var v={type:h.type,data:{start:St,end:St+h.size}};return St+=h.size,v}},finalize:function(h,y){h.data=At(y,0,y.byteLength)},revive:function(h){var y=h.type,c=h.data;return new Blob([Ut(c)],{type:y})}}}]);Ye.mustFinalize=function(){return dt.length>0};Ye.finalize=function(h){return at(void 0,void 0,void 0,function(){var y,c,v,g,f,a,I,E,s,N;return Qe(this,function($){switch($.label){case 0:return[4,kt(new Blob(dt),"binary")];case 1:if(y=$.sent(),h){for(c=0,v=h;c<v.length;c++)if(g=v[c],g.$types){f=g.$types,a=f.$,a&&(f=f.$);for(I in f)E=f[I],s=Ye.types[E],s&&s.finalize&&(N=Ce.getByKeyPath(g,a?"$."+I:I),s.finalize(N,y.slice(N.start,N.end)))}}return dt=[],[2]}})})};var fn=2e3;function Rt(h,y){return at(this,void 0,void 0,function(){function c(){return at(this,void 0,void 0,function(){var s,N,$,Oe,he,D,q,se,Le;return Qe(this,function(de){switch(de.label){case 0:return[4,Promise.all(h.tables.map(function(T){return T.count()}))];case 1:s=de.sent(),s.forEach(function(T,ue){return g[ue].rowCount=T}),E.totalRows=s.reduce(function(T,ue){return T+ue}),N=JSON.stringify(a,void 0,f?2:void 0),$=N.lastIndexOf("]"),Oe=N.substring(0,$),v.push(Oe),he=y.filter,D=function(T){var ue,V,Se,we,Ne,u,r,m,p,Z,z,le;return Qe(this,function(ye){switch(ye.label){case 0:ue=h.table(T),V=ue.schema.primKey,Se=!!V.keyPath,we=y.numRowsPerChunk||fn,Ne=Se?{tableName:ue.name,inbound:!0,rows:[]}:{tableName:ue.name,inbound:!1,rows:[]},u=JSON.stringify(Ne,void 0,f?2:void 0),f&&(u=u.split("\n").join("\n    ")),r=u.lastIndexOf("]"),v.push(u.substring(0,r)),m=null,p=0,Z=!0,z=function(){var ve,te,Ue,xe,U,Be,Ve,tt,U;return Qe(this,function(re){switch(re.label){case 0:return I&&Ce.ignoreTransaction(function(){return I(E)}),ve=m==null?ue.limit(we):ue.where(":id").above(m).limit(we),[4,ve.toArray()];case 1:return te=re.sent(),te.length===0?[2,"break"]:(m!=null&&p>0&&(v.push(","),f&&v.push("\n      ")),Z=te.length===we,Se?(Ue=he?te.filter(function(Ae){return he(T,Ae)}):te,xe=Ue.map(function(Ae){return Ye.encapsulate(Ae)}),Ye.mustFinalize()?[4,Ce.waitFor(Ye.finalize(xe))]:[3,3]):[3,4]);case 2:re.sent(),re.label=3;case 3:return U=JSON.stringify(xe,void 0,f?2:void 0),f&&(U=U.split("\n").join("\n      ")),v.push(new Blob([U.substring(1,U.length-1)])),p=Ue.length,m=te.length>0?Ce.getByKeyPath(te[te.length-1],V.keyPath):null,[3,8];case 4:return[4,ve.primaryKeys()];case 5:return Be=re.sent(),Ve=Be.map(function(Ae,l){return[Ae,te[l]]}),he&&(Ve=Ve.filter(function(Ae){var l=Ae[0],d=Ae[1];return he(T,d,l)})),tt=Ve.map(function(Ae){return Ye.encapsulate(Ae)}),Ye.mustFinalize()?[4,Ce.waitFor(Ye.finalize(tt))]:[3,7];case 6:re.sent(),re.label=7;case 7:U=JSON.stringify(tt,void 0,f?2:void 0),f&&(U=U.split("\n").join("\n      ")),v.push(new Blob([U.substring(1,U.length-1)])),p=Ve.length,m=Be.length>0?Be[Be.length-1]:null,re.label=8;case 8:return E.completedRows+=te.length,[2]}})},ye.label=1;case 1:return Z?[5,z()]:[3,3];case 2:return le=ye.sent(),le==="break"?[3,3]:[3,1];case 3:return v.push(u.substr(r)),E.completedTables+=1,E.completedTables<E.totalTables&&v.push(","),[2]}})},q=0,se=g,de.label=2;case 2:return q<se.length?(Le=se[q].name,[5,D(Le)]):[3,5];case 3:de.sent(),de.label=4;case 4:return q++,[3,2];case 5:return v.push(N.substr($)),E.done=!0,I&&Ce.ignoreTransaction(function(){return I(E)}),[2]}})})}var v,g,f,a,I,E;return Qe(this,function(s){switch(s.label){case 0:y=y||{},v=[],g=h.tables.map(function(N){return{name:N.name,schema:rn(N),rowCount:0}}),f=y.prettyJson,a={formatName:"dexie",formatVersion:1,data:{databaseName:h.name,databaseVersion:h.verno,tables:g,data:[]}},I=y.progressCallback,E={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:h.tables.length},s.label=1;case 1:return s.trys.push([1,,6,7]),y.noTransaction?[4,c()]:[3,3];case 2:return s.sent(),[3,5];case 3:return[4,h.transaction("r",h.tables,c)];case 4:s.sent(),s.label=5;case 5:return[3,7];case 6:return Ye.finalize(),[7];case 7:return[2,new Blob(v,{type:"text/json"})]}})})}var ln=1,pn={Stream:function(){}},yn=Tt(function(h,y){(function(c){var v=typeof process=="object"&&It?It:self;c.parser=function(u){return new he(u)},c.CParser=he,c.CStream=q,c.createStream=D,c.MAX_BUFFER_LENGTH=10*1024*1024,c.DEBUG=v.CDEBUG==="debug",c.INFO=v.CDEBUG==="debug"||v.CDEBUG==="info",c.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var g={textNode:void 0,numberNode:""},f=c.EVENTS.filter(function(u){return u!=="error"&&u!=="end"}),a=0,I;c.STATE={BEGIN:a++,VALUE:a++,OPEN_OBJECT:a++,CLOSE_OBJECT:a++,OPEN_ARRAY:a++,CLOSE_ARRAY:a++,TEXT_ESCAPE:a++,STRING:a++,BACKSLASH:a++,END:a++,OPEN_KEY:a++,CLOSE_KEY:a++,TRUE:a++,TRUE2:a++,TRUE3:a++,FALSE:a++,FALSE2:a++,FALSE3:a++,FALSE4:a++,NULL:a++,NULL2:a++,NULL3:a++,NUMBER_DECIMAL_POINT:a++,NUMBER_DIGIT:a++};for(var E in c.STATE)c.STATE[c.STATE[E]]=E;a=c.STATE;const s={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(u){function r(){this.__proto__=u}return r.prototype=u,new r}),Object.getPrototypeOf||(Object.getPrototypeOf=function(u){return u.__proto__}),Object.keys||(Object.keys=function(u){var r=[];for(var m in u)u.hasOwnProperty(m)&&r.push(m);return r});function N(u){var r=Math.max(c.MAX_BUFFER_LENGTH,10),m=0;for(var p in g){var Z=u[p]===void 0?0:u[p].length;if(Z>r)switch(p){case"text":closeText(u);break;default:V(u,"Max buffer length exceeded: "+p)}m=Math.max(m,Z)}u.bufferCheckPosition=c.MAX_BUFFER_LENGTH-m+u.position}function $(u){for(var r in g)u[r]=g[r]}var Oe=/[\\"\n]/g;function he(u){if(!(this instanceof he))return new he(u);var r=this;$(r),r.bufferCheckPosition=c.MAX_BUFFER_LENGTH,r.q=r.c=r.p="",r.opt=u||{},r.closed=r.closedRoot=r.sawRoot=!1,r.tag=r.error=null,r.state=a.BEGIN,r.stack=new Array,r.position=r.column=0,r.line=1,r.slashed=!1,r.unicodeI=0,r.unicodeS=null,r.depth=0,se(r,"onready")}he.prototype={end:function(){Se(this)},write:Ne,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{I=pn.Stream}catch(u){I=function(){}}function D(u){return new q(u)}function q(u){if(!(this instanceof q))return new q(u);this._parser=new he(u),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var r=this;I.apply(r),this._parser.onend=function(){r.emit("end")},this._parser.onerror=function(m){r.emit("error",m),r._parser.error=null},f.forEach(function(m){Object.defineProperty(r,"on"+m,{get:function(){return r._parser["on"+m]},set:function(p){if(!p)return r.removeAllListeners(m),r._parser["on"+m]=p,p;r.on(m,p)},enumerable:!0,configurable:!1})})}q.prototype=Object.create(I.prototype,{constructor:{value:q}}),q.prototype.write=function(u){u=new Buffer(u);for(var r=0;r<u.length;r++){var m=u[r];if(this.bytes_remaining>0){for(var p=0;p<this.bytes_remaining;p++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+p]=u[p];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,r=r+p-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&m>=128)if(m>=194&&m<=223&&(this.bytes_in_sequence=2),m>=224&&m<=239&&(this.bytes_in_sequence=3),m>=240&&m<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+r>u.length){for(var Z=0;Z<=u.length-1-r;Z++)this.temp_buffs[this.bytes_in_sequence][Z]=u[r+Z];return this.bytes_remaining=r+this.bytes_in_sequence-u.length,!0}else{this.string=u.slice(r,r+this.bytes_in_sequence).toString(),r=r+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var z=r;z<u.length&&!(u[z]>=128);z++);this.string=u.slice(r,z).toString(),this._parser.write(this.string),this.emit("data",this.string),r=z-1}},q.prototype.end=function(u){return u&&u.length&&this._parser.write(u.toString()),this._parser.end(),!0},q.prototype.on=function(u,r){var m=this;return!m._parser["on"+u]&&f.indexOf(u)!==-1&&(m._parser["on"+u]=function(){var p=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);p.splice(0,0,u),m.emit.apply(m,p)}),I.prototype.on.call(m,u,r)},q.prototype.destroy=function(){$(this._parser),this.emit("close")};function se(u,r,m){c.INFO&&console.log("-- emit",r,m),u[r]&&u[r](m)}function Le(u,r,m){de(u),se(u,r,m)}function de(u,r){u.textNode=ue(u.opt,u.textNode),u.textNode!==void 0&&se(u,r||"onvalue",u.textNode),u.textNode=void 0}function T(u){u.numberNode&&se(u,"onvalue",parseFloat(u.numberNode)),u.numberNode=""}function ue(u,r){return r===void 0||(u.trim&&(r=r.trim()),u.normalize&&(r=r.replace(/\s+/g," "))),r}function V(u,r){return de(u),r+="\nLine: "+u.line+"\nColumn: "+u.column+"\nChar: "+u.c,r=new Error(r),u.error=r,se(u,"onerror",r),u}function Se(u){return(u.state!==a.VALUE||u.depth!==0)&&V(u,"Unexpected end"),de(u),u.c="",u.closed=!0,se(u,"onend"),he.call(u,u.opt),u}function we(u){return u===s.carriageReturn||u===s.lineFeed||u===s.space||u===s.tab}function Ne(u){var r=this;if(this.error)throw this.error;if(r.closed)return V(r,"Cannot write after close. Assign an onready handler.");if(u===null)return Se(r);var m=0,p=u.charCodeAt(0),Z=r.p;for(c.DEBUG&&console.log("write -> ["+u+"]");p&&(Z=p,r.c=p=u.charCodeAt(m++),Z!==p?r.p=Z:Z=r.p,!!p);)switch(c.DEBUG&&console.log(m,p,c.STATE[r.state]),r.position++,p===s.lineFeed?(r.line++,r.column=0):r.column++,r.state){case a.BEGIN:p===s.openBrace?r.state=a.OPEN_OBJECT:p===s.openBracket?r.state=a.OPEN_ARRAY:we(p)||V(r,"Non-whitespace before {[.");continue;case a.OPEN_KEY:case a.OPEN_OBJECT:if(we(p))continue;if(r.state===a.OPEN_KEY)r.stack.push(a.CLOSE_KEY);else if(p===s.closeBrace){se(r,"onopenobject"),this.depth++,se(r,"oncloseobject"),this.depth--,r.state=r.stack.pop()||a.VALUE;continue}else r.stack.push(a.CLOSE_OBJECT);p===s.doubleQuote?r.state=a.STRING:V(r,'Malformed object key should start with "');continue;case a.CLOSE_KEY:case a.CLOSE_OBJECT:if(we(p))continue;r.state,a.CLOSE_KEY,p===s.colon?(r.state===a.CLOSE_OBJECT?(r.stack.push(a.CLOSE_OBJECT),de(r,"onopenobject"),this.depth++):de(r,"onkey"),r.state=a.VALUE):p===s.closeBrace?(Le(r,"oncloseobject"),this.depth--,r.state=r.stack.pop()||a.VALUE):p===s.comma?(r.state===a.CLOSE_OBJECT&&r.stack.push(a.CLOSE_OBJECT),de(r),r.state=a.OPEN_KEY):V(r,"Bad object");continue;case a.OPEN_ARRAY:case a.VALUE:if(we(p))continue;if(r.state===a.OPEN_ARRAY)if(se(r,"onopenarray"),this.depth++,r.state=a.VALUE,p===s.closeBracket){se(r,"onclosearray"),this.depth--,r.state=r.stack.pop()||a.VALUE;continue}else r.stack.push(a.CLOSE_ARRAY);p===s.doubleQuote?r.state=a.STRING:p===s.openBrace?r.state=a.OPEN_OBJECT:p===s.openBracket?r.state=a.OPEN_ARRAY:p===s.t?r.state=a.TRUE:p===s.f?r.state=a.FALSE:p===s.n?r.state=a.NULL:p===s.minus?r.numberNode+="-":s._0<=p&&p<=s._9?(r.numberNode+=String.fromCharCode(p),r.state=a.NUMBER_DIGIT):V(r,"Bad value");continue;case a.CLOSE_ARRAY:if(p===s.comma)r.stack.push(a.CLOSE_ARRAY),de(r,"onvalue"),r.state=a.VALUE;else if(p===s.closeBracket)Le(r,"onclosearray"),this.depth--,r.state=r.stack.pop()||a.VALUE;else{if(we(p))continue;V(r,"Bad array")}continue;case a.STRING:r.textNode===void 0&&(r.textNode="");var z=m-1,le=r.slashed,ye=r.unicodeI;e:for(;;){for(c.DEBUG&&console.log(m,p,c.STATE[r.state],le);ye>0;)if(r.unicodeS+=String.fromCharCode(p),p=u.charCodeAt(m++),r.position++,ye===4?(r.textNode+=String.fromCharCode(parseInt(r.unicodeS,16)),ye=0,z=m-1):ye++,!p)break e;if(p===s.doubleQuote&&!le){r.state=r.stack.pop()||a.VALUE,r.textNode+=u.substring(z,m-1),r.position+=m-1-z;break}if(p===s.backslash&&!le&&(le=!0,r.textNode+=u.substring(z,m-1),r.position+=m-1-z,p=u.charCodeAt(m++),r.position++,!p))break;if(le){if(le=!1,p===s.n?r.textNode+="\n":p===s.r?r.textNode+="\r":p===s.t?r.textNode+="	":p===s.f?r.textNode+="\f":p===s.b?r.textNode+="\b":p===s.u?(ye=1,r.unicodeS=""):r.textNode+=String.fromCharCode(p),p=u.charCodeAt(m++),r.position++,z=m-1,p)continue;break}Oe.lastIndex=m;var ve=Oe.exec(u);if(ve===null){m=u.length+1,r.textNode+=u.substring(z,m-1),r.position+=m-1-z;break}if(m=ve.index+1,p=u.charCodeAt(ve.index),!p){r.textNode+=u.substring(z,m-1),r.position+=m-1-z;break}}r.slashed=le,r.unicodeI=ye;continue;case a.TRUE:p===s.r?r.state=a.TRUE2:V(r,"Invalid true started with t"+p);continue;case a.TRUE2:p===s.u?r.state=a.TRUE3:V(r,"Invalid true started with tr"+p);continue;case a.TRUE3:p===s.e?(se(r,"onvalue",!0),r.state=r.stack.pop()||a.VALUE):V(r,"Invalid true started with tru"+p);continue;case a.FALSE:p===s.a?r.state=a.FALSE2:V(r,"Invalid false started with f"+p);continue;case a.FALSE2:p===s.l?r.state=a.FALSE3:V(r,"Invalid false started with fa"+p);continue;case a.FALSE3:p===s.s?r.state=a.FALSE4:V(r,"Invalid false started with fal"+p);continue;case a.FALSE4:p===s.e?(se(r,"onvalue",!1),r.state=r.stack.pop()||a.VALUE):V(r,"Invalid false started with fals"+p);continue;case a.NULL:p===s.u?r.state=a.NULL2:V(r,"Invalid null started with n"+p);continue;case a.NULL2:p===s.l?r.state=a.NULL3:V(r,"Invalid null started with nu"+p);continue;case a.NULL3:p===s.l?(se(r,"onvalue",null),r.state=r.stack.pop()||a.VALUE):V(r,"Invalid null started with nul"+p);continue;case a.NUMBER_DECIMAL_POINT:p===s.period?(r.numberNode+=".",r.state=a.NUMBER_DIGIT):V(r,"Leading zero not followed by .");continue;case a.NUMBER_DIGIT:s._0<=p&&p<=s._9?r.numberNode+=String.fromCharCode(p):p===s.period?(r.numberNode.indexOf(".")!==-1&&V(r,"Invalid number has two dots"),r.numberNode+="."):p===s.e||p===s.E?((r.numberNode.indexOf("e")!==-1||r.numberNode.indexOf("E")!==-1)&&V(r,"Invalid number has two exponential"),r.numberNode+="e"):p===s.plus||p===s.minus?(Z===s.e||Z===s.E||V(r,"Invalid symbol in number"),r.numberNode+=String.fromCharCode(p)):(T(r),m--,r.state=r.stack.pop()||a.VALUE);continue;default:V(r,"Unknown state: "+r.state)}return r.position>=r.bufferCheckPosition&&N(r),r}})(y)});function dn(h){var y=0,c=vn(!0),v={pullAsync:function(g){return at(this,void 0,void 0,function(){var f,a,I;return Qe(this,function(E){switch(E.label){case 0:return f=h.slice(y,y+g),y+=g,[4,kt(f,"text")];case 1:return a=E.sent(),I=c.write(a),v.result=I||{},[2,I]}})})},pullSync:function(g){var f=h.slice(y,y+g);y+=g;var a=Lt(f,"text"),I=c.write(a);return v.result=I||{},I},done:function(){return c.done()},eof:function(){return y>=h.size},result:{}};return v}function vn(h){var y=yn.parser(),c=0,v,g=[],f,a,I=!1,E=!1;return y.onopenobject=function(s){var N={};N.incomplete=!0,v||(v=N),f&&(g.push([a,f,E]),h&&(E?f.push(N):f[a]=N)),f=N,a=s,E=!1,++c},y.onkey=function(s){return a=s},y.onvalue=function(s){return E?f.push(s):f[a]=s},y.oncloseobject=function(){var s;if(delete f.incomplete,a=null,--c===0)I=!0;else{var N=f;s=g.pop(),a=s[0],f=s[1],E=s[2],h||(E?f.push(N):f[a]=N)}},y.onopenarray=function(){var s=[];s.incomplete=!0,v||(v=s),f&&(g.push([a,f,E]),h&&(E?f.push(s):f[a]=s)),f=s,E=!0,a=null,++c},y.onclosearray=function(){var s;if(delete f.incomplete,a=null,--c===0)I=!0;else{var N=f;s=g.pop(),a=s[0],f=s[1],E=s[2],h||(E?f.push(N):f[a]=N)}},{write:function(s){return y.write(s),v},done:function(){return I}}}var Ft=1024;function hn(h,y){return at(this,void 0,void 0,function(){var c,v,g,f;return Qe(this,function(a){switch(a.label){case 0:return y=y||{},c=y.chunkSizeBytes||Ft*1024,[4,Dt(h,c)];case 1:return v=a.sent(),g=v.result.data,f=new Ce(g.databaseName),f.version(g.databaseVersion).stores(an(g)),[4,_t(f,v,y)];case 2:return a.sent(),[2,f]}})})}function _t(h,y,c){return at(this,void 0,void 0,function(){function v(){return at(this,void 0,void 0,function(){var D,q,se,Le,de;return Qe(this,function(T){switch(T.label){case 0:D=function(ue){var V,Se,we,Ne,u,r,m,p,Z,z,le,ye;return Qe(this,function(ve){switch(ve.label){case 0:if(!ue.rows)return[2,"break"];if(!ue.rows.incomplete&&ue.rows.length===0)return[2,"continue"];if(s&&Ce.ignoreTransaction(function(){return s(N)}),V=ue.tableName,Se=h.table(V),we=E.tables.filter(function(te){return te.name===V})[0].schema,!Se){if(c.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(ue.tableName," is missing in installed database"))}if(!c.acceptChangedPrimaryKey&&we.split(",")[0]!=Se.schema.primKey.src)throw new Error("Primary key differs for table ".concat(ue.tableName,". "));for(Ne=ue.rows,u=[],r=0;r<Ne.length&&(m=Ne[r],!m.incomplete);r++)u.push(Ye.revive(m));return p=c.filter,Z=p?ue.inbound?u.filter(function(te){return p(V,te)}):u.filter(function(te){var Ue=te[0],xe=te[1];return p(V,xe,Ue)}):u,z=ue.inbound?[void 0,Z]:[Z.map(function(te){return te[0]}),u.map(function(te){return te[1]})],le=z[0],ye=z[1],c.overwriteValues?[4,Se.bulkPut(ye,le)]:[3,2];case 1:return ve.sent(),[3,4];case 2:return[4,Se.bulkAdd(ye,le)];case 3:ve.sent(),ve.label=4;case 4:return N.completedRows+=u.length,u.incomplete||(N.completedTables+=1),Ne.splice(0,u.length),[2]}})},q=0,se=E.data,T.label=1;case 1:return q<se.length?(Le=se[q],[5,D(Le)]):[3,4];case 2:if(de=T.sent(),de==="break")return[3,4];T.label=3;case 3:return q++,[3,1];case 4:for(;E.data.length>0&&E.data[0].rows&&!E.data[0].rows.incomplete;)E.data.splice(0,1);return!f.done()&&!f.eof()?I?(f.pullSync(g),[3,7]):[3,5]:[3,8];case 5:return[4,Ce.waitFor(f.pullAsync(g))];case 6:T.sent(),T.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var g,f,a,I,E,s,N,$,Oe,he;return Qe(this,function(D){switch(D.label){case 0:return c=c||{},g=c.chunkSizeBytes||Ft*1024,[4,Dt(y,g)];case 1:if(f=D.sent(),a=f.result,I="FileReaderSync"in self,E=a.data,!c.acceptNameDiff&&h.name!==E.databaseName)throw new Error("Name differs. Current database name is ".concat(h.name," but export is ").concat(E.databaseName));if(!c.acceptVersionDiff&&h.verno!==E.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(h.verno," but export is ").concat(E.databaseVersion));if(s=c.progressCallback,N={done:!1,completedRows:0,completedTables:0,totalRows:E.tables.reduce(function(q,se){return q+se.rowCount},0),totalTables:E.tables.length},s&&Ce.ignoreTransaction(function(){return s(N)}),!c.clearTablesBeforeImport)return[3,5];$=0,Oe=h.tables,D.label=2;case 2:return $<Oe.length?(he=Oe[$],[4,he.clear()]):[3,5];case 3:D.sent(),D.label=4;case 4:return $++,[3,2];case 5:return c.noTransaction?[4,v()]:[3,7];case 6:return D.sent(),[3,9];case 7:return[4,h.transaction("rw",h.tables,v)];case 8:D.sent(),D.label=9;case 9:return N.done=!0,s&&Ce.ignoreTransaction(function(){return s(N)}),[2]}})})}function Dt(h,y){return at(this,void 0,void 0,function(){var c,v;return Qe(this,function(g){switch(g.label){case 0:c="slice"in h?dn(h):h,g.label=1;case 1:return c.eof()?[3,3]:[4,c.pullAsync(y)];case 2:return g.sent(),c.result.data&&c.result.data.data?[3,3]:[3,1];case 3:if(v=c.result,!v||v.formatName!="dexie")throw new Error("Given file is not a dexie export");if(v.formatVersion>ln)throw new Error("Format version ".concat(v.formatVersion," not supported"));if(!v.data)throw new Error("No data in export file");if(!v.data.databaseName)throw new Error("Missing databaseName in export file");if(!v.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!v.data.tables)throw new Error("Missing tables in export file");return[2,c]}})})}Ce.prototype.export=function(h){return Rt(this,h)};Ce.prototype.import=function(h,y){return _t(this,h,y)};Ce.import=function(h,y){return hn(h,y)};const bn=Ct("br",null,null,-1),mn=Ct("br",null,null,-1),Nn=Kt({__name:"SettingsPage",setup(h){const y=$t(void 0),c=jt({dataType:"Blob",types:[{description:"JSON Datei",accept:{"application/json":[".json"]}}]}),v=Bt.isNativePlatform();async function g(){Rt(pt,{prettyJson:!0}).then(I=>{tn(I,"database_dump.json").then(E=>{console.log(E)})})}function f(I){_t(pt,I,{acceptMissingTables:!0,acceptVersionDiff:!0,acceptNameDiff:!0,acceptChangedPrimaryKey:!0,overwriteValues:!0,clearTablesBeforeImport:!0}).then(()=>{it("Import erfolgreich","success")}).catch(E=>{it("Import gescheitert","danger"),console.warn(E)})}async function a(){if(!v){if(!c.isSupported.value){if(y.value===void 0){console.warn("Should not happen");return}const I=y.value.files;if(I===null||I.length===0){it("Bitte zuerst eine Datei auswhlen");return}const E=I[0],s=new FileReader,N=()=>{const Oe=new Blob([s.result],{type:E.type});f(Oe)},$=Oe=>{Oe.loaded!==Oe.total&&it("It seems that something went wrong.","danger"),s.removeEventListener("load",N),s.removeEventListener("onloaded",$)};s.addEventListener("load",N),s.addEventListener("loadend",$),s.readAsArrayBuffer(E);return}try{await c.open()}catch(I){return}f(c.data.value);return}}return(I,E)=>(Et(),Vt(Xt,null,{default:$e(()=>[Ge(Ee(Ht),null,{default:$e(()=>[Ge(Ee(Jt),null,{default:$e(()=>[Ge(Ee(Mt),null,{default:$e(()=>[Ge(Ee(Gt),null,{default:$e(()=>[rt(" Datenbank ")]),_:1})]),_:1}),Ge(Ee(Yt),null,{default:$e(()=>[Ge(Ee(mt),{lines:"none"},{default:$e(()=>[rt(" Name: "+gt(Ee(pt).name),1),bn,rt(" Version: "+gt(Ee(pt).verno),1),mn,rt(" Dexie-Version: "+gt(Ee(Ce).version),1)]),_:1}),Ge(Ee(mt),{lines:"none"},{default:$e(()=>[Ge(Ee(Nt),{onClick:g},{default:$e(()=>[rt("Exportieren")]),_:1}),Ge(Ee(Pt),null,{default:$e(()=>[rt(" Exportiert die gesamte Datenbank im JSON-Format. ")]),_:1})]),_:1}),Ge(Ee(mt),{lines:"none"},{default:$e(()=>[Ge(Ee(Nt),{onClick:a},{default:$e(()=>[rt("Importieren")]),_:1}),Ee(v)||!Ee(c).isSupported.value?(Et(),qt("input",{key:0,ref_key:"importFileInput",ref:y,type:"file"},null,512)):zt("",!0),Ge(Ee(Pt),null,{default:$e(()=>[rt(" Importiert die gesamte Datenbank im JSON-Format. ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});export{Nn as default};
